(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6569],{35551:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/settings",function(){return s(97197)}])},74450:function(e,t,s){"use strict";var n=s(85893),i=(s(67294),s(48081)),a=s(92429),r=s.n(a);t.Z=e=>{let{checked:t,onChange:s,disabled:a=!1,id:o}=e;const l=(0,i.AK)(r().toggleLabel,a&&r().toggleLabelDisabled),c=(0,i.AK)(r().toggleInput,t&&r().toggleInputChecked),u=(0,i.AK)(r().toggleStatus,t&&r().toggleStatusChecked,a&&r().toggleStatusDisabled),d=(0,i.AK)(r().toggleSlider,t&&r().toggleSliderChecked);return(0,n.jsxs)("label",{className:l,children:[(0,n.jsx)("input",{className:c,type:"checkbox",checked:t,onChange:s,disabled:a,id:o}),(0,n.jsx)("div",{className:u,children:(0,n.jsx)("span",{className:d})})]})}},84779:function(e,t,s){"use strict";s.d(t,{s:function(){return h}});var n=s(41799),i=s(85893),a=(s(67294),s(10342)),r=s(33899),o=s(57793),l=s(82327),c=s(92596),u=s(80074),d=s(76682),g=s.n(d),p=s(9388),m=s(99485),x=s.n(m);const f=e=>{let{userDisplayName:t,children:s}=e;return(0,i.jsx)(p.W,{modalTitle:(0,i.jsx)(o.x,{id:"consumer-verification/tooltip/title-v2"}),tooltipTitle:(0,i.jsx)(l.Z,{variant:"bodysmall",weight:"medium",gutterBottom:!0,children:(0,i.jsx)(o.x,{id:"consumer-verification/tooltip/title-v2"})}),button:(0,i.jsxs)("button",{className:x().btnWrapper,"aria-label":t,children:[s,(0,i.jsx)("span",{className:x().badge,children:(0,i.jsx)(c.J,{content:g(),width:14,height:14})})]}),tooltipTriggers:["click","hover"],trackingProps:{name:"Consumer Verification Tooltip"},children:(0,i.jsx)(o.x,{id:"consumer-verification/tooltip/body",interpolations:{LINK:e=>(0,i.jsx)(u.rU,{href:"https://support.trustpilot.com/hc/articles/4410802590354?utm_source=b2c_tp",className:x().link,target:"_blank",trackingProps:{target:"Support 4410802590354",name:"support-article-consumer-verification"},children:e},"support-link")}})})},h=e=>{let{isVerified:t=!1,id:s,displayName:o="",imageUrl:l,size:c=44,imgAltText:u=""}=e;const d={consumerId:s,displayName:o,name:"consumer",size:c,image:!l||-1!==l.indexOf("/default/")?null:(0,i.jsx)(r.E,{src:l,alt:u,width:c,height:c,"data-consumer-avatar-image":!0})};return t?(0,i.jsx)(f,{userDisplayName:o,children:(0,i.jsx)(a.q,(0,n.Z)({},d))}):(0,i.jsx)(a.q,(0,n.Z)({},d))}},34859:function(e,t,s){"use strict";s.d(t,{Z:function(){return U}});var n=s(85893),i=s(67294),a=s(57793),r=s(41664),o=s.n(r),l=s(90824),c=s(62611),u=s(4189),d=s(82327),g=s(65424),p=s(92582),m=s(71261),x=s(3620),f=s(48081),h=s(68578),_=s(80074),v=s(46692),y=s.n(v);const S=e=>{let{status:t,children:s}=e;return(0,n.jsx)(_.rU,{href:"https://support.trustpilot.com/hc/articles/4410802590354?utm_source=b2c_tp".concat(t!==x.$Z.notverified?"&utm_campaign=user_settings":""),target:"_blank",trackingProps:{target:"Support 4410802590354",name:"support-article-consumer-verification",verificationStatus:t},className:y().link,children:s})},j=e=>{let{isOpen:t,onClose:s,onValidate:r}=e;const[o,l]=i.useState(!1);return(0,n.jsxs)(h.u_,{isOpen:t,onClose:s,name:"country-selected",children:[(0,n.jsx)(h.xB,{children:(0,n.jsx)(a.x,{id:"user-settings-page/verification/delete-verification-modal/heading"})}),(0,n.jsx)(h.hz,{children:(0,n.jsx)(d.Z,{variant:"body",gutterBottom:!0,children:(0,n.jsx)(a.x,{id:"user-settings-page/verification/delete-verification-modal/body",interpolations:{LINK:e=>(0,n.jsx)(S,{status:x.$Z.verified,children:e},"link"),"LINE-BREAK":(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]},"br")}})})}),(0,n.jsxs)(h.mz,{children:[(0,n.jsx)(g.Sn,{name:"consumer-verification-delete-confirm",kind:"primary",onClick:async()=>{l(!0),await r(),l(!1)},isBusy:o,trackingProps:{name:"consumer-verification-delete-confirm",action:"Consumer Verification Deleted"},children:(0,n.jsx)(a.x,{id:"user-settings-page/verification/delete-verification-modal/delete"})}),(0,n.jsx)(g.Sn,{name:"consumer-verification-delete-cancel",onClick:s,children:(0,n.jsx)(a.x,{id:"user-settings-page/verification/delete-verification-modal/back"})})]})]})};var b=s(92596),w=s(49345),N=s.n(w),I=s(69136),C=s.n(I);const E=e=>{let{status:t}=e;return t===x.$Z.notverified?null:(0,n.jsx)("span",{className:y().statusIcon,children:null!==(s={[x.$Z.submitted]:(0,n.jsx)("span",{className:y().loading}),[x.$Z.failed]:(0,n.jsx)(b.J,{content:N(),color:"#EB1700"}),[x.$Z.verified]:(0,n.jsx)(b.J,{content:C(),color:"#00B67A"})}[t])&&void 0!==s?s:null});var s};var k=s(74937),A=s(16793);function L(){const{fetch:e}=(0,k.i)();return{start:()=>(async e=>{const t=await e("/api/businessunitprofile/consumer/verification/start",{method:"POST"});if(!t.ok)throw new A.o(t);return await t.json()})(e),abandon:()=>(async e=>{const t=await e("/api/businessunitprofile/consumer/verification/abandon",{method:"POST"});if(!t.ok)throw new A.o(t)})(e),submit:()=>(async e=>{const t=await e("/api/businessunitprofile/consumer/verification/submit",{method:"POST"});if(!t.ok)throw new A.o(t)})(e),remove:()=>(async e=>{const t=await e("/api/businessunitprofile/consumer/verification",{method:"DELETE"});if(!t.ok)throw new A.o(t)})(e)}}const D="/users/settings",O="verification-settings";function P(){window.location.pathname===D?(window.location.hash=O,window.location.reload()):window.location.href="".concat(D,"#").concat(O)}var U=e=>{let{status:t,consumerId:s}=e;const r=t===x.$Z.notverified,h=[x.$Z.notverified,x.$Z.failed].includes(t),_=t===x.$Z.verified,v=(0,f.mY)("consumer_verification_global.svg"),{locale:b,track:w}=i.useContext(l.AppContext),[N,I]=i.useState(!1),[C,k]=i.useState(!1),{abandon:A,submit:D,start:U,remove:T}=L(),[M,B]=i.useState(!1);return(0,n.jsxs)(c.Zb,{className:y().cardWrapper,id:O,children:[C?(0,n.jsx)(u.w,{appearance:"critical",className:y().alert,children:(0,n.jsx)(d.Z,{variant:"bodysmall","data-verification-error":!0,children:(0,n.jsx)(a.x,{id:"user-settings-page/verification/error"})})}):null,(0,n.jsxs)(d.Z,{variant:"h3",as:"h2",weight:"medium",gutterBottom:!0,color:"inherit",children:[(0,n.jsx)(a.x,{id:r?"user-settings-page/verification/heading/not_verified":"user-settings-page/verification/heading"}),(0,n.jsx)(E,{status:t})]}),(0,n.jsxs)("div",{className:y().content,children:[(0,n.jsx)(d.Z,{variant:"body",gutterBottom:!0,children:(0,n.jsx)(a.x,{id:"user-settings-page/verification/body/".concat(t),interpolations:{BOLD:e=>(0,n.jsx)("b",{children:e},"b"),LINK:e=>(0,n.jsx)(S,{status:t,children:e},"linkfooter")}})}),r?(0,n.jsx)("img",{alt:"",src:v,width:"80",height:"80",className:y().image}):null]}),r?(0,n.jsx)(d.Z,{variant:"body",className:y().paragraph,children:(0,n.jsx)(a.x,{id:"user-settings-page/verification/body/footer/not_verified",interpolations:{LINK:e=>(0,n.jsx)(S,{status:t,children:e},"link")}})}):null,h?(0,n.jsx)(g.Sn,{name:"verification-submit-button",className:y().consumerVerificationStart,kind:"primary",type:"submit",trackingProps:{name:"verification-submit-button",action:"Consumer Verification Started"},onClick:async()=>{I(!0);try{const{sessionUrl:e}=await U();(0,m.f)({url:e,lang:b,onEvent:async e=>{e===m.X.CANCELED?(w("Button Clicked",{action:"Consumer Verification Abandoned"}),await A()):e===m.X.FINISHED&&(w("Button Clicked",{action:"Consumer Verification Submitted"}),await D(),P()),k(!1)}})}catch(C){k(!0)}finally{I(!1)}},isBusy:N,children:(0,n.jsx)(a.x,{id:"user-settings-page/verification/button/not_verified"})}):null,_?(0,n.jsxs)("div",{className:y().buttons,children:[(0,n.jsx)(o(),{passHref:!0,href:(0,f.Xg)(s),children:(0,n.jsx)(p.Z,{buttonProps:{kind:"primary"},className:y().button,children:(0,n.jsx)(a.x,{id:"user-settings-page/verification/button/verified/primary"})})}),(0,n.jsx)(g.Sn,{name:"remove-verification",onClick:()=>{B(!0)},className:y().button,trackingProps:{action:"Open Delete Consumer Verification Modal",name:"Remove verification"},children:(0,n.jsx)(a.x,{id:"user-settings-page/verification/button/verified/secondary"})}),(0,n.jsx)(j,{isOpen:M,onClose:()=>B(!1),onValidate:async()=>{try{await T(),P()}catch(C){k(!0)}B(!1)}})]}):null]})}},33899:function(e,t,s){"use strict";s.d(t,{E:function(){return o}});var n=s(41799),i=s(85893),a=(s(67294),s(25675)),r=s.n(a);const o=e=>(0,i.jsx)(r(),(0,n.Z)({unoptimized:!0},e))},61928:function(e,t,s){"use strict";s.d(t,{$:function(){return l},A:function(){return c}});var n=s(41799),i=s(69396),a=s(85893),r=(s(67294),s(57793)),o=s(62563);const l=(e,t)=>"".concat(e,0===t?"/zero":1===t?"/one":"/many"),c=e=>{let{id:t,pluralNumber:s,interpolations:c={}}=e;const u=l(t,s);return(0,a.jsx)(r.x,{id:u,interpolations:(0,i.Z)((0,n.Z)({},c),{COUNT:(0,a.jsx)(o.n$,{number:s},0)})})}},9388:function(e,t,s){"use strict";s.d(t,{W:function(){return c}});var n=s(85893),i=s(67294),a=s(90824),r=s(48591),o=s(68578),l=s(14111);const c=e=>{let{trackingProps:t,button:s,children:c,modalTitle:u,placement:d,tooltipTriggers:g,tooltipTitle:p}=e;const{track:m}=i.useContext(a.AppContext),x=(0,l.k)("smaller-than","tablet-small"),[f,h]=i.useState(!1);if(!x)return(0,n.jsx)(r.u,{tooltipTitle:p,tooltipText:c,trackingProps:t,trigger:g,placement:d,children:s});const _={onClick:e=>{s.props&&"function"===typeof s.props.onClick&&s.props.onClick(e),m("Element Viewed",t),h(!0)}};return(0,n.jsxs)(n.Fragment,{children:[i.cloneElement(s,_),(0,n.jsxs)(o.u_,{name:t.name,isOpen:f,onClose:()=>h(!1),children:[(0,n.jsx)(o.xB,{children:u}),(0,n.jsx)(o.hz,{children:c})]})]})}},43358:function(e,t,s){"use strict";s.d(t,{p:function(){return u}});var n=s(85893),i=s(67294),a=s(90824),r=s(48591),o=s(92596),l=s(88826),c=s.n(l);const u=e=>{let{className:t,tooltipText:s,placement:l,trackingProps:u}=e;const d=i.useContext(a.AppContext),[g,p]=i.useState(!1);return(0,n.jsx)("span",{className:t,onMouseOver:()=>u&&void(g||(d.track("Element Viewed",u),p(!0))),children:(0,n.jsx)(r.u,{tooltipText:s,placement:l,children:(0,n.jsx)(o.J,{content:c(),color:"#6C6C85"})})})}},42344:function(e,t,s){"use strict";s.d(t,{n:function(){return r}});var n=s(67294),i=s(90824),a=s(66887);const r=()=>{const{locale:e}=n.useContext(i.AppContext),{legalUrl:t}=a.Pu.getLocale(e);return{privacyPolicy:"".concat(t,"/for-reviewers/end-user-privacy-terms"),termsAndConditions:"".concat(t,"/for-reviewers/end-user-terms-and-conditions")}}},14223:function(e,t,s){"use strict";s.d(t,{U:function(){return l}});var n=s(67294),i=s(87042),a=s(90824),r=s(74937),o=s(91868);const l=()=>{const{fetch:e}=(0,r.i)(),{locale:t}=n.useContext(a.AppContext),s=(()=>{const[e,t]=n.useState();return n.useEffect((()=>{!async function(){var e;await(0,i.N4)();const s=null===(e=window.Optanon.getGeolocationData())||void 0===e?void 0:e.country;s&&t(s)}()}),[]),e})();return{optInMarketing:n.useCallback((async()=>{const n=await e("/api/businessunitprofile/consumer/email/marketing",{method:"POST",body:JSON.stringify({subscribe:!0,locale:t,textVersion:(0,o.$)("broadmarketing").version,countryCode:s})});return n.ok?await n.json():{success:!1}}),[e,t,s]),optOutMarketing:n.useCallback((async()=>({success:(await e("/api/businessunitprofile/consumer/email/marketing",{method:"DELETE"})).ok})),[e])}}},21159:function(e,t,s){"use strict";s.d(t,{L:function(){return a}});var n=s(16793),i=s(74937);const a=()=>{const{fetch:e}=(0,i.i)();return{updateProfilePicture:async t=>{const s=await(i=t,new Promise(((e,t)=>{const s=new FileReader;s.readAsDataURL(i),s.onload=()=>e(s.result.split(",")[1]),s.onerror=e=>t(e)})));var i;const a=await e("/api/businessunitprofile/profile-picture",{method:"POST",body:JSON.stringify({fileContent:s})});if(!a.ok)throw new n.o(a)},deleteProfilePicture:async()=>{const t=await e("/api/businessunitprofile/profile-picture",{method:"DELETE"});if(!t.ok)throw new n.o(t)}}}},97197:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return We},default:function(){return Fe}});var n=s(41799),i=s(69396),a=s(85893),r=s(67294),o=s(48),l=s(1411),c=s(60997),u=s(57793),d=s(62611),g=s(82327),p=s(80074),m=s(48081),x=s(25466),f=s.n(x);const h=()=>(0,a.jsxs)(d.Zb,{className:f().wrapper,children:[(0,a.jsx)(g.Z,{variant:"h3",as:"h2",weight:"medium",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/downloadprofile/heading"})}),(0,a.jsx)(g.Z,{variant:"body",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/downloadprofile/body",interpolations:{LINK:e=>(0,a.jsx)(p.rU,{href:(0,m.TO)(),trackingProps:{name:"see-user-data",target:"User Data Page"},children:e},"link")}})})]});var _,v=s(19233),y=s(4189),S=s(65424),j=s(14223),b=s(3620),w=s(90824);!function(e){e.delay="delay",e.never="never"}(_||(_={}));const N=e=>{const{track:t}=r.useContext(w.AppContext);return s=>t("Settings Saved",{emailNotification:{[e]:s}})},I=()=>{const[e,t]=r.useState(!1);return r.useEffect((()=>{const e=setTimeout((()=>{t(!1)}),1e4);return()=>{clearTimeout(e)}}),[e]),[e,()=>t(!0)]},C=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;const[s,n]=r.useState(e),[i,a]=r.useState(t),[o,l]=r.useState(!0);function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.delay;n(!0),l(!o),a(e)}function u(){n(!1),l(!o)}return r.useEffect((()=>{let e;return s&&"delay"===i&&(e=setTimeout((()=>{n(!1)}),1e4)),()=>{clearTimeout(e)}}),[s,i,o]),[s,c,u]};var E=s(74450),k=s(70395),A=s.n(k);const L=e=>{const[t,s]=r.useState(e.broadMarketing),[n,i]=r.useState(e.broadMarketing===b.Bm.in||e.broadMarketing===b.Bm.pending_confirmation&&"failed"!==e.doubleOptInConfirmationStatus),[o,l]=r.useState(n),[c,m]=r.useState(!1),x=o!==n,f=N("broadMarketing"),{optInMarketing:h,optOutMarketing:w}=(0,j.U)();let I;e.doubleOptInConfirmationStatus===b.LN.confirmed?I="success":e.doubleOptInConfirmationStatus===b.LN.failed?I="critical":t===b.Bm.pending_confirmation&&(I="info"),r.useEffect((()=>{e.doubleOptInConfirmationStatus===b.LN.confirmed&&f(b.Bm.in)}),[]);const[k,L,D]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.delay;const[s,n]=r.useState(e),[i,a,o]=C(!!e,t);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.delay;n(e),a(t)}return[i?s:null,l,o]}(I,I?_.never:void 0),O="".concat(e.legalSiteUrl,"/for-reviewers/end-user-privacy-terms");return(0,a.jsxs)(d.Zb,{id:"email-settings",className:A().emailSettings,children:[(0,a.jsx)(g.Z,{variant:"h3",as:"h2",weight:"medium",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/header"})}),(0,a.jsx)(g.Z,{variant:"body",children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/choosesubscriptionemails-v2",interpolations:{LINK:e=>(0,a.jsx)(p.rU,{href:O,target:"_blank",children:e},"link")}})}),(0,a.jsx)(v.i,{className:A().emailSettingsLine}),(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(!0);try{let e=null;if(n){const s=await h();if(!s.success)throw new Error("Unable to opt user into marketing");var t;e=null!==(t=s.status)&&void 0!==t?t:b.Bm.in}else{if(!(await w()).success)throw new Error("Unable to opt user out of marketing");e=b.Bm.out}l(n),s(e),f(e),e===b.Bm.pending_confirmation?L("info",_.never):L("success")}catch(a){L("critical"),i(o)}finally{m(!1)}},children:[(0,a.jsxs)("section",{className:A().emailSettingsItem,children:[(0,a.jsxs)("label",{className:A().emailSettingsItemDescription,htmlFor:"accountUpdatesToggle",children:[(0,a.jsx)(g.Z,{variant:"body",gutterBottom:!0,weight:"medium",children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/accountupdates"})}),(0,a.jsx)(g.Z,{children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/accountupdatesdetails"})})]}),(0,a.jsx)(E.Z,{checked:!0,disabled:!0,id:"accountUpdatesToggle"})]}),(0,a.jsxs)("section",{className:A().emailSettingsItem,children:[(0,a.jsxs)("label",{className:A().emailSettingsItemDescription,htmlFor:"latestNewsToggle",children:[(0,a.jsx)(g.Z,{variant:"body",gutterBottom:!0,weight:"medium",children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/latestnews"})}),(0,a.jsx)(g.Z,{children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/latestnewsdetails"})})]}),(0,a.jsx)(E.Z,{checked:n,onChange:()=>{i(!n),D()},id:"latestNewsToggle"})]}),"success"===k?(0,a.jsx)(y.w,{appearance:"success",hideIcon:!0,className:A().notificationMessage,children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/successmessage"})}):"critical"===k?(0,a.jsx)(y.w,{appearance:"warning",hideIcon:!0,className:A().notificationMessage,children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/errormessage"})}):"info"===k?(0,a.jsx)(y.w,{appearance:"info",hideIcon:!0,className:A().notificationMessage,children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/marketingoptinconfirmationpending"})}):null,x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.i,{className:A().emailSettingsLine}),(0,a.jsx)(S.Sn,{type:"submit",kind:"primary",name:"change-email-settings",className:A().changeEmailSettingsButton,isBusy:c,children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/save"})})]}):null]})]})};var D=s(74937);const O=e=>{const[t,s]=r.useState(e.invitations),[n,i]=r.useState(t),[o,l]=r.useState(!1),c=t!==n,[p,m]=I(),[x,f]=I(),h=N("invitations"),{fetch:_}=(0,D.i)();return(0,a.jsx)(d.Zb,{id:"review-invitation-settings",className:A().emailSettings,children:(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{if(!(await _("/api/businessunitprofile/consumer/email/invitations",{method:"POST",body:JSON.stringify({subscribe:n===b.Bm.in})})).ok)throw new Error("Unable to ".concat(n===b.Bm.in?"subscribe user for review invitations":"unsubscribe user from review invitations"));s(n),h(n),m()}catch(a){f(),i(t)}finally{l(!1)}},children:[(0,a.jsxs)("section",{className:A().emailSettingsItem,children:[(0,a.jsxs)("label",{className:A().emailSettingsItemDescription,htmlFor:"reviewInvitationsToggle",children:[(0,a.jsx)(g.Z,{variant:"h3",as:"h2",weight:"medium",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/reviewinvitations"})}),(0,a.jsx)(g.Z,{children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/reviewinvitationsdetailsv2"})})]}),(0,a.jsx)(E.Z,{checked:"in"===n,onChange:()=>i(n===b.Bm.in?b.Bm.out:b.Bm.in),id:"reviewInvitationsToggle"})]}),c?(0,a.jsx)(S.Sn,{type:"submit",kind:"primary",name:"change-email-settings",className:A().changeEmailSettingsButton,isBusy:o,children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/save"})}):null,!c&&p?(0,a.jsx)(y.w,{appearance:"success",hideIcon:!0,className:A().notificationMessage,children:t===b.Bm.in?(0,a.jsx)(u.x,{id:"user-settings-page/notifications/invitation/successmessage/in"}):(0,a.jsx)(u.x,{id:"user-settings-page/notifications/invitation/successmessage/out"})}):null,!c&&x?(0,a.jsx)(y.w,{appearance:"warning",hideIcon:!0,className:A().notificationMessage,children:(0,a.jsx)(u.x,{id:"user-settings-page/notifications/errormessage"})}):null]})})};var P=s(86086),U=s.n(P);const T=()=>{const{logOut:e}=(0,l.xO)(),{fetch:t}=(0,D.i)();return(0,a.jsxs)(d.Zb,{className:U().wrapper,children:[(0,a.jsx)(g.Z,{variant:"h3",as:"h2",weight:"medium",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/logoutofalldevices/header"})}),(0,a.jsx)(g.Z,{variant:"body",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/logoutofalldevices/body"})}),(0,a.jsx)(S.Sn,{className:U().button,onClick:async()=>{try{await t("/api/businessunitprofile/users/logout-from-all-devices",{method:"POST"})}catch(s){}e()},name:"Logout All Devices",trackingProps:{name:"Logout of all devices",action:"Logout of all devices"},children:(0,a.jsx)(u.x,{id:"user-settings-page/logoutofalldevices/button"})})]})};var M=s(44741),B=s(58507);const Z=e=>{let{status:t,className:s,statusMap:i,name:r}=e;return t?(0,a.jsx)(a.Fragment,{children:(Array.isArray(t)?t:[t]).map((e=>{const{appearance:t,text:o}=i[e];return(0,a.jsx)(y.w,{appearance:t,hideIcon:!0,name:r,className:s,children:(0,a.jsx)(u.x,(0,n.Z)({},o))},e)}))}):null};var R;!function(e){e.SUBMIT_SUCCESS="SUBMIT_SUCCESS",e.INVALID_OLD_PASSWORD="INVALID_OLD_PASSWORD",e.INVALID_NEW_PASSWORD="INVALID_NEW_PASSWORD",e.PASSWORD_MISMATCH="PASSWORD_MISMATCH",e.PASSWORD_TOO_SHORT="PASSWORD_TOO_SHORT"}(R||(R={}));const G={[R.SUBMIT_SUCCESS]:{appearance:"success",text:{id:"user-settings-page/changepass/notifications/pass-changed"}},[R.INVALID_OLD_PASSWORD]:{appearance:"warning",text:{id:"user-settings-page/changepass/notifications/invalid-old-password"}},[R.INVALID_NEW_PASSWORD]:{appearance:"warning",text:{id:"user-settings-page/changepass/notifications/invalid-new-password"}},[R.PASSWORD_MISMATCH]:{appearance:"warning",text:{id:"user-settings-page/changepass/notifications/password-mismatch"}},[R.PASSWORD_TOO_SHORT]:{appearance:"warning",text:{id:"user-settings-page/changepass/notifications/password-too-short",interpolations:{NUMBER:8}}}},V=async(e,t,s,n)=>async function(e){if(!e.ok){if(400===e.status)try{const t=JSON.parse(await e.json());if(t.length){return W.filter((e=>t.some((t=>t.ErrorCode===e.errorCode)))).map((e=>{let{status:t}=e;return t}))}}catch(t){}(0,m.hK)(e.status)}return[]}(await e("/api/businessunitprofile/users/save-password",{method:"POST",body:JSON.stringify({oldPassword:t,newPassword:s,newPasswordConfirmation:n})})),W=[{errorCode:"consumerUpdatePasswordOldPasswordNotCorrect_error",status:R.INVALID_OLD_PASSWORD}];var F=s(68709),K=s.n(F);const H=e=>{let{consumerId:t}=e;const{fetch:s}=(0,D.i)(),[n,i]=r.useState(!1),[o,l]=r.useState(),{oldPassword:c,newPassword:p,confirmPassword:m,validate:x}=(()=>{const[e,t]=r.useState(""),[s,n]=r.useState(!1),[i,a]=r.useState(""),[o,l]=r.useState(!1),[c,u]=r.useState(""),[d,g]=r.useState(!1);return{oldPassword:{value:e,set:e=>{n(!1),t(e)},error:s,onError:()=>n(!0)},newPassword:{value:i,set:e=>{l(!1),a(e)},error:o},confirmPassword:{value:c,set:e=>{g(!1),u(e)},error:d},validate:()=>{const t=[];return e&&0!==e.trim().length||(n(!0),t.push(R.INVALID_OLD_PASSWORD)),i&&0!==i.trim().length?i.length<8&&(l(!0),t.push(R.PASSWORD_TOO_SHORT)):(l(!0),t.push(R.INVALID_NEW_PASSWORD)),c!==i&&(g(!0),t.push(R.PASSWORD_MISMATCH)),t}}})();return(0,a.jsxs)(d.Zb,{className:K().wrapper,children:[(0,a.jsx)(g.Z,{variant:"h3",as:"h2",weight:"medium",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/changepass/header"})}),(0,a.jsx)(Z,{status:o,className:K().statusBanner,statusMap:G,name:"Password update"}),(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0);const t=x();t.length?l(t):await async function(){l(null);try{const e=await V(s,c.value,p.value,m.value);e.length?(l(e),e.includes(R.INVALID_OLD_PASSWORD)&&c.onError()):l(R.SUBMIT_SUCCESS)}catch(e){}}(),i(!1)},className:K().form,children:[(0,a.jsx)(M._,{className:K().label,gutterBottom:!0,htmlFor:"email",children:(0,a.jsx)(u.x,{id:"user-settings-page/changepass/oldpassword"})}),(0,a.jsx)(B.oi,{type:"password",value:c.value,onChange:e=>c.set(e.target.value),isInvalid:c.error,name:"oldPassword",id:"oldPassword"}),(0,a.jsx)(M._,{className:K().label,gutterBottom:!0,htmlFor:"newPassword",children:(0,a.jsx)(u.x,{id:"user-settings-page/changepass/newpassword"})}),(0,a.jsx)(B.oi,{type:"password",value:p.value,onChange:e=>p.set(e.target.value),isInvalid:p.error,name:"newPassword",id:"newPassword"}),(0,a.jsx)(M._,{className:K().label,gutterBottom:!0,htmlFor:"confirmPassword",children:(0,a.jsx)(u.x,{id:"user-settings-page/changepass/newpasswordagain"})}),(0,a.jsx)(B.oi,{type:"password",value:m.value,onChange:e=>m.set(e.target.value),isInvalid:m.error,name:"confirmPassword",id:"confirmPassword"}),(0,a.jsx)(S.Sn,{type:"submit",kind:"primary",name:"change-password-submit",isBusy:n,className:K().submit,children:(0,a.jsx)(u.x,{id:"user-settings-page/changepass/submit"})})]})]})};var z,$=s(22384);s(49704),s(83454);!function(e){e.google="google",e.password="password",e.invitation="invitation"}(z||(z={}));var J=s(13899),X=s(31611),Q=s(36229),Y=s.n(Q);var q=()=>{const{reload:e}=(0,l.xO)(),{fetch:t}=(0,D.i)();return(0,a.jsx)(J.Q,{name:"disconnect-facebook",onClick:async()=>{try{const s=await t("/api/businessunitprofile/users/disconnect-from-facebook",{method:"POST"});(0,m.hK)(null===s||void 0===s?void 0:s.status),await e(),window.location.reload()}catch(s){X.Z.error("Could not disconnect from Facebook: ",s)}},className:Y().disconnectFacebook,children:(0,a.jsx)(u.x,{id:"user-settings-page/socialsettings/disconnect"})})},ee=s(80891),te=s(11752),se=s(91317);const{publicRuntimeConfig:{googleClientId:ne}}=(0,te.default)();var ie=()=>{const[,e]=(0,o.T)(),{fetch:t}=(0,D.i)(),s=r.useCallback((async()=>{try{const e=await t("/api/businessunitprofile/users/disconnect-from-google",{method:"POST"});(0,m.hK)(null===e||void 0===e?void 0:e.status),window.location.reload()}catch(e){X.Z.error("Could not disconnect from Google: ",e)}}),[]),{isLoaded:n,isLoggedIn:i}=(0,l.xO)();return n&&i?(0,a.jsx)(ee._,{translations:se.Z[e],locale:e,children:(0,a.jsx)(l.e6,{googleClientId:ne,onDisconnected:s})}):null},ae=s(74802),re=s.n(ae);const oe=e=>{let{identity:t}=e;const{consumer:s}=(0,l.xO)();return(0,a.jsxs)(d.Zb,{className:re().wrapper,children:[(0,a.jsx)(g.Z,{variant:"h3",as:"h2",weight:"medium",children:(0,a.jsx)(u.x,{id:"user-settings-page/socialsettings/title"})}),(null===s||void 0===s?void 0:s.hasFacebook)?(0,a.jsx)("div",{children:(0,a.jsx)(q,{})}):(0,a.jsx)($.Z,{accessToken:t.accessToken}),t.authenticationSource===z.google&&(0,a.jsx)("div",{children:(0,a.jsx)(ie,{})})]})};var le=s(68578),ce=s(64510),ue=s.n(ce);const de=e=>{let{onClose:t,isOpen:s}=e;const{consumer:n}=(0,l.xO)(),{fetch:i}=(0,D.i)(),[o,c]=r.useState(""),[d,p]=r.useState(!1),[x,f]=r.useState(!1);return(0,a.jsxs)(le.u_,{name:"Delete User",onClose:t,isOpen:s,children:[(0,a.jsx)(le.xB,{children:(0,a.jsx)(u.x,{id:"user-settings-page/deletemodal/header"})}),(0,a.jsxs)(le.hz,{children:[(0,a.jsx)(g.Z,{variant:"body",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/deletemodal/paragraph"})}),(0,a.jsx)(g.Z,{variant:"body",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/deletemodal/confirm"})}),(0,a.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o.toLocaleLowerCase()===(null===n||void 0===n?void 0:n.email.toLocaleLowerCase())){p(!1),f(!0);try{const e=await i("/api/businessunitprofile/users",{method:"DELETE"});(0,m.hK)(e.status),200===e.status&&(window.location.href="".concat((0,m.XF)(),"/"))}catch(t){f(!1)}}else p(!0)},className:ue().form,children:[(0,a.jsx)(B.oi,{name:"Delete User Email",value:o,onChange:e=>{c(e.target.value),p(!1)},type:"email",isInvalid:d}),(0,a.jsx)(S.Sn,{name:"Delete Profile Confirm",type:"submit",trackingProps:{action:"Delete profile confirm",name:"delete-profile-confirm"},isBusy:x,className:ue().button,kind:"primary",children:(0,a.jsx)(u.x,{id:"user-settings-page/deletemodal/button/delete"})})]})]})]})},ge=()=>{const[e,t]=r.useState(!1);return(0,a.jsxs)(d.Zb,{className:ue().wrapper,children:[(0,a.jsx)(g.Z,{variant:"h3",as:"h2",weight:"medium",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/deleteuser"})}),(0,a.jsx)(g.Z,{variant:"body",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/deleteusertext"})}),(0,a.jsx)(S.Sn,{className:ue().button,onClick:()=>t(!0),name:"deleteprofile",trackingProps:{name:"delete-my-profile",action:"Open delete user modal"},children:(0,a.jsx)(u.x,{id:"user-settings-page/deletemyuser"})}),(0,a.jsx)(de,{onClose:()=>t(!1),isOpen:e})]})};var pe;!function(e){e.NAME_LENGTH="NAME_LENGTH",e.NAME_DIGITS="NAME_DIGITS",e.NAME_INVALID="NAME_INVALID",e.NAME_EMAIL="NAME_EMAIL",e.IMAGE_INVALID="IMAGE_INVALID",e.IMAGE_SMALL="IMAGE_SMALL",e.IMAGE_LARGE="IMAGE_LARGE",e.IMAGE_UPLOAD_FAILED="IMAGE_UPLOAD_FAILED",e.IMAGE_UPLOAD_SUCCESS="IMAGE_UPLOAD_SUCCESS",e.IMAGE_DELETE_SUCCESS="IMAGE_DELETE_SUCCESS",e.SUBMIT_SUCCESS="SUBMIT_SUCCESS",e.COUNTRY_REQUIRED="COUNTRY_REQUIRED",e.LANGUAGE_REQUIRED="LANGUAGE_REQUIRED"}(pe||(pe={}));const me={[pe.NAME_LENGTH]:{appearance:"warning",text:{id:"user-settings-page/personalinfo/nameerror2",interpolations:{"MIN-LENGTH":2,"MAX-LENGTH":30}}},[pe.NAME_DIGITS]:{appearance:"warning",text:{id:"user-settings-page/personalinfo/digitsindisplayname"}},[pe.NAME_INVALID]:{appearance:"warning",text:{id:"user-settings-page/personalinfo/invalidcharactersindisplayname"}},[pe.NAME_EMAIL]:{appearance:"warning",text:{id:"user-settings-page/personalinfo/emailindisplayname"}},[pe.IMAGE_INVALID]:{appearance:"warning",text:{id:"user-settings-page/profileimageerror/notanimage"}},[pe.IMAGE_SMALL]:{appearance:"warning",text:{id:"user-settings-page/profileimageerror/imagetoosmall"}},[pe.IMAGE_LARGE]:{appearance:"warning",text:{id:"user-settings-page/profileimageerror/imagetoolarge"}},[pe.IMAGE_UPLOAD_FAILED]:{appearance:"critical",text:{id:"user-settings-page/profileimageerror/uploadimagefailed"}},[pe.IMAGE_UPLOAD_SUCCESS]:{appearance:"success",text:{id:"user-settings-page/profileimageupdated"}},[pe.IMAGE_DELETE_SUCCESS]:{appearance:"success",text:{id:"user-settings-page/profileimagedeleted"}},[pe.SUBMIT_SUCCESS]:{appearance:"success",text:{id:"user-settings-page/personalinfo/successmessage"}},[pe.COUNTRY_REQUIRED]:{appearance:"warning",text:{id:"user-settings-page/personalinfo/countryempty"}},[pe.LANGUAGE_REQUIRED]:{appearance:"warning",text:{id:"user-settings-page/personalinfo/languageempty"}}};var xe=s(11163),fe=s(43358),he=s(5250),_e=s(42344);const ve=e=>{let{isOpen:t,onClose:s,country:n,onValidate:i}=e;const[o,l]=r.useState(!1),{fetch:c}=(0,D.i)(),d=(0,_e.n)(),{locale:p}=r.useContext(w.AppContext),[x,f]=r.useState(!1);return(0,a.jsxs)(le.u_,{isOpen:t,onClose:s,name:"country-selected",children:[(0,a.jsx)(le.xB,{children:(0,a.jsx)(u.x,{id:"user-settings-page/countryselectedmodal/headline"})}),(0,a.jsxs)(le.hz,{children:[(0,a.jsx)(g.Z,{variant:"body",gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/countryselectedmodal/body",interpolations:{REGION:n.displayName}})}),(0,a.jsx)(ee._,{translations:se.Z[p],locale:p,children:(0,a.jsx)(he.R,{name:"country-selected",checked:o,onChange:e=>l(e.target.checked),legalUrls:d})})]}),(0,a.jsxs)(le.mz,{children:[(0,a.jsx)(S.Sn,{name:"country-selected-save",kind:"primary",onClick:async()=>{if(o){f(!0);try{await(async(e,t)=>{const s=await e("/api/businessunitprofile/users/accept-terms-for-country",{method:"POST",body:JSON.stringify({countryCode:t})});s.ok||(0,m.hK)(s.status)})(c,n.code),await i(),f(!1),s()}catch(e){f(!1),s()}}},isBusy:x,disabled:!o,children:(0,a.jsx)(u.x,{id:"user-settings-page/countryselectedmodal/save"})}),(0,a.jsx)(S.Sn,{name:"country-selected-cancel",onClick:s,children:(0,a.jsx)(u.x,{id:"user-settings-page/countryselectedmodal/cancel"})})]})]})};function ye(e){const t=[];return((e=null===e||void 0===e?void 0:e.trim()).length<2||e.length>30)&&t.push(pe.NAME_LENGTH),e.match(/\d+/)&&t.push(pe.NAME_DIGITS),e.match(/\w+[\w-+.']*@\w+[\w-.]*\.\w+[\w-.]*/gim)&&t.push(pe.NAME_EMAIL),e.match(/(&#|<[!/?a-z]|<(.|\n)*?>)/i)&&t.push(pe.NAME_INVALID),t}const Se=(e,t)=>t.map((e=>{let{code:t}=e;return t})).includes(e);var je=s(99534),be=s(6338),we=s.n(be);const Ne=e=>{var{options:t,isInvalid:s,className:r}=e,o=(0,je.Z)(e,["options","isInvalid","className"]);return(0,a.jsx)("select",(0,i.Z)((0,n.Z)({},o),{className:(0,m.AK)(we().select,s&&we().invalid,r),children:t.map((e=>{let{label:t,value:s,disabled:n}=e;return(0,a.jsx)("option",{value:s,disabled:n,children:t},s)}))}))};var Ie=s(55616),Ce=s.n(Ie);const Ee=e=>{let{consumer:t,countries:s,languages:i,setStatus:c}=e;var d;const{update:p}=(0,l.xO)(),{push:x,asPath:f}=(0,xe.useRouter)(),{fetch:h}=(0,D.i)(),{track:_}=r.useContext(w.AppContext),[v]=(0,o.T)(),{displayName:y,country:j,language:b,submit:N,isValidating:I}=((e,t,s,i,a)=>{const[o,l]=r.useState(e.displayName),[c,u]=r.useState(!1),[d,g]=r.useState((()=>Se(e.country,s)?e.country:"")),[p,m]=r.useState(!1),[x,f]=r.useState((()=>Se(e.language,t)?e.language:"")),[h,_]=r.useState(!1),[v,y]=r.useState(!1);return{displayName:{value:o,set:e=>{u(!1),l(e)},error:c},country:{value:d,set:e=>{m(!1),g(e)},error:p},language:{value:x,set:e=>{_(!1),f(e)},error:h},submit:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,n.Z)({displayName:o,country:d,language:x},e);if(c||p||h)return;i(null),y(!0);let s=[];const r=ye(t.displayName);if(r.length&&(u(!0),s=[...s,...r]),t.country||(m(!0),s=[...s,pe.COUNTRY_REQUIRED]),t.language||(_(!0),s=[...s,pe.LANGUAGE_REQUIRED]),s.length)return i(s),void y(!1);try{await a(t),i(pe.SUBMIT_SUCCESS),y(!1)}catch(l){y(!1)}},isValidating:v}})({displayName:t.displayName,country:t.country,language:t.locale},i,s,c,(async e=>{const{localeUpdated:s,localeSpecificUrl:n}=await(async(e,t)=>{const s=await e("/api/businessunitprofile/users/save-personal-settings",{method:"POST",body:JSON.stringify(t)});return s.ok||(0,m.hK)(s.status),await s.json()})(h,{displayName:e.displayName,country:e.country,consumerId:t.id,locale:e.language});p({displayName:e.displayName,country:e.country}),c(pe.SUBMIT_SUCCESS),s&&x(n+f.split("?")[0]),_("Settings Saved",{userProfileSettings:{}})})),[C,E]=r.useState(t.country),[k,A]=r.useState(!1);var L;return(0,a.jsxs)("form",{className:Ce().form,onSubmit:e=>{e.preventDefault(),N()},children:[(0,a.jsx)(M._,{className:Ce().label,gutterBottom:!0,htmlFor:"email",children:(0,a.jsx)(u.x,{id:"user-settings-page/personalinfo/email"})}),(0,a.jsx)(B.oi,{type:"email",readonly:!0,value:t.email,name:"email",id:"email"}),(0,a.jsxs)(M._,{className:Ce().label,htmlFor:"displayName",gutterBottom:!0,children:[(0,a.jsx)(u.x,{id:"user-settings-page/personalinfo/name"}),"*"]}),(0,a.jsx)(B.oi,{type:"text",name:"displayName",id:"displayName",value:y.value,onChange:e=>y.set(e.target.value),isInvalid:y.error}),(0,a.jsxs)(M._,{className:Ce().label,gutterBottom:!0,htmlFor:"country",children:[(0,a.jsx)(u.x,{id:"user-settings-page/personalinfo/country"}),"*"]}),(0,a.jsx)(fe.p,{className:Ce().tooltipWrapper,tooltipText:(0,a.jsx)(g.Z,{color:"gray-7",children:(0,a.jsx)(u.x,{id:"user-settings-page/tooltip"})})}),(0,a.jsx)(Ne,{id:"country",name:"country",value:j.value,onChange:e=>{E(e.target.value),A(!0)},isInvalid:j.error,options:[{value:"",label:v["user-settings-page/choosecountry"],disabled:!0},...s.map((e=>{let{code:t,displayName:s}=e;return{value:t,label:s}}))]}),(0,a.jsx)(ve,{country:{code:C,displayName:null!==(L=null===(d=s.find((e=>e.code===C)))||void 0===d?void 0:d.displayName)&&void 0!==L?L:C},onClose:()=>A(!1),isOpen:k,onValidate:async()=>{j.set(C);try{await N({country:C}),c(pe.SUBMIT_SUCCESS)}catch(e){}}},C),(0,a.jsxs)(M._,{className:Ce().label,gutterBottom:!0,htmlFor:"language",children:[(0,a.jsx)(u.x,{id:"user-settings-page/personalinfo/language"}),"*"]}),(0,a.jsx)(fe.p,{className:Ce().tooltipWrapper,tooltipText:(0,a.jsx)(g.Z,{color:"gray-7",children:(0,a.jsx)(u.x,{id:"user-settings-page/tooltip"})})}),(0,a.jsx)(Ne,{id:"language",name:"language",value:b.value,onChange:e=>b.set(e.target.value),isInvalid:b.error,options:[{value:"",label:v["user-settings-page/chooselanguage"],disabled:!0},...i.filter((e=>{let{code:t}=e;return"ru-ru"!==t.toLowerCase()})).map((e=>{let{code:t,displayName:s}=e;return{value:t,label:s}}))]}),(0,a.jsx)(g.Z,{className:Ce().label,gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/legend"})}),(0,a.jsx)(S.Sn,{name:"personal-settings-submit",kind:"primary",type:"submit",isBusy:I,className:Ce().submit,children:(0,a.jsx)(u.x,{id:"user-settings-page/saveinfo"})})]})};var ke=s(21159),Ae=s(66472),Le=s.n(Ae);const De=e=>{let{consumer:{hasImage:t},setStatus:s}=e;const[n]=(0,o.T)(),[i,c]=r.useState(!1),[d,g]=r.useState(!1),[p,m]=r.useState(t),x=r.useRef(null),{track:f}=r.useContext(w.AppContext),{reload:h}=(0,l.xO)(),{updateProfilePicture:_,deleteProfilePicture:v}=(0,ke.L)();return(0,a.jsxs)("form",{className:Le().wrapper,children:[(0,a.jsx)(M._,{htmlFor:"profile-picture-input",className:Le().label,gutterBottom:!0,children:(0,a.jsx)(u.x,{id:"user-settings-page/profileimage"})}),(0,a.jsx)("input",{ref:x,type:"file",id:"ImageUpload",className:Le().imageupload,name:"imageUpload",title:n["user-settings-page/uploadimage"],accept:"image/*",onChange:async e=>{s(null);const t=e.target.files[0],n=(e=>{if(!["image/jpeg","image/png"].includes(e.type))return pe.IMAGE_INVALID;if(e.size>5242880)return pe.IMAGE_LARGE;const t=new Image;return t.src=URL.createObjectURL(e),t.onload=()=>{if(URL.revokeObjectURL(t.src),t.width<73||t.height<73)return pe.IMAGE_SMALL},null})(t);if(null!==t)if(null===n){c(!0);try{await _(t),f("ConsumerProfileImageUploaded"),m(!0),s(pe.IMAGE_UPLOAD_SUCCESS),h()}catch(i){e.target.value="",s(pe.IMAGE_UPLOAD_FAILED)}c(!1)}else s(n);e.target.value=""}}),(0,a.jsxs)("div",{className:Le().buttons,children:[(0,a.jsx)(S.Sn,{className:Le().button,name:"upload-profile-image",kind:"primary",onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},isBusy:i,trackingProps:{name:"upload-profile-image",action:"Upload Consumer Profile Image"},children:(0,a.jsx)(u.x,{id:t?"user-settings-page/uploadnewimage":"user-settings-page/uploadimage"})}),p?(0,a.jsx)(S.Sn,{className:Le().button,name:"delete-profile-image",kind:"secondary",isBusy:d,onClick:async()=>{if(s(null),confirm(n["user-settings-page/confirmdeleteimage"])){g(!0);try{await v(),s(pe.IMAGE_DELETE_SUCCESS),g(!1),m(!1),h()}catch(e){}g(!1)}},trackingProps:{name:"delete-profile-image",action:"Delete Consumer Profile Image"},children:(0,a.jsx)(u.x,{id:"user-settings-page/deleteimage"})}):null]})]})};var Oe=s(25983),Pe=s.n(Oe);const Ue=e=>{let{consumer:t,countries:s,languages:n}=e;const i=!!t.profilePictureUrl&&!t.profilePictureUrl.includes("default"),[o,l]=r.useState();return(0,a.jsxs)(d.Zb,{className:Pe().wrapper,children:[(0,a.jsx)(g.Z,{variant:"h3",as:"h2",weight:"medium",gutterBottom:!0,name:"Personal settings",children:(0,a.jsx)(u.x,{id:"user-settings-page/personalinfo/header"})}),(0,a.jsx)(Z,{status:o,className:Pe().statusBanner,statusMap:me,name:"Personal settings"}),(0,a.jsx)(De,{consumer:{hasImage:i},setStatus:l}),(0,a.jsx)(Ee,{consumer:t,countries:s,languages:n,setStatus:l})]})};var Te=s(81674),Me=s(13424),Be=s(32649),Ze=s(34859),Re=s(43327),Ge=s(55899),Ve=s.n(Ge);var We=!0,Fe=e=>{let{consumer:t,consumerStatistics:s,identity:r,verificationStatus:u,countries:d,languages:g,emailSettings:p,legalSiteUrl:m}=e;const[x]=(0,o.T)(),f=(0,Te.hz)("consumer-site-consumer-verification"),{showTransparencyReportLink:_}=(0,Re._)(),v=x["user-settings-page/title"],{consumer:y}=(0,l.xO)();var S,j,w;y&&(y.country=null===(S=d.find((e=>e.code===y.country)))||void 0===S?void 0:S.displayName);const N=(0,i.Z)((0,n.Z)({},t,y),{country:(I=null!==(j=null===y||void 0===y?void 0:y.country)&&void 0!==j?j:t.country,C=d,C.find((e=>e.code===I||e.displayName===I))),profilePicture:null!==(w=null===y||void 0===y?void 0:y.imageUrl.large)&&void 0!==w?w:t.profilePicture});var I,C;const E=f&&u===b.$Z.notverified,k=[b.$Z.failed].includes(u)?f:u!==b.$Z.notverified;return(0,a.jsxs)(c.Z,{footerProps:{showTransparencyReportLink:_},hideCountryBanner:!0,pageName:"Current Consumer Settings",children:[(0,a.jsx)(Me.Z,{page:"user-settings-page",title:v,noIndex:!0}),(0,a.jsx)(Be.Z,{consumerId:N.id,displayName:N.displayName,profilePictureUrl:N.profilePicture,country:N.country.displayName,reviewsStats:s,isCurrentUser:!0,isVerified:N.verified}),(0,a.jsx)("div",{className:Ve().container,children:(0,a.jsxs)("div",{className:Ve().content,children:[(0,a.jsxs)("div",{className:Ve().cards,children:[E&&(0,a.jsx)(Ze.Z,{status:u,consumerId:N.id}),(0,a.jsx)(Ue,{consumer:{id:N.id,profilePictureUrl:N.profilePicture,email:N.email,displayName:N.displayName,country:N.country.code,locale:N.locale},countries:d,languages:g}),(0,a.jsx)("div",{className:Ve().mobile,children:(0,a.jsx)(oe,{identity:r})}),k&&(0,a.jsx)(Ze.Z,{status:u,consumerId:N.id}),(0,a.jsx)(L,{broadMarketing:p.broadMarketing,doubleOptInConfirmationStatus:p.doubleOptInConfirmationStatus,legalSiteUrl:m}),(0,a.jsx)(O,{invitations:p.invitations}),r.authenticationSource===z.password&&(0,a.jsx)(H,{consumerId:N.id}),(0,a.jsx)(h,{}),(0,a.jsx)(T,{}),(0,a.jsx)(ge,{})]}),(0,a.jsx)("div",{className:Ve().sideColumnDesktop,children:(0,a.jsx)(oe,{identity:r})})]})})]})}},3620:function(e,t,s){"use strict";var n,i,a,r;s.d(t,{$Z:function(){return i},Bm:function(){return a},LN:function(){return r}}),function(e){e.filtered="filtered",e.reported="reported",e.pending="pending",e.active="active"}(n||(n={})),function(e){e.verified="verified",e.notverified="not_verified",e.submitted="submitted",e.failed="failed"}(i||(i={})),function(e){e.in="in",e.out="out",e.undecided="undecided",e.pending_confirmation="pending_confirmation"}(a||(a={})),function(e){e.confirmed="confirmed",e.failed="failed",e.not_checked="not_checked"}(r||(r={}))},16793:function(e,t,s){"use strict";s.d(t,{o:function(){return n}});class n extends Error{constructor(e){super("".concat(e.status,": ").concat(e.statusText)),this.response=e,Object.setPrototypeOf(this,n.prototype)}}},91868:function(e,t,s){"use strict";s.d(t,{$:function(){return i}});const n={broadmarketing:4},i=e=>({name:e,version:n[e],translationKey:"legaltext/".concat(e,"/v").concat(n[e])})},44920:function(e,t,s){"use strict";s.d(t,{b:function(){return i}});class n{clear(){this.dataStorage={}}getItem(e){return this.dataStorage[e]||null}key(e){return Object.keys(this.dataStorage)[e]}removeItem(e){delete this.dataStorage[e]}setItem(e,t){this.dataStorage[e]=t}get length(){return Object.keys(this.dataStorage).length}constructor(){this.dataStorage={}}}const i=(a=window.localStorage)&&function(e){const t=(new Date).toString();let s;try{return e.setItem(t,t),s=e.getItem(t)===t,e.removeItem(t),!(!s||!e)}catch(n){return!1}}(a)?a:new n;var a},25466:function(e){e.exports={wrapper:"styles_wrapper__SmADX",button:"styles_button__DUozD"}},70395:function(e){e.exports={emailSettings:"styles_emailSettings__k6DOB",emailSettingsLine:"styles_emailSettingsLine__0mCyR",emailSettingsItem:"styles_emailSettingsItem__8At7_",notificationMessage:"styles_notificationMessage__xYrM0",emailSettingsItemDescription:"styles_emailSettingsItemDescription__0HSZk",changeEmailSettingsButton:"styles_changeEmailSettingsButton__Is_Fx"}},92429:function(e){e.exports={toggleLabel:"styles_toggleLabel__pgPOr",toggleLabelDisabled:"styles_toggleLabelDisabled__NvD0R",toggleInput:"styles_toggleInput__x2sLy",toggleInputChecked:"styles_toggleInputChecked__HWsUY",toggleStatus:"styles_toggleStatus__M_XlM",toggleStatusChecked:"styles_toggleStatusChecked__5kNZb",toggleStatusDisabled:"styles_toggleStatusDisabled__prJyW",toggleSlider:"styles_toggleSlider__Hj3cX",toggleSliderChecked:"styles_toggleSliderChecked__EvdCT"}},86086:function(e){e.exports={wrapper:"styles_wrapper__R3GTn",button:"styles_button__LbWyY"}},68709:function(e){e.exports={wrapper:"styles_wrapper__G76uv",statusBanner:"styles_statusBanner__747_J",form:"styles_form__p_Zal",label:"styles_label__3OSgU",submit:"styles_submit__8KgYx"}},36229:function(e){e.exports={disconnectFacebook:"styles_disconnectFacebook__IAnwE"}},74802:function(e){e.exports={wrapper:"styles_wrapper__BM7u6"}},64510:function(e){e.exports={wrapper:"styles_wrapper__LlJjR",button:"styles_button__s25UF",form:"styles_form__6SmGv"}},6338:function(e){e.exports={textInput:"styles_textInput__2QNi8",select:"styles_select__tnCJC",invalid:"styles_invalid__C2uvv"}},55616:function(e){e.exports={form:"styles_form__cZ7Un",label:"styles_label__RJ_Fx",tooltipWrapper:"styles_tooltipWrapper__4Wj61",submit:"styles_submit__3QpUl"}},66472:function(e){e.exports={wrapper:"styles_wrapper__saRuQ",label:"styles_label__X9FNT",imageupload:"styles_imageupload__1RgKb",buttons:"styles_buttons__oNsaG",button:"styles_button__EWzIL"}},25983:function(e){e.exports={wrapper:"styles_wrapper__PUTsX",statusBanner:"styles_statusBanner__YI_Pw"}},99485:function(e){e.exports={btnWrapper:"styles_btnWrapper__L65L_",badge:"styles_badge__HIkjq",link:"styles_link__0oSo8"}},46692:function(e){e.exports={cardWrapper:"styles_cardWrapper__D9rmB",statusIcon:"styles_statusIcon__IFOMi",loading:"styles_loading__rKR5W","loading-state":"styles_loading-state__zt_Ux",content:"styles_content__lsCg1",image:"styles_image__xJ2PN",paragraph:"styles_paragraph__OigM1",link:"styles_link__sv3Xf",buttons:"styles_buttons__QX3V0",button:"styles_button__Vi9fL",consumerVerificationStart:"styles_consumerVerificationStart__dguVY",alert:"styles_alert__nCDSv"}},55899:function(e){e.exports={container:"styles_container__qqu0U",content:"styles_content__cmTLq",sideColumnDesktop:"styles_sideColumnDesktop__zUAuq",cards:"styles_cards__6N5F9",mobile:"styles_mobile__sGPzS"}}},function(e){e.O(0,[3714,303,1664,6748,7455,5737,1261,5806,1316,9774,2888,179],(function(){return t=35551,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=settings-b88e34749e1ca80e.js.map