/* Version=6.58.2,Timestamp=2022-05-26T20:31:38.780Z */define("content-panel",["d2-content-panel"],function(){"use strict";return IEA.module("UI.content-panel",function(n,e,t){_.extend(n,{onInit:function(){$(".c-content-panel-popupView .o-modal").click(function(e){($(e.target).is(".o-modal-content")||$(e.target).is(".o-modal"))&&n._closeContentPanel()})},_contentPanelInit:function(){var e=this,n=e.modelData&&e.modelData.style&&e.modelData.style.class;if(void 0!==n?-1<n.indexOf("show-from-next-page"):n){n=sessionStorage.getItem("com.adobe.reactor.core.visitorTracking.pagesViewed");if(null!==n&&Number.parseInt(n)<2)return}setTimeout(function(){e._openContentPanel()},1e3*e.modelData.showAfter)}})})}),define("d2-content-panel",["animService","commonService"],function(){"use strict";return IEA.module("UI.content-panel",function(e,n,t){var o,a,i,l=null,s=null;_.extend(e,{defaultSettings:{modalCl:".js-content-panel",excludePagesCl:".sign-up-page",contentPanel:".content-panel",globalNavigation:".global-navigation",hasGeoPopupCl:"has-geo-popup",contentPanelPopupCl:"content-panel-popup"},events:{"click .js-content-panel-close":"_closeContentPanel"},initialize:function(e){this._super(e),l=new IEA.animService,s=new IEA.commonService,this.triggerMethod("init")},render:function(){return this.$el.html(this.template(this.getModelJSON())),!1===this._isEnabled&&(this.enable(),this._isEnabled=!0),this.triggerMethod("render"),this},enable:function(){this.triggerMethod("beforEnable");var e=this;e.modelData=e.getModelJSON().contentPanel,e.panelViewType=e.modelData.componentVariation,e.contentPanel=e.defaultSettings.contentPanel,e.signupCookie=s.getCookie("CP_Panel_Signup"),e.couponCookie=s.getCookie("CouponDataId"),!e.modelData.displayComponent||$(".aem-AuthorLayer-Edit, .aem-AuthorLayer-Preview").length||e.couponCookie&&(!e.couponCookie||e.couponCookie.length)||$("body").is(e.defaultSettings.excludePagesCl)||("popupView"===e.panelViewType&&(e.$el.appendTo("body"),$("#wrapper").find(e.contentPanel).remove()),e.signupCookie&&(!e.signupCookie||e.signupCookie.length)||s.getLocalStorageItem("sign-up-progressive_"+e.modelData.locale.trim())||e._contentPanelInit()),"popupView"===e.panelViewType&&this._setCurrentTabTarget(),$(".skip-to-content").focus(function(){$("body").hasClass("o-modal-open")&&e._setOverlayTabbing()}),this.triggerMethod("enable")},_contentPanelInit:function(){var e=this;setTimeout(function(){e._openContentPanel()},1e3*e.modelData.showAfter)},_openContentPanel:function(){var n,t=this,o=t.defaultSettings.modalCl,a=!!$(".wcmmode-edit").length;l.openOverlay(o,{onCompleteCallback:function(){$("body").addClass(t.defaultSettings.contentPanelPopupCl);var e=new Event("contentPanelOpen");document.dispatchEvent(e),"defaultView"!==t.panelViewType&&!a||($(".js-blur-bg").removeClass("u-blur-background"),$("body").removeClass("o-modal-open")),t.modelData.hideAfter&&(t.$el.find(o).hover(function(){clearTimeout(n)},function(){n=setTimeout(function(){t._closeContentPanel()},1e3*t.modelData.hideAfter)}),$(o+":hover").length<=0&&(n=setTimeout(function(){t._closeContentPanel()},1e3*t.modelData.hideAfter))),$(document).on("click","."+t.defaultSettings.contentPanelPopupCl,function(e){$(e.target).parents(t.defaultSettings.globalNavigation).hasClass(t.defaultSettings.hasGeoPopupCl)?e.preventDefault():$(e.target).parents(t.contentPanel).length||"popupView"!==t.panelViewType||t._closeContentPanel()}),$("body").hasClass("o-modal-open")&&t._setOverlayTabbing()}}),$(document).keyup(function(e){27===e.keyCode&&$("body").hasClass(t.defaultSettings.contentPanelPopupCl)&&t._closeContentPanel()})},_closeContentPanel:function(){var e=this;l.closeOverlay(e.defaultSettings.modalCl),$("body").removeClass(e.defaultSettings.contentPanelPopupCl),e.signupCookie&&(!e.signupCookie||e.signupCookie.length)||s._createCookie("CP_Panel_Signup","1"),i&&$(i).focus()},_setOverlayTabbing:function(){a&&a.off("keydown"),o&&o.off("keydown");var e=this.$el.find(".js-content-panel").find("input,button,a").filter(":visible");o=e.first(),a=e.last(),this.$el.find(".o-modal-content").focus(),a.on("keydown",function(){9!==event.which||event.shiftKey||(event.preventDefault(),o.focus())}),o.on("keydown",function(){9===event.which&&event.shiftKey&&(event.preventDefault(),a.focus())})},_setCurrentTabTarget:function(){var n=this;$("body").on("keyup",function(e){9!==e.which||$("body").hasClass(n.defaultSettings.contentPanelPopupCl)||(i=e.target)})}})})});