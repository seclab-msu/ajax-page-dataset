define(["commonService"],function(){"use strict";var i=null;function e(){i=new IEA.commonService}return _.extend(e.prototype,{onEmailFocus:function(e){this.cookieData&&this.modelData.playbackFormFieldsConfig&&(""!==(e=$(e.target)).val()&&e.attr("readonly",!0))},iterateCookie:function(e){var o=this.modelData.playbackFormFieldsConfig;o&&_.each(o,function(e,o){var t=$("#"+e.join(",#"));(t=0===t.length?$("[name="+e[0]+"]"):t).length&&t.attr("save-to-cookie",o)})},_updateFormData:function(){var e=this;e.cookieData&&e._checkExpiryOfToken(e.cookieData)?_.each(e.cookieData,function(e,o){e&&"phoneNumbers"===o&&(e=e[0].id),$('*[save-to-cookie="'+o+'"]').val(e)}):i.removeLocalStorageItem("sign-up-progressive_"+e.modelData.locale.trim())},_verifyEmail:function(e,o){return e===o.email},_createCookieOnFormSubmit:function(){var t={},e=this,o=e.modelData.softLoginCookieExpiryDelay?24*e.modelData.softLoginCookieExpiryDelay*60*60*1e3:o;o&&(t.expiryTime=(new Date).getTime()+o),_.each(e.allElementsConfig,function(e){var o=e.formElementV2&&e.formElementV2.fieldId?$("#"+e.formElementV2.fieldId).length?$("#"+e.formElementV2.fieldId):$('[name="'+e.formElementV2.fieldId+'"]'):o;o&&o.attr("save-to-cookie")&&(e=o.attr("save-to-cookie"),t[e]=o.val())}),(e.cookieData&&e.$el.find('input[type="email"]').length||e._hasBodyClass(e.settings.registrationPage))&&(t=_.extend({},e.cookieData,t)),i.setLocalStorageItem("sign-up-progressive_"+e.modelData.locale.trim(),JSON.stringify(t))},_checkExpiryOfToken:function(e){e=e.expiryTime;return(new Date).getTime()<=e}}),e});