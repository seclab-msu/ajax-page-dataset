!function(){window.evidon_dg.gcc={},window.evidon_dg.gcc.blocking=!1;var o=window.evidon_dg.productIds.GranularConsentControl,n=window.evidon_dg.companyId,e=window.evidon_dg.siteId,d="_evidon_consent_cookie",i="_evidon_consent_ls_";if(window.evidon_dg.cc&&window.evidon_dg.cc.blocking)window.evidon_dg.logToConsoleF(o,"Yielding to ConsentControl");else{var l=window.evidon_dg.getConfigValue("gcc"),g=window.evidon_dg.getConfigValue("cc");if(l){if((!window.evidon_dg.sitePolicy||!window.evidon_dg.sitePolicy.essential)&&l.enforce)return window.evidon_dg.logToConsoleF(o,"Enforce Enabled, However Policy Configuration Not Found For Company ("+n+") / Site ("+e+")",!0,!0),void window.evidon_dg.logToConsoleF(o,"Faulting To Enforce Disabled",!0,!0);var t;if(window.evidon_dg.logToConsoleO(o,"Config: ",l),g&&g.enforce||l&&l.enforce){if(null==window.evidon_dg.geoConsentTypeId?(t=!0,window.evidon_dg.logToConsoleF(o,"ConsentGeo Configuration NOT Found.  Granular Consent Control Enabled By Default.")):(t=0!=window.evidon_dg.geoConsentTypeId,window.evidon_dg.logToConsoleF(o,"GeoConsentType = "+window.evidon_dg.geoConsentTypeId+" ["+window.evidon_dg.geoConsentTypeName+"] | GranularConsentControl Enabled = "+t)),t){var r=2;null!=window.evidon_dg.geoConsentTypeId?r=window.evidon_dg.geoConsentTypeId:g&&g.enforce&&(r=1);var s=window.evidon_dg.getConsentTypeName(r);window.evidon_dg.logToConsoleF(o,"Initial Experience = "+s+" ["+r+"]");var w,c=(w=d,document.cookie.indexOf(w)>-1),a=function(){var o=function(o){var n=document.cookie.match(new RegExp("(^| )"+o+"=([^;]+)"));if(n)return JSON.parse(n[2]);return null}(d);if(o&&o.vendors)return o;var n=function(o){if(localStorage)for(var n=0;n<localStorage.length;n++)if(localStorage.key(n).startsWith(o)){var e=localStorage.getItem(localStorage.key(n));if(e)return JSON.parse(e)}return null}(i);if(n&&n.vendors)return n;return o}();if(c&&a.vendors){var v=[],C=!0,_=!0,u=window.evidon.location.id,f=window.evidon.location.code.toUpperCase(),T=null;if(a.vendors[u])T=a.vendors[u],window.evidon_dg.logToConsoleF(o,"Active Country ("+u+" / "+f+") Vendors Matched To SN Vendors Collection");else for(var F in a.vendors){T=a.vendors[F],window.evidon_dg.logToConsoleF(o,"Active Country ("+u+" / "+f+") Vendors NOT Matched.  Falling Back To SN Vendors For CountryId "+F);break}for(var p in T)T[p]?C=!1:(_=!1,v.push(p));var y=Object.keys(T).length,k=v.length;if(window.evidon_dg.logToConsoleF(o,"Detected "+k+" of "+y+" UCP Vendors Disabled"),C||_)C&&!_?(window.evidon_dg.loadCsp(o,null,!1,!0),window.evidon_dg.gcc.blocking=!0,window.evidon_dg.logToConsoleF(o,"No UCP Vendors Enabled / Blocking Mode: Essential Only")):_&&!C?(window.evidon_dg.gcc.blocking=!1,window.evidon_dg.logToConsoleF(o,"All UCP Vendors Enabled / Not Blocking")):(window.evidon_dg.gcc.blocking=!1,window.evidon_dg.logToConsoleF(o,"LocalStorage Missing Vendors. Faulting To Enforce Disabled",!0,!0));else{var b=function(n){var d=n.join(),i=window.evidon_dg.vendorHostApi+"vendorhost?siteGuid="+e+"&vendorIds="+d,l=new XMLHttpRequest;if(l.open("GET",i,!1),l.send(""),200==l.status){var g=l.responseText;return JSON.parse(g)}return window.evidon_dg.logToConsoleF(o,"Error retrieving vendor host data",!0),null}(v);if(!(b&&b.length>0))return void window.evidon_dg.logToConsoleF(o,"VendorHostApi Failed To Return Hosts. Faulting To Enforce Disabled",!0,!0);window.evidon_dg.logToConsoleO(o,"Retrieved "+b.length+" Hosts For "+k+" Disabled Vendors To Block",b,!1,!1);for(var E=window.evidon_dg.sitePolicy.whitelist,N=E.length-1;N>=0;N--)h(b,E[N])&&E.splice(N,1);window.evidon_dg.loadCsp(o,E,!0,!0),window.evidon_dg.gcc.blocking=!0,window.evidon_dg.logToConsoleF(o,"Some UCP Vendors Enabled / Blocking Mode: Essential + Partial Whitelist")}}else if(c&&a.consent_type)if(2==a.consent_type)window.evidon_dg.loadCsp(o,null,!1,!0),window.evidon_dg.gcc.blocking=!0,window.evidon_dg.logToConsoleF(o,"User Opted OUT / Blocking Mode: Essential Only");else{if(1!=a.consent_type)return;window.evidon_dg.gcc.blocking=!1,window.evidon_dg.logToConsoleF(o,"Consent Found / Not Blocking")}else 1==r?(window.evidon_dg.loadCsp(o,null,!1,!0),window.evidon_dg.gcc.blocking=!0,c?window.evidon_dg.logToConsoleF(o,"Vendors Collection Not Found [Default Experience: "+s+"] / Blocking Mode: Essential Only"):window.evidon_dg.logToConsoleF(o,"Consent Not Found [Default Experience: "+s+"] / Blocking Mode: Essential Only")):(window.evidon_dg.gcc.blocking=!1,c?window.evidon_dg.logToConsoleF(o,"Vendors Collection Not Found [Default Experience: "+s+"] / Not Blocking"):window.evidon_dg.logToConsoleF(o,"Consent Not Found [Default Experience: "+s+"] / Not Blocking"));return}}else window.evidon_dg.logToConsoleF(o,"UCP Integration Disabled")}else window.evidon_dg.logToConsoleF(o,"Configuration (gcc) Not Found For Company ("+n+") OR Site ("+e+")",!0,!0)}function h(o,n){for(var e=o.length;e--;)if(o[e]===n)return!0;return!1}}();