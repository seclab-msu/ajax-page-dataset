/* Version=6.58.2,Timestamp=2022-05-26T20:31:38.780Z */define("d2-hero-v2",["analytics","lazyLoadService","commonService"],function(){"use strict";return IEA.module("UI.hero-v2",function(e,t,o){var n=null,i=null,a=!0,r=!0,d=null;_.extend(e,{defaultSettings:{readMoreSelector:".js-btn-readmore",toggleClass:"is-open",readMoreCopy:".c-hero-v2__longcopy",videoWrapper:".js-video-player",videoHandler:".js-player-handler",previewImage:".js-preview-image",copyImage:".c-hero-v2__copyImage",toggleOpen:"c-hero-v2__toggleOpen",closeBtn:".js-player-close",closeOverlayBtn:".js-player-close",heroV2Cls:".c-hero-v2",contentWrapper:".c-hero-v2__wrapper"},events:{"click .js-btn-readmore":"_toggleReadMore","click .js-player-handler":"_videoPlayerHandler"},initialize:function(e){this._super(e),this.triggerMethod("init"),i=new IEA.LazyLoad,d=new IEA.commonService},render:function(){return this.$el.html(this.template(this.getModelJSON())),!1===this._isEnabled&&(this.enable(),this._isEnabled=!0),this.triggerMethod("render"),this},enable:function(){var e,t=this;this.triggerMethod("beforEnable"),t._isEnabled=!0,t.componentJson=t.getModelJSON().heroV2,(t.componentJson.video&&t.componentJson.video.videoControls&&t.componentJson.video.videoControls.autoplay||t.$el.find(t.defaultSettings.videoWrapper).data("background-video")||"youtubeEmbed"===t.$el.find(t.defaultSettings.videoWrapper).data("video-source")&&!t.$el.find(t.defaultSettings.videoWrapper).data("video-display-overlay")&&!t.$el.find(t.defaultSettings.videoWrapper).data("no-cookie-experience"))&&(e=t.$el.find(".c-hero-v2"),i.lazyLoadFeature(e,function(){t._videoPlayerHandler()})),t.componentJson.backgroundImage&&i.bgImageLoad(t.defaultSettings.heroV2Cls),this.triggerMethod("enable")},_videoPlayerHandler:function(){var e,t=this,o=t.defaultSettings;(t.componentJson.video||"video"===t.componentJson.backgroundType&&t.componentJson.backgroundVideo)&&(e=$(t.$el.find(o.contentWrapper))).length&&!t.videoInitialized&&(t.videoClicked=t.$el.find(o.videoWrapper),require(["videoPlayerServiceV3"],function(){(new IEA.videoPlayerServiceV3).setupVideoPlayer(e,t,t.onVideoSetupCompleted),t.componentJson.generalConfig.expandClickableArea&&(t.$el.find(".c-hero-v2--video .c-hero-v2__shortSubheading, .c-hero-v2--video .o-text__heading-1, .c-hero-v2--video .c-hero-v2__longSubheading p").contents().wrap("<span class='c-hero-v2__text-clickable' />"),t.$el.find(".c-hero-v2--video .js-preview-image picture").addClass("c-hero-v2__text-clickable"),t.$el.find(".c-hero-v2__text-clickable").on("click",function(e){return t.$el.find(o.videoHandler).trigger("click"),!0}))}))},onVideoSetupCompleted:function(e){e.options.view.videoInitialized||(e.options.view.videoInitialized=!0,e.options.backgroundVideo||"youtubeEmbed"===e.options.videoSource?(e.options.view.$el.find(e.options.view.defaultSettings.videoWrapper).show(),setTimeout(function(){e.loadVideo()},999)):e.options.view.videoClicked&&setTimeout(function(){e.loadVideo()},999))},_toggleReadMore:function(e){var t=this,o=$(e.currentTarget),n=t.defaultSettings,i=t.$el.find(n.copyImage),a=t.$el.find(n.readMoreCopy);e.preventDefault(),o.is("."+n.toggleClass)?(d.animate(a,{height:0},1e3),o.removeClass(n.toggleClass),i.removeClass(n.toggleOpen),t._ctReadMore("close")):(a.css("height","auto"),e=a.css("height"),a.css("height",0),d.animate(a,{height:e},1e3),o.addClass(n.toggleClass),i&&i.addClass(n.toggleOpen),t._ctReadMore("open"))},_ctComponentInfo:function(){(n=new IEA.Analytics).trackComponentInfo(this.$el.find("[data-componentname]"),digitalData)},_ctReadMore:function(e){var t={};"undefined"!=typeof digitalData&&"undefined"!=typeof ctConstants&&(this._ctComponentInfo(),t.eventInfo={type:ctConstants.trackEvent,eventAction:ctConstants.readMore,eventLabel:e,eventValue:1},t.category={primaryCategory:ctConstants.engagement},t.subcategory="Interest",digitalData.event.push(t))},_playerStateChange:function(e,t,o){o={player:this.$el.find("#"+o),data:t.data,analyticsstatus:a,videoPlayer:e};t&&"undefined"!=typeof digitalData&&"undefined"!=typeof ctConstants&&(this._ctComponentInfo(),(1===t.data&&a||0===t.data&&r)&&(n._ctTag(o,function(){a=!1}),0===t.data&&(r=!1))),this.triggerMethod("playerStateChange")},_vimeoPlayerStateChange:function(e,t){e={player:$(e).parent(),videoPlayer:e,data:t,analyticsstatus:a};"undefined"!=typeof digitalData&&"undefined"!=typeof ctConstants&&(this._ctComponentInfo(),("play"===t||"finish"===t&&r)&&n._ctTag(e,function(){a=!1}),0===t&&(r=!1))},_onPlayerReady:function(e){},_progressTrack:function(e,t,o,n){var i={};this._ctComponentInfo(),i.eventInfo={type:ctConstants.trackEvent,eventAction:ctConstants.videoProgress,eventLabel:e+" - "+t+" - "+o+" - progressed "+n,eventValue:1},i.attributes={nonInteractive:{nonInteraction:1}},i.category={primaryCategory:ctConstants.engagement},i.subcategory="Read",digitalData.event.push(i)}})})}),define("hero-v2",["d2-hero-v2"],function(){"use strict";return IEA.module("UI.hero-v2",function(e){_.extend(e,{onEnable:function(){this.heroElement=".hero-type-a.hero-type-e .c-hero-v2__wrapper",this._initiateSkrollr()},_initiateSkrollr:function(){var t=this,o=$(t.heroElement);$("body").length&&o.length&&require(["skrollr"],function(e){1024<$(window).width()&&(t._addSkrollrAttr(o),e.init({}))})},_addSkrollrAttr:function(e){e.attr({"data-top":"background-position:center 90px","data-top-bottom":"background-position:center -191px"}),$("body").attr("id","skrollr-body")}})})});