define(["commonService","analytics"],function(){"use strict";var d=new IEA.commonService,g=new IEA.Analytics;IEA.service("formService",function(e,o,t){function h(){return this}return _.extend(h.prototype,{initialize:function(){return this},fieldToJson:function(e,t,r){var n,a=this,s=["qna","csa"];e&&(n=e,$.each(t,function(e){var o;a.isArray(t[e])||(o=e+1===t.length,"promotigo"===t[0]&&-1!==s.indexOf(t[1])?a.promotigoPayload(n,t,r,e):(n=a.addObject(n,t[e],t[e-1],t[e+1],o),t.length===e+1&&a.addValue(n,t[e],r)))}))},surveyFieldToJson:function(e,t,r,n){var a,s=this,i=n.attr("name"),l=$("#"+i).val(),c=n.siblings('input[type="text"]').val();e&&(a=e,$.each(t,function(e){var o;s.isArray(t[e])||(o=e+1===t.length,a=s.addObject(a,t[e],t[e-1],t[e+1],o),t.length===e+1&&("answerText"===t[e]?r=c||"":"id"===t[e]?r=l||"":"answer"===t[e]?r=null!==n.val()&&""!==n.val():"answerType"===t[e]&&(r=i||""),s.addValue(a,t[e],r)))}))},addObject:function(e,o,t,r,n){if(e.constructor===Array){for(var a={},s=this.isArray(r)?void 0===e[t]?(a[o]=[],a[o]):a=e[t]:(null!==e[t]&&void 0!==e[t]?a[o]=e[t]:a[o]={},n?a:a[o]);e.length<parseInt(t);)e.push({});e.splice(parseInt(t),0,a)}else{a=!1;this.isArray(r)?null!==e[o]&&void 0!==e[o]?e=e[o]:(a=!0,e[o]=[]):null!==e[o]&&void 0!==e[o]?e=e[o]:(a=!0,e[o]={}),s=n||e.constructor&&!a?e.constructor===Array&&void 0!==e[r]?e[r]:e:e[o]}return s},makeFieldMandatory:function(e,n,o){var r=arguments,a=function(){for(var e=[],o=2,t=0;o<r.length;o++)e[t]=r[o],t++;return e}(),t=$(e);(t=0===t.length?$("[name='"+e.slice(1)+"']"):t).on("change",function(){var t,e='label[for="'+n+'"]',r=$(this),e=$(e),o=(e=0===e.length?r.parents("form").find("[name='"+n+"']").parents(".form-group").find("label"):e).find(".c-form-mandatory");t=!1,a.forEach(function(e,o){t=t||r.find('option[value="'+e+'"]').is(":selected")}),t?(o.length?o.show():e.append('<span class="c-form-mandatory">*</span>'),$(document).trigger("makeMandatoryEvent",[n,!0])):(o.hide(),$(document).trigger("makeMandatoryEvent",[n,!1]))})},addValue:function(e,o,t){e.constructor!==String&&(t instanceof String||"string"==typeof t?e[o]=d.trimString(t):e[o]=t)},isArray:function(e){return $.isNumeric(e)},formToJson:function(e){e=$(e);return this.convertToJSON({},e.find("input, textarea, select").not("[data-exclude]"),this)},removeBlankElements:function(e){for(var o=[],t=0;t<e.length;t++){var r,n=!0;for(r in e[t])e[t].hasOwnProperty(r)&&(n=!1,e[t][r]=this.cleanArray(e[t][r]));n||o.push(e[t])}return o},cleanArray:function(e){return null===e||(e.constructor===Array?e=this.removeBlankElements(e):e.constructor===Object&&(e=this.removeEmptyArrayElements(e))),e},removeEmptyArrayElements:function(e){for(var o in e)e.hasOwnProperty(o)&&"samplePrizeSelection"!==o&&(e[o]=this.cleanArray(e[o]));return e},convertToJSON:function(m,e,f){return m={},e.each(function(e){var o=$(this);if("submit"!==o.attr("name")){var t=o.val(),r=o.attr("type"),n=o.attr("name"),a=o.attr("id"),s=o.data("field-id"),i=o.data("type"),l=o.data("survey-field");switch(r){case"checkbox":o.data("sample")?this.checked&&f.fieldToJson(m,n.split("-"),t):f.fieldToJson(m,n.split("-"),this.checked);break;case"radio":l&&(a=o.data("id"),f.fieldToJson(m,a.split("-"),this.checked)),this.checked&&!l&&($.isNumeric(t)&&"number"===i&&(t=parseInt(t)),f.fieldToJson(m,n.split("-"),t));break;case"file":m[a]=o.data("fileencoded");break;case"number":$.isNumeric(t)&&(t=parseInt(t)),f.fieldToJson(m,n.split("-"),t);break;default:if(n){var c,d=n.split("-"),g=[],u=null,p=o.hasClass("c-form-survey-field");if(p&&(d=(o.hasClass("c-form-dropdown")?n:s||a).split("-")),$.each(d,function(e){g=g.concat(d[e].split("#"))}),"boolean"===i)return c="true"===t,void f.fieldToJson(m,n.split("-"),c);$.isNumeric(t)&&"number"===i&&(t=parseInt(t)),o.is(".input-date")&&($("body").hasClass("registration-page")||$("body").hasClass("profile-page"))&&"mm/dd/yyyy"!==o.attr("data-format")&&(""===o.val()?u="":t=f.getFormattedDate(t,"mm/dd/yyyy",o.attr("data-format"))),p?h.prototype.surveyFieldToJson(m,g,u,o):h.prototype.fieldToJson(m,g,null!==t&&""!==t?t:u)}}}}),f.removeEmptyArrayElements(m),JSON.stringify(m)},jsonToForm:function(e){var s={},i=[];return function n(e,a){$.each(e,function(e,o){if(i[a]=e,null!==o)if("object"==typeof o)n(o,a+1);else{for(var t="",r=0;r<a;r++)t+=i[r]+"-";s[t+=e]=o}})}(e,0),s},getFormattedDate:function(e,o,t){var e=-1!==e.indexOf("-")?e.replace(/-/g,"/"):e,t=t&&t!==o?new Date(e.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$2/$1/$3")):new Date(e),e=t.getMonth()+1,r=t.getDate(),t=t.getFullYear(),a="",s=[];if(1===r.toString().length&&(r="0"+r),1===e.toString().length&&(e="0"+e),s.push("dd:"+r),s.push("mm:"+e),s.push("yyyy:"+t),void 0!==o)return r=o.split(new RegExp("[-./:? ]","g")),_.each(r,function(t,r){var n=-1!==o.indexOf("-")?"-":"/";_.each(s,function(e,o){-1!==e.indexOf(t)&&(a+=0===r?e.split(":")[1]:n+e.split(":")[1])})}),a},groupPrefilledData:function(e,o){var o="."+o,t="hidden",r=".form-group",n=e.find(".c-preview-block"),a=e.find(r);e.find(o).length?(e.find(o).parents(r).each(function(){var e=$(this);e.clone().removeClass(r).prependTo(n).insertAfter(".c-edit-link"),e.addClass("hidden")}),n.find("input, select").each(function(){var e,o=$(this);"checkbox"===o.attr("type")||"radio"===o.attr("type")?(e=o.attr("type"),o.replaceWith("<input type='"+e+"' class='prev-elem' checked='true' disabled='true'>")):o.hasClass("c-form-dropdown")?o.replaceWith("<div class='prev-elem'>"+o.find("option:selected").text()+"</div>"):o.replaceWith("<div class='prev-elem'>"+o.val()+"</div>")})):a.hasClass(t)&&a.removeClass(t),e.hasClass("editable")?n.addClass(t):n.removeClass(t)},profileDateDropdown:function(e,o){var o=new Date(o),t=o.getMonth()+1,r=o.getDate(),o=o.getFullYear();1===t.toString().length&&(t="0"+t),1===r.toString().length&&(r="0"+r),e.find("[name*=Date]").val(r),e.find("[name*=Month]").val(t),e.find("[name*=Year]").val(o)},populateFormData:function(e,a){var s=this,i="form-elem-preview",o=a.find("[name*=Birthday]");$.each(e,function(e,o){var t,r,n;0<a.find("[name*="+e+"]").length&&""!==o?("checkbox"===(t=(n=$("[name*="+e+"]")).attr("type"))&&!0===o?(n=$("[name="+e+"]")).attr("checked",!0):"radio"===t?($("body").hasClass("profile-page")?$("#"+o):$("#"+e+"-"+o)).attr("checked",!0):(n=$("[name="+e+"]"),-1!==e.toLowerCase().indexOf("birthday")?(r="yyyy/mm/dd",n.attr("data-format")&&(r=n.attr("data-format")),n.data("date-picker")?require(["datepicker"],function(){n.val(s.getFormattedDate(o.split("T")[0],r)).datepicker("setDate",new Date(o))}):n.val(s.getFormattedDate(o.split("T")[0],r))):n.hasClass("c-form-dropdown")&&!a.hasClass("editable")?(n.find("option:selected").removeAttr("selected"),n.find('option[value="'+o+'"]').prop("selected",!0)):n.val(o)),a.hasClass("hideFieldsWithProfileData")?n.closest(".component-wrapper").hide():a.hasClass("preFillFieldsWithProfileData")&&(n.hasClass(i)?n.removeClass(i):n.addClass(i))):""!==o&&-1!==e.toLowerCase().indexOf("surveyid")&&d.dispatchEvent("surveyLoaded",o)}),o.val()&&s.profileDateDropdown(a,o.val()),a.hasClass("preFillFieldsWithProfileData")&&s.groupPrefilledData(a,i)},getCookie:function(e){return(document.cookie.match("(^|; )"+e+"=([^;]*)")||0)[2]},matchConfirmPassword:function(e,o,t,r,n){var a=t.parents(".form-group"),e=t.parent().find(e.errorMsgFieldWrapper);return""!==o.val()&&""!==t.val()&&o.val()!==t.val()?(a.addClass("has-error pwd-has-error-block"),e.html(r).removeClass("hidden"),!1):(a.removeClass("has-error pwd-has-error-block"),e.addClass("hidden"),n&&this.registrationHelpers().moveNext(),!0)},fetchFacebookDetails:function(r){this.fbConnectCookieName="facebook-connect";var e=d.getCookie(this.fbConnectCookieName);if("undefined"!=typeof FB&&null!==FB&&e)return FB.getLoginStatus(function(e){var o,t;r=JSON.parse(r),this.providerName=$(".o-btn__social-login").data("provider-name"),"connected"===e.status&&(t={Provider:this.providerName,ProviderUserId:e.authResponse.userID},(o=[]).push(t),r.OAuthMemberships=o,r.token=e.authResponse.accessToken),r=JSON.stringify(r)}),r},validationHelpers:function(a){var r=this;return{fielUploadRequired:function(){var e=$(a.formFile),o=e.parents(a.formGroup);return""===e.val()||o.hasClass(a.fileError)?(o.addClass(a.fileError),e.next(a.fileHelpBlock).removeClass("hidden"),!1):(o.removeClass(a.fileError),e.next(a.fileHelpBlock).addClass("hidden"),!0)},confirmPassword:function(){var e,o,t;return!$("body").hasClass("profile-page")&&!$("body").hasClass("reset-password-page")||(e=$('[name="NewCredentials-confirmPassword"]').data("form-profile-confirm-password-msg-msg"),o=$('[name="NewCredentials-Password"]'),t=$('[name="NewCredentials-confirmPassword"]'),r.matchConfirmPassword(a,o,t,e))},passwordMismatch:function(e){var o,t,r,n;return!($("body").hasClass("profile-page")&&0<e.$form.find("#profileEmailPassword-submit").length)||(o=e.$form.find('[name="OldCredentials-Password"]'),r=(t=e.$form.find('[name="NewCredentials-Password"]')).parents(".form-group"),n=t.parent().find(a.errorMsgFieldWrapper),e=e.$form.find('[name="NewCredentials-Password"]').data("form-oldnewpasswordmismatch-msg"),""!==o.val()&&""!==t.val()&&o.val()===t.val()?(r.addClass("has-error pwd-mismatch-has-error-block"),n.html(e).removeClass("hidden"),!1):(r.removeClass("has-error pwd-mismatch-has-error-block"),n.addClass("hidden"),!0))}}},registrationHelpers:function(){var l=this;function o(){var e=$("form.active .c-registration-tab-content").height()+220;$("form.active").parents(".c-tab-element-wrapper-content").height(e),$(".form .form-error-message").remove()}function c(){$(".c-tab-element-wrapper-content").find(".form-error-msg").remove();var e=$("form.active");(e.parents(".form").length?e.parents(".form"):e.parents(".formV2")).next().find("form").addClass("active"),e.removeClass("active"),o(),$("form").find(".c-registration-tab-content").length&&$("html, body").animate({scrollTop:$("form.active .c-registration-tab-content").eq(0).offset().top-220},800)}return{moveNext:c,registerUser:function(t,r,e){var o=$(t).attr("action"),n=null,a=d.getLocalStorageItem("returnUrl"),s=$("#userPreferencesId-submit").parents("form"),i=$("#userDetailsId-submit").parents("form"),n="update"===$("#userPreferencesId-submit").attr("actionType")?(o=o.replace(/.create$/,".update"),$(i).add(s).find(":input").not("[type=submit]").not("[data-exclude]")):$('.c-tab-element-wrapper-content form :input:not([type="submit"])').not("[data-exclude]"),i=l.convertToJSON({},n,l),n=JSON.parse(i);l.fetchFacebookDetails(i)&&(i=l.fetchFacebookDetails(i)),(d.getLocalStorageItem("QuickpollSurveyResponses")||d.getLocalStorageItem(n.locale+"-diagnosticToolSignupSurveyResponses",!0))&&(i=l.registrationDataToPrm(n)),(o=$.ajax({type:$(".local-env").length?"GET":"POST",url:o,contentType:"application/json",dataType:"json",data:i,headers:{locale:n.locale,brand:n.brand}})).done(function(){"Success"!==arguments[0].Status||!arguments[0]["non-PII"]&&"undefined"==typeof FB||(g._trackFormSubmit(s,arguments[0]["non-PII"],l.providerName),e&&(e._registerationSubmitTracking(arguments[0]),e._registerationSuccessHandler()),d.getCookie(l.fbConnectCookieName)&&d.eraseCookie(l.fbConnectCookieName)),a&&""!==a?(d.removeLocalStorageItem("returnUrl"),window.location.href=a):c()}),o.fail(function(e){var o=$(t).find(".c-registration-tab-content");void 0!==e.error&&((e=JSON.parse(e.responseText)).errors?e.errors.length:0)&&(r&&e.code===r.errorCodes.captchaErrorCode?r._genericErrorCodeHandler(e,!0,o):r._genericErrorCodeHandler(e,!1,o))})},setFormHeight:o}},registrationDataToPrm:function(e){var o;return d.getLocalStorageItem("QuickpollSurveyResponses")&&(o=JSON.parse(d.getLocalStorageItem("QuickpollSurveyResponses")),e=JSON.stringify(this.createRegisterJson(o,e))),d.getLocalStorageItem(e.locale+"-diagnosticToolSignupSurveyResponses",!0)&&(o=JSON.parse(this.getMultipleLocalStorageMergedData("diagnosticToolSignupSurveyResponses",e.locale,!0)),e=JSON.stringify(this.createRegisterJson(o,e))),e},createRegisterJson:function(e,o){var t=o.Registrations[0].MarketingPreferences||!1,e=t&&void 0!==t.SurveyResponses?t.SurveyResponses.Responses.push(e.surveyResponseList.Responses):(t.SurveyResponses=e,t);return o.Registrations[0].MarketingPreferences=e,o},sendDataToPRM:function(e){var o,t=JSON.parse(e);return $(".sign-up-page").length&&(d.getLocalStorageItem("QuickpollSignupSurveyResponses")&&(o=JSON.parse(d.getLocalStorageItem("QuickpollSignupSurveyResponses")),e=JSON.stringify(this.createSignupJson(o,t))),d.getLocalStorageItem(t.locale+"-diagnosticToolSignupSurveyResponses",!0)&&(o=JSON.parse(this.getMultipleLocalStorageMergedData("diagnosticToolSignupSurveyResponses",t.locale,!0)),e=JSON.stringify(this.createSignupJson(o,t)))),e},createSignupJson:function(e,o){var t=o.surveyResponseList||!1,t=t?(t.push(e.surveyResponseList[0]),o):$.extend(e,o);return t},_addUtmParamData:function(e){var e=JSON.parse(e),o=window.location.search.substring(1);return o&&(e.utmParameters=encodeURIComponent(o)),JSON.stringify(e)},handleRememberMe:function(e){var e=$(e.currentTarget),o=$("#rememberMeExpiration"),t=$("#ExpirationDuration"),r=$("#defaultExpiration");e.is(":checked")&&o.length&&t.val(o.val()),!e.is(":checked")&&r.length&&t.val(r.val())},resetFormData:function(e,o,t){var r=this;e.preventDefault(),$("form").each(function(){this.reset(),r.populateFormData(o,t)})},getMultipleLocalStorageMergedData:function(t,e,o){var r,n;if(d.getLocalStorageItem(e+"-"+t,o))return e=JSON.parse(d.getLocalStorageItem(e+"-"+t,o)),n=[],o={},$.each(e,function(e,o){switch(r=o,t){case"surveyResponses":n=n.concat(o.SurveyResponses.Responses[0].QuestionAnswers);break;case"diagnosticToolSignupSurveyResponses":n=n.concat(o.surveyResponseList[0].questionAnswersList);break;default:n=n.concat(o)}}),o="surveyResponses"===t?(r.SurveyResponses.Responses[0].QuestionAnswers=n,r):"diagnosticToolSignupSurveyResponses"===t?(r.surveyResponseList[0].questionAnswersList=n,r):n,JSON.stringify(o)},handleDOMAttrChanges:function(e,o){var t=e.attr(o);void 0!==t&&!1!==t?e.removeAttr(o):e.attr(o,"disabled")},_isAmazonCognitoUserSignedIn:function(e){var t=e.componentContext||e,e=e.componentContext?e:JSON.parse(t._formDatatoSend()),e={UserPoolId:e.config.poolId,ClientId:e.config.clientId};t.userPool=new t.AmazonCognitoIdentity.CognitoUserPool(e),e=t.userPool.getCurrentUser(),null!==(t.cognitoUser=e)?e.getSession(function(e,o){e?t.triggerMethod("cognitoUserError",t):o.isValid()&&(t.userSession=o,t.triggerMethod("cognitoUserLogin",t))}):t.triggerMethod("cognitoUserNotLogin",t)},_setULCognitoUserCookie:function(e,o){d.createCookie("_ulcogid",o),d.createCookie("_ulcogtoken",e.idToken.jwtToken)},_removeULCognitoUserCookie:function(){d.eraseCookie("_ulcogid"),d.eraseCookie("_ulcogtoken")},_getULCognitoUserCookie:function(e){return d.getCookie(e)},encodeStr:function(e){return window.btoa(encodeURIComponent(e||""))},decodeStr:function(e){return decodeURIComponent(window.atob(e||""))},_amazonCognitoSignin:function(e){var o=e,t=this,r=JSON.parse(o._formDatatoSend()),e={UserPoolId:r.config.poolId,ClientId:r.config.clientId},n={Username:r.username||r.contact.email,Password:r.password},n=new o.AmazonCognitoIdentity.AuthenticationDetails(n);o.userPool=new o.AmazonCognitoIdentity.CognitoUserPool(e),e={Username:r.username||r.contact.email,Pool:o.userPool},e=new o.AmazonCognitoIdentity.CognitoUser(e),(o.cognitoUser=e).authenticateUser(n,{onSuccess:function(e){t._setULCognitoUserCookie(e,t.encodeStr(r.username||r.contact.email)),o.triggerMethod("cognitoUserLoginSuccess",o)},onFailure:function(e){o.triggerMethod("cognitoUserLoginFailure",{formContext:o,apiError:e})}})},_amazonCognitoUserSignOut:function(e){e.cognitoUser=e.cognitoUser||e.userPool.getCurrentUser(),e.cognitoUser.signOut(),this._removeULCognitoUserCookie(),e.triggerMethod("cognitoUserSignout",e)},isUserLoggedIn:function(){return this.decodeStr(this._getULCognitoUserCookie("_ulcogid"))},_awsChangePassword:function(e){var t=e,e=JSON.parse(t._formDatatoSend());t.cognitoUser=t.cognitoUser||t.userPool.getCurrentUser(),t.cognitoUser.changePassword(e.oldPassword,e.newPassword,function(e,o){e?t.triggerMethod("cognitoChangePasswordFailure",t):t.triggerMethod("cognitoChangePasswordSuccess",t)})},_verifyOTPawsCognito:function(e){var t=e;t.toggleLoader("show"),t.awsCognitoUserPool=new t.AmazonCognitoIdentity.CognitoUserPool(t.poolData),e={Username:t.formJSONData.contact.email,Pool:t.awsCognitoUserPool},t.awsCognitoUserObject=new t.AmazonCognitoIdentity.CognitoUser(e),t.awsCognitoUserObject.confirmRegistration(t.otpValue,!0,function(e,o){t.toggleLoader("hide"),e?t.triggerMethod("cognitoOTPVerificationFailure",t):t.triggerMethod("cognitoOTPVerificationSuccess",t)})},_generateOTPawsCognito:function(e){var t=e;t.poolData={UserPoolId:t.formJSONData.config.poolId,ClientId:t.formJSONData.config.clientId},t.awsCognitoUserPool=new t.AmazonCognitoIdentity.CognitoUserPool(t.poolData),t.toggleLoader("show"),t.awsCognitoUserPool.signUp(t.formJSONData.contact.email,t.formJSONData.password,null,null,function(e,o){t.toggleLoader("hide"),e?"UsernameExistsException"!==e.code&&"UsernameExistsException"!==e.__type||t.triggerMethod("cognitoGenerateOTPFailure",t):t.triggerMethod("cognitoGenerateOTPSuccess",t)})},_awsCognitoRegistrationResendOtp:function(e){var t=e;t.$form.find(t.otpCommonVariables.otpEnabledLink).hasClass(t.otpCommonVariables.noClick)||(t.awsCognitoUserPool=new t.AmazonCognitoIdentity.CognitoUserPool(t.poolData),e={Username:t.formJSONData.contact.email,Pool:t.awsCognitoUserPool},t.awsCognitoUserObject=new t.AmazonCognitoIdentity.CognitoUser(e),t.awsCognitoUserObject.resendConfirmationCode(function(e,o){e?(t.errorObject=e,t.triggerMethod("cognitoRegistrationResendOTPFailure",t)):t.triggerMethod("cognitoRegistrationResendOTPSuccess",t)}))},_awsCognitoForgotPassword:function(e){var o=e,e=JSON.parse(o._formDatatoSend());o.poolData={UserPoolId:e.config.poolId,ClientId:e.config.clientId},o.awsCognitoUserPool=new o.AmazonCognitoIdentity.CognitoUserPool(o.poolData),e={Username:e.username,Pool:o.awsCognitoUserPool},o.awsCognitoUserObject=new o.AmazonCognitoIdentity.CognitoUser(e),o.awsCognitoUserObject.forgotPassword({onSuccess:function(e){o.toggleLoader("hide"),o.triggerMethod("cognitoForgotPasswordSuccess",o)},onFailure:function(e){o.errorObject=e,o.toggleLoader("hide"),o.triggerMethod("cognitoForgotPasswordFailure",o)}})},_awsDeleteUser:function(e){var t=e;t.cognitoUser=t.cognitoUser||t.userPool.getCurrentUser(),t.cognitoUser.deleteUser(function(e,o){e?t.triggerMethod("cognitoDeleteUserFailure",t):t.triggerMethod("cognitoDeleteUserSuccess",t)})},_awsCognitoResetPassword:function(e){var o,t=e,e=JSON.parse(t._formDatatoSend());t.cognitoUser||(t.poolData={UserPoolId:e.config.poolId,ClientId:e.config.clientId},t.awsObject=new t.AmazonCognitoIdentity.CognitoUserPool(t.poolData),o={Username:t.$form.find("button[type='submit']").attr("data-recipient-id"),Pool:t.awsObject},t.cognitoUser=new t.AmazonCognitoIdentity.CognitoUser(o)),t.cognitoUser.confirmPassword(e.passwordResetCode,e.newPassword,{onSuccess:function(){t.triggerMethod("cognitoForgotPasswordConfirmSuccess",t)},onFailure:function(e){t.errorObject=e,t.triggerMethod("cognitoForgotPasswordConfirmFailure",t)}})},promotigoPayload:function(e,o,t,r){var n=r+1===o.length,a=this;"qna"===o[r]&&"id"===o[4]?(a.sampleHiddenVal=t,a.sampleKeyName=o[2],a.split=",",e[a.sampleKeyName]||(e[a.sampleKeyName]="",a.split="")):"csa"===o[r]&&"id"===o[4]&&(a.sampleHiddenVal=t,a.sampleKeyName=o[2],e[a.sampleKeyName]||(e[a.sampleKeyName]=[])),n&&("qna"===o[1]&&"value"===o[4]&&t&&(e[a.sampleKeyName]=e[a.sampleKeyName]+a.split+a.sampleHiddenVal),"csa"===o[1]&&"value"===o[4]&&t&&e[a.sampleKeyName].push(a.sampleHiddenVal))},_getformReturnUrl:function(){var e=window.location.search,e=new URLSearchParams(e).get("returnUrl"),o=d.getLocalStorageItem("returnUrl");return!e&&o&&(d.removeLocalStorageItem("returnUrl"),e=o),e}}),h})});