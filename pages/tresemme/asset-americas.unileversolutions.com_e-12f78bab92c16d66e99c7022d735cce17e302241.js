define(["commonService"],function(){"use strict";var d=new IEA.commonService;function e(){}return _.extend(e.prototype,{_setupMobileNav:function(){var e=this,r=e.globalSelector,a=$(window).width(),i=$(window.top).height(),o=e.$navBar.height(),t=e.$oNavbarTier1ScrollerWrapper,s=t.find(r.oNavbarTier1Wrapper),i=i-o;e.$body.addClass(r.oNavbarMobile).removeClass(r.oNavbarDesktop),e.$el.find(".o-navbar-tier2-wrapper,.o-navbar-tier3-wrapper,.o-navbar-tier4-wrapper").css("left",a),a<992&&e.$el.find(r.oNavbarCustomModuleListWrapper).css({width:a,left:a,height:i}),s.height()>i-30?(i-=30,e._updateMobileScroller(e)):(t.removeAttr("style").add,i-=100),e.$oNavbarMenuWrapper.not(r.oNavbarTier1Wrapper).height(i).width(a)},_updateMobileScroller:function(e){var r=e.globalSelector,a=$(window.top).height(),i=$(window).width(),o=e.$el.find(r.oNavbar).height(),t=e.$el.find(r.oNavbarTier1ScrollerWrapper),s=e.$el.find(r.oNavBarBack),l=60,n=80,c=e.mobLandscapeMode?160:100,r=t.find(r.oNavbarTier1Wrapper),a=a-o-l;e.scrollingMobile=!1,r.height()<a-l&&(l=100,n=80),s.css({top:n}),1===e.currentLevel?(t.css({position:"absolute",top:o+l,width:i,height:a}),r.css({height:"auto",top:"0"}).css({height:r.height()+c})):r=$(".o-navbar-menu-wrapper.opened .o-navbar-dropdown-menu"),r.height()>t.height()&&(t.css({"overflow-x":"auto"}),t.scrollTop(0))},_setGlobalNavSearchHeight:function(){var e=this.mobLandscapeMode?160:100,r=$(this.defaultSettings.customModuleDiv);r.css({height:"auto"}).css({height:r.height()+e})},_setTiersHeight:function(){var e=this.mobLandscapeMode?160:100;$(this.defaultSettings.gbDropdown).each(function(){$(this).css({height:"auto"}).css({height:$(this).height()+e})})},_toggleMobileSubmenu:function(e){var r,a,i,o,t,s,l,n=this,c=n.globalSelector;n.$el.find(this.globalSelector.oNavbarTier1ScrollerWrapper).css({"overflow-x":"initial"}),n.scrollingMobile||(r=$(window).width(),a=n.$el.find(c.oNavBarBack),i=!e,o=n.$el.find(n.defaultSettings.globalNavSearchForm),t=n.$el.find(c.oNavbarTier2Wrapper),s=n.$el.find(c.oNavbarTier3Wrapper),l=n.$el.find(c.oNavbarTier4Wrapper),i?(n.currentLevel--,i=n.$el.find(".o-navbar-menu-wrapper.opened").parents(c.oNavbarMenuWrapper).first(),n.$oNavbarMenuWrapper.removeClass("opened"),i.addClass("opened"),o&&i.hasClass(c.oNavbarTier2Wrapper)&&o.hasClass("hide")&&o.removeClass("hide"),d.animate(c.oNavbarTier1Wrapper,{left:"+="+r},500,0,function(){switch(n.currentLevel){case 1:t.hide();break;case 2:s.hide();break;case 3:l.hide()}n._updateMobileScroller(n)})):(e.parent().hasClass("submenu")&&(i=e.siblings(c.oNavbarMenuWrapper),$(i).show(),$(i).css("visibility","visible"),d.animate(i,{opacity:1},500,0,function(){switch(n.currentLevel){case 1:t.hide(),o&&o.removeClass("hide");break;case 2:s.hide();break;case 3:l.hide()}}),n.$oNavbarMenuWrapper.each(function(e){n._destroyScroller($(this))}),n._destroyScroller(n.$oNavbarTier1ScrollerWrapper),n.$oNavbarMenuWrapper.removeClass("opened"),i.addClass("opened"),d.animate(c.oNavbarTier1Wrapper,{left:"-="+r},500,0,n._updateMobileScroller(n)),n.currentLevel++),o&&o.is(":visible")&&o.addClass("hide")),1<n.currentLevel?(a.css({visibility:"visible"}).show(),d.animate(a,{opacity:1},500)):d.animate(a,{opacity:0},500,0,function(){a.css({visibility:"hidden"}).hide()}))},_destroyScroller:function(e){var r;e.data("scroller")&&(e.css("overflow","visible"),(r=e.data("scroller")).scrollTo(0,0),r.destroy(),r.disable(),e.data("scroller",r=null))}}),e});