(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1129:function(t,e,r){"use strict";var n=r(3),l=r.n(n),o=r(147),c=r.n(o),d=r(17),h=r(18),m=r(1032),C=r(16),_=r(239),f=r.n(_),k={name:"PaypalExpressCheckoutButton",components:{PaypalButton:C.A},props:{label:{type:String,default:"Direkt zu"},articleNumber:{type:String,default:""},size:{type:String,default:"medium",validator(t){var e;return l()(e=["small","medium","large"]).call(e,t)}}},data:()=>({features:f.a,messages:{redirect:"Die Weiterleitung zu PayPal konnte nicht durchgeführt werden.",addCartItem:"Der Express Checkout mit diesem Artikel konnte nicht durchgeführt werden."}}),methods:{...Object(d.b)(["addCartItem"]),...Object(d.b)("order",["submitPaypalExpressOrder"]),async addExpressItemToCart(t){try{return await this.addCartItem({articleNumber:t}),!0}catch(t){this.handleCheckoutFailure(t)}return!1},handleCheckoutSuccess(t){this.$emit("checkout:success",t),window.location.href=t},handleCheckoutFailure(t){var e;let r=[];if(null!=(e=t.response)&&e.data){const{errors:e}=t.response.data,n="Hoppla! Da ist etwas schiefgelaufen. Bitte versuchen Sie es noch einmal.";r=Object(h.flatten)(c()(Object(m.b)(e,n)))}0===r.length&&t instanceof Error&&(r=[t.message]),0===r.length&&(r=[this.messages.addCartItem]),this.$dialog.info(r.join("<br>"),{type:"error"}),this.$emit("checkout:failure",t)},async handleCheckoutStart(){if(this.$emit("checkout:start"),!this.articleNumber||await this.addExpressItemToCart(this.articleNumber))try{const{redirect:t}=await this.submitPaypalExpressOrder();if(!t)return void this.handleCheckoutFailure(new Error(this.messages.redirect));this.handleCheckoutSuccess(t)}catch(t){this.handleCheckoutFailure(t)}}}},y=r(0),component=Object(y.a)(k,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("PaypalButton",{staticClass:"paypal-express-checkout-button",attrs:{label:t.label,"is-label-before":"",size:t.size},on:{click:t.handleCheckoutStart}})}),[],!1,null,null,null);e.a=component.exports},1224:function(t,e,r){t.exports={}},1378:function(t,e,r){"use strict";r(1224)},1467:function(t,e,r){"use strict";r.r(e);var n=r(6),l=r.n(n),o=r(59),c=r.n(o),d=r(147),h=r.n(d),filter=r(8),m=r.n(filter),map=r(7),C=r.n(map),_=r(11),f=r.n(_),k=r(18),y=r(17),v=r(1072),w=r(234),x=r(1015),E=r(1047),O={data(){const t=" | Telekom";return{titleEnd:t,titleTemplate:"%s | Telekom"}}},I=r(1096),S=r(1274),N=r(1129),P=r(1032),dialog=r(73),j={layout:"default",mixins:[w.a,O,Object(x.a)({trackViewOnMount:!1}),E.a],components:{OrderSteps:I.a,OrderTable:S.a,PaypalExpressCheckoutButton:N.a},data:()=>({OrderSteps:I.a}),async mounted(){var t,e;const r=[];l()(t=this.addedArticleNumbers).call(t,(t=>{r.push({articleNumber:t})})),l()(e=this.addedContractNumbers).call(e,(t=>{r.push({contractNumber:t})})),await this.initCart();let n={};if(r.length>0)try{await this.addCartItems(r)}catch(t){t.errors&&(n={...n,...t.errors})}if(this.addedCouponCode)try{await this.cartAddCoupon({redeemedCoupon:this.addedCouponCode})}catch(t){var o,c;null!=t&&null!=(o=t.response)&&null!=(c=o.data)&&c.errors&&(n={...n,...t.response.data.errors})}Object(k.isEmpty)(n)||await this.handleCartErrors(n),this.$tealium.view(this.tealiumData),this.$tealium.updateAutomaticLinkTracking(),await this.$router.replace({query:null}).catch((()=>{}))},computed:{...Object(y.e)({cartInitialized:t=>t.cart.initialized}),...Object(y.c)(["cartIsEmpty","cartItems","cartQuantity","checkoutInitUrlSuffix","isMixedCart"]),addedCouponCode(){return this.$route.query.couponCode||null},addedArticleNumbers(){return Object(k.castArray)(this.$route.query["articleNumbers[]"]||[])},addedContractNumbers(){return Object(k.castArray)(this.$route.query["contractNumbers[]"]||[])},isIndexed:()=>!1,additionalTealiumData(){return Object(v.a)("add",this.cartItems,this.$store.getters.isKnownCustomer)},title:()=>"Warenkorb"},methods:{...Object(y.b)(["initCart","addCartItems","cartAddCoupon"]),async handleCartErrors(t){const e=JSON.parse(c()(t));null==e||delete e.base;const r=h()(P.a.unpackUniquePath(P.a.getMessages(e)));var n,o;null!=t&&t.base&&t.base.length>0&&l()(n=m()(o=[this.getProductAddToCartErrorMessage(t.base,"taken"),this.getProductAddToCartErrorMessage(t.base,"not_found")]).call(o,Boolean)).call(n,(t=>{r.push(t)}));r.length>0?await dialog.a.info(r.join("<br><br>"),{htmlSafe:!0,type:"warning"}):await this.handleMultipleContractsErrors((null==t?void 0:t.base)||[])},getProductAddToCartErrorMessage(t,e){var r;const n=C()(r=m()(t).call(t,(t=>t.error===e))).call(r,(t=>t.details.articleNumber));if(0===n.length)return;const l=`<strong>${C()(n).call(n,(t=>{var e;const r=f()(e=this.cartItems).call(e,(e=>e.articleNumber===t));return(null==r?void 0:r.name)||t})).join("</strong>, <strong>")}</strong>`;switch(e){case"taken":return`Folgende Produkte befanden sich bereits im Warenkorb und wurden daher nicht erneut hinzugefügt:<br>${l}`;case"not_found":return`Folgende Produkte wurden nicht gefunden und daher nicht zum Warenkorb hinzugefügt:<br>${l}`;default:return}},async handleMultipleContractsErrors(t){var e;const r=C()(e=m()(t).call(t,(t=>"multiple_tariffs"===t.error))).call(e,(t=>t.details.contractNumber));if(r.length){var n;const[t]=r;f()(n=this.cartItems).call(n,(i=>null===i.articleNumber&&i.contractNumber===t))||await dialog.a.show("MultipleContractsInCartDialogContent",{type:"warning",componentOptions:{newContract:t}})}}}},$=(r(1378),r(0)),component=Object($.a)(j,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.cartInitialized?r("div",{staticClass:"cart-page grid grid--center"},[r("OrderSteps",{attrs:{step:1}}),t._v(" "),r("div",{staticClass:"grid__item grid__item--12"},[r("h1",{staticClass:"text text--center order-title",attrs:{"data-testid":"cart-quantity"}},[t._v("\n      "+t._s(t.cartQuantity)+" Artikel im Warenkorb\n    ")])]),t._v(" "),t.cartIsEmpty?r("div",{staticClass:"empty-cart grid__item grid__item--l-10 grid__item--xl-8 grid__item--12"},[r("p",{staticClass:"text--center"},[t._v("\n      Ihr Warenkorb ist leer.\n      "),r("br"),t._v(" "),r("nuxt-link",{staticClass:"link offer-table__shop-continue",attrs:{"data-tealium-rel":"content.text.weiter-einkaufen",to:"/"}},[t._v("\n        Weiter einkaufen\n      ")])],1)]):r("div",{staticClass:"grid__item grid__item--l-10 grid__item--xl-8 grid__item--12"},[r("OrderTable",{attrs:{"coupon-editable":!0,"show-summary-texts":!1}},[r("div",{staticClass:"order-table__row order-table__footer",attrs:{slot:"footer"},slot:"footer"},[r("nuxt-link",{staticClass:"link order-table__shop-continue",attrs:{"data-tealium-rel":"content.text.weiter-einkaufen",to:"/"}},[t._v("\n          Weiter einkaufen\n        ")]),t._v(" "),r("div",{staticClass:"order-table__buy"},[r("span",{staticClass:"order-table__buy-ssl-info"},[t._v("\n            Sichere Zahlung mit SSL-Verschlüsselung\n          ")]),t._v(" "),t.isPaypalExpressVisible&&t.isPaypalExpressVisibleInCart?r("PaypalExpressCheckoutButton",{staticClass:"order-table__paypal-button",on:{"checkout:start":t.showPaypalExpressStartDialog}}):t._e(),t._v(" "),t.checkoutInitUrlSuffix?r("nuxt-link",{staticClass:"order-table__buy-button btn btn--primary",attrs:{to:"/shop/"+t.checkoutInitUrlSuffix,"data-testid":"checkout-button"}},[t._v("\n            Zur Kasse\n          ")]):t._e()],1)],1)])],1)],1):r("div",{staticClass:"cart-page cart-page--loading grid grid--center"},[r("div",{staticClass:"grid__item grid__item--12 text text--center"},[t._v("\n    Der Warenkorb wird geladen…\n  ")])])}),[],!1,null,null,null);e.default=component.exports}}]);