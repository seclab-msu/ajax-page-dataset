!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["atl-cross-domain-tracking"]=t():e.atl=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNAVAILABLE="UNAVAILABLE",t.ERROR="ERROR",t.YES="YES",t.NO="NO"},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return o})),n.d(t,"__assign",(function(){return i})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return u})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return s})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return f})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return v})),n.d(t,"__read",(function(){return h})),n.d(t,"__spread",(function(){return p})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return g})),n.d(t,"__asyncGenerator",(function(){return y})),n.d(t,"__asyncDelegator",(function(){return _})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return A})),n.d(t,"__importStar",(function(){return w})),n.d(t,"__importDefault",(function(){return C})),n.d(t,"__classPrivateFieldGet",(function(){return I})),n.d(t,"__classPrivateFieldSet",(function(){return E}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function u(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function v(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||u(e,t)}))})}function u(e,t){try{(n=o[e](t)).value instanceof g?Promise.resolve(n.value.v).then(c,s):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){u("next",e)}function s(e){u("throw",e)}function l(e,t){e(t),i.shift(),i.length&&u(i[0][0],i[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=v(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function E(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.TEST="test",e.LOCAL="local",e.DEV="dev",e.STAGE="stage",e.PROD="prod"}(t.Environment||(t.Environment={})),function(e){e.XC="xc",e.UID="uid"}(t.XIDItemType||(t.XIDItemType={})),function(e){e.NEW="NEW",e.CHANGED="CHANGED",e.EXISTING="EXISTING",e.TIMEOUT="TIMEOUT",e.ERROR="ERROR",e.UNAVAILABLE="UNAVAILABLE",e.MALFORMED="MALFORMED",e.UNKNOWN="UNKNOWN"}(t.XIDState||(t.XIDState={})),function(e){e.XC_ONLY="XC_ONLY",e.UID_ONLY="UID_ONLY",e.CACHE_ONLY="CACHE_ONLY",e.XC_UID="XC_UID",e.CACHE_XC_UID="CACHE_XC_UID"}(t.XIDGenerateMode||(t.XIDGenerateMode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(1).__exportStar(n(2),t);var r=n(10);t.XID=r.XID},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){try{return function(e){var t={},n=e.split(/ *; */);if(""===n[0])return t;return n.forEach((function(e){var n=e.split("="),r=a(n[0]),o=a(n[1]);r&&o&&(t[r]=o)})),t}(document.cookie)}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}};function i(e){try{return encodeURIComponent(e)}catch(t){return console.log("error `encode(%o)` - %o",e,t),""}}function a(e){try{return decodeURIComponent(e)}catch(t){return console.log("error `decode(%o)` - %o",e,t),""}}t.getCookie=function(e){return function(e){return o()[e]}(e)},t.getAllCookies=function(){return o()},t.setCookie=function(e,t,n){return function(e,t,n){var r,o=i(e)+"="+i((t||"").toString());return null==t&&(n.maxage=-1),n.maxage&&(r=new Date(+new Date+n.maxage)),n.path&&(o+="; path="+n.path),n.domain&&(o+="; domain="+n.domain),r&&(o+="; expires="+r.toUTCString()),n.secure&&(o+="; secure"),n.sameSite&&(o+="; samesite="+n.sameSite),document.cookie=o,o}(e,t,r.__assign({maxage:31536e6,secure:!1,path:"/",expires:null,domain:null,sameSite:"lax"},n))},t.getCrossDomainCookieOption=function(){return{sameSite:"None",domain:window.location.hostname.split(".").slice(-2).join("."),secure:!0}}},function(e,t,n){"use strict";n.r(t),function(e){var r=n(9),o=setTimeout;function i(e){return Boolean(e&&void 0!==e.length)}function a(){}function u(e){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],v(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,u._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void l(t.promise,e)}s(t.promise,r)}else(1===e._state?s:l)(t.promise,e._value)}))):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof u)return e._state=3,e._value=t,void f(e);if("function"==typeof n)return void v((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){l(e,t)}var r,o}function l(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&u._immediateFn((function(){e._handled||u._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)c(e,e._deferreds[t]);e._deferreds=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function v(e,t){var n=!1;try{e((function(e){n||(n=!0,s(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(e){if(n)return;n=!0,l(t,e)}}u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){var n=new this.constructor(a);return c(this,new d(e,t,n)),n},u.prototype.finally=r.a,u.all=function(e){return new u((function(t,n){if(!i(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function a(e,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var u=i.then;if("function"==typeof u)return void u.call(i,(function(t){a(e,t)}),n)}r[e]=i,0==--o&&t(r)}catch(e){n(e)}}for(var u=0;u<r.length;u++)a(u,r[u])}))},u.resolve=function(e){return e&&"object"==typeof e&&e.constructor===u?e:new u((function(t){t(e)}))},u.reject=function(e){return new u((function(t,n){n(e)}))},u.race=function(e){return new u((function(t,n){if(!i(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,o=e.length;r<o;r++)u.resolve(e[r]).then(t,n)}))},u._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){o(e,0)},u._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.default=u}.call(this,n(11).setImmediate)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(4),i=n(2),a=n(14),u=n(8),c=n(17);t.XC_CURRENT="atl_xid.xc";var s=function(){function e(){}return e.getCachedXID=function(){try{var e=a.getXidItemFromCache("atl_xid.current"),t=a.getCache("atl_xid.ts"),n=!1;if(e.length>0&&e[0].type===i.XIDItemType.UID?n=parseInt(t||"",10)>=(new Date).getTime()-6048e5:e.length>0&&e[0].type===i.XIDItemType.XC&&(n=parseInt(t||"",10)>=(new Date).getTime()-2592e6),n){for(var r=0,o=e;r<o.length;r++){o[r].state="EXISTING"}return e}return[]}catch(e){return[]}},e.saveXid=function(e){try{o.setCookie("atl_xid.ts",(new Date).getTime()),a.setLocalstorage("atl_xid.ts",(new Date).getTime().toString());for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];if(i.value&&i.createdAt){t.push({type:i.type,value:i.value,createdAt:i.createdAt});break}}o.setCookie("atl_xid.current",JSON.stringify(t)),a.setLocalstorage("atl_xid.current",JSON.stringify(t))}catch(e){console.error("Error setting xid cookie.")}},e.updateXc=function(t,n){try{if("prod"===t&&u.isAtlassianComDomain())return e.processAtlassianComDomainXc(n);e.saveXcLocalstorage(n)}catch(e){console.error("Error setting xc cookie.")}return n},e.getUids=function(){for(var e=a.getXidItemFromCache("atl_xid.uid")||[],t=0,n=e;t<n.length;t++){n[t].state="EXISTING"}return e},e.saveUids=function(e){try{for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n];o.value&&o.createdAt&&t.push({type:o.type,value:o.value,createdAt:o.createdAt})}t.slice(0,20),a.setLocalstorage("atl_xid.uid",JSON.stringify(t))}catch(e){console.error("Error setting uid cookie.")}},e.saveXcLocalstorage=function(e){if(e.value&&e.createdAt){var n=a.getXidFromLocalStorage(t.XC_CURRENT);if(n&&n.value===e.value)return;n&&n.value!==e.value&&(e.state="CHANGED");var r={type:e.type,value:e.value,createdAt:e.createdAt};a.setLocalstorage(t.XC_CURRENT,JSON.stringify(r))}},e.processAtlassianComDomainXc=function(n){if(n.value&&n.createdAt){var u=a.getXidFromCookie(t.XC_CURRENT);if(u){o.setCookie(t.XC_CURRENT,JSON.stringify(u),o.getCrossDomainCookieOption());var s=r.__assign({state:"EXISTING"},u);return e.saveXcLocalstorage(s),s}var l={value:c.uuidv4(),createdAt:(new Date).toISOString(),type:i.XIDItemType.XC};o.setCookie(t.XC_CURRENT,JSON.stringify(l),o.getCrossDomainCookieOption());var f=r.__assign({state:"NEW"},l);return e.saveXcLocalstorage(f),f}return n},e}();t.Storage=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(16);t.domain=function(e){for(var t=0,n=function(e){var t=o.parse(e).hostname.split("."),n=t[t.length-1],r=[];if(4===t.length&&!isNaN(parseInt(n,10)))return r;if(t.length<=1)return r;for(var i=t.length-2;i>=0;--i)r.push(t.slice(i).join("."));return r}(e);t<n.length;t++){var i=n[t],a={domain:"."+i};if(r.setCookie("__tld__",1,a),r.getCookie("__tld__"))return r.setCookie("__tld__",null,a),i}return""},t.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}},t.isAtlassianComDomain=function(){return/atlassian\.com$/.test(window.location.hostname)}},function(e,t,n){"use strict";t.a=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=r.__importDefault(n(5)),i=n(7),a=n(18),u=n(45),c=n(46),s=n(2);t.defaultTimeout=5e3;var l=function(){function e(e,n){if(void 0===e&&(e="local"),void 0===n&&(n=t.defaultTimeout),this.storageEnabled=!0,this.timeoutUid={type:s.XIDItemType.UID,state:"TIMEOUT"},!e)throw new Error("Missing env configuration");this.env=e;var r="prod"===this.env?1e4:3e4;n>=2e3&&n<=r?this.timeout=n:("prod"!==this.env&&console.log("timeout configuration must be in the range of [2000, "+r+"] seconds"),this.timeout=t.defaultTimeout)}return e.prototype.getTimeoutPromise=function(e){var t=this;return new o.default((function(n){setTimeout((function(){n([e])}),(t.timeout-1e3)/2)}))},e.prototype.getXcPromiseAndSave=function(){var e=this;return new o.default((function(t){e.getXc().then((function(n){e.storageEnabled&&i.Storage.saveXid([n]),t([n])}))}))},e.prototype.getUidPromiseAndSave=function(){var e=this;return new o.default((function(t){var n=function(){var n=[];e.storageEnabled&&(n=i.Storage.getUids());var r=a.UIDGenerator.getValue(n);e.storageEnabled&&(i.Storage.saveUids(r),i.Storage.saveXid(r)),t(r)},r=window.requestIdleCallback;r?r(n):setTimeout(n,1e3)}))},e.prototype.getXidPromiseInXcUidOnly=function(){var e=this;return this.getXcPromiseAndSave().then((function(t){return t&&t.length>0&&t[0].createdAt&&t[0].value?t:(e.getTimeoutPromise(e.timeoutUid),e.getUidPromiseAndSave().then((function(e){return r.__spreadArrays(e,t)})))}))},e.prototype.getXidCallbackForPromise=function(e,t){var n;void 0===e&&(e=s.XIDGenerateMode.CACHE_XC_UID),void 0===t&&(t=!0);return this.getXidPromise(e,t).then((function(e){return function(){return t=e,n||(n=t.map((function(e){return"NEW"===e.state||"CHANGED"===e.state?{state:"EXISTING",type:e.type,createdAt:e.createdAt,value:e.value}:e})),t);var t}}))},e.prototype.getXidPromise=function(e,t){var n=this;void 0===e&&(e=s.XIDGenerateMode.CACHE_XC_UID),void 0===t&&(t=!0),this.storageEnabled=t;var r=e===s.XIDGenerateMode.CACHE_ONLY||e===s.XIDGenerateMode.CACHE_XC_UID?i.Storage.getCachedXID():[];switch(e){case s.XIDGenerateMode.XC_ONLY:return c.promiseWithTimer((function(){return n.getXcPromiseAndSave()}));case s.XIDGenerateMode.UID_ONLY:return c.promiseWithTimer((function(){return o.default.race([n.getTimeoutPromise(n.timeoutUid),n.getUidPromiseAndSave()])}));case s.XIDGenerateMode.XC_UID:return c.promiseWithTimer((function(){return n.getXidPromiseInXcUidOnly()}));case s.XIDGenerateMode.CACHE_ONLY:return o.default.resolve(r);case s.XIDGenerateMode.CACHE_XC_UID:default:return r.length>0?o.default.resolve(r):c.promiseWithTimer((function(){return n.getXidPromiseInXcUidOnly()}))}},e.prototype.getXc=function(){return u.XCGenerator.getValue(this.env,(this.timeout-1e3)/2,this.storageEnabled)},e.prototype.getUidDetails=function(){return a.UIDGenerator.getDetails()},e}();t.XID=l},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(12),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(6))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,i,a,u,c=1,s={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){i.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(a="setImmediate$"+Math.random()+"$",u=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",u,!1):e.attachEvent("onmessage",u),r=function(t){e.postMessage(a+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return s[c]=o,r(c),c++},d.clearImmediate=v}function v(e){delete s[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=s[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{v(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(6),n(13))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,s=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&v())}function v(){if(!l){var e=u(d);l=!0;for(var t=s.length;t;){for(c=s,s=[];++f<t;)c&&c[f].run();f=-1,t=s.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new h(e,t)),1!==s.length||l||u(v)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(15),i=function(e){try{var t=JSON.parse(e);if(t instanceof Array){for(var n=!0,r=0,i=t;r<i.length;r++){var a=i[r];n=n&&o.checkXidValid(a)}return n?t:void 0}return o.checkXidValid(t)?t:void 0}catch(e){return}};function a(e){var t=r.getCookie(e);return i(t)}function u(e){var t="";try{t=localStorage.getItem(e)||""}catch(e){}return i(t)}t.getXidFromCookie=a,t.getXidFromLocalStorage=u,t.setLocalstorage=function(e,t){try{localStorage.setItem(e,t)}catch(e){}},t.getCache=function(e){return r.getCookie(e)||function(e){try{return localStorage.getItem(e)||""}catch(e){}}(e)},t.getXidItemFromCache=function(e){return a(e)||u(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.checkXidValid=function(e){return!(e.type!==r.XIDItemType.UID&&e.type!==r.XIDItemType.XC||!e.value||!Date.parse(e.createdAt))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=function(e){var n=document.createElement("a");return n.href=e,{href:n.href,host:n.host||location.host,port:"0"===n.port||""===n.port?t.port(n.protocol):n.port,hash:n.hash,hostname:n.hostname||location.hostname,pathname:"/"!==n.pathname.charAt(0)?"/"+n.pathname:n.pathname,protocol:n.protocol&&":"!==n.protocol?n.protocol:location.protocol,search:n.search,query:n.search.slice(1)}},t.isAbsolute=function(e){return 0===e.indexOf("//")||!!~e.indexOf("://")},t.isRelative=function(e){return!t.isAbsolute(e)},t.isCrossDomain=function(e){var n=t.parse(e),r=t.parse(window.location.href);return n.hostname!==r.hostname||n.port!==r.port||n.protocol!==r.protocol},t.port=function(e){switch(e){case"http:":return 80;case"https:":return 443;default:return location.port}},t.getParam=function(e){var t=window.location.href.match("[?&]"+e+"=([^&#]+)");return t?t.pop():""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(19),i=n(36),a=n(0),u=n(38),c=n(41),s=n(3),l=n(44),f=function(){function e(){}return e.getDetails=function(){try{return{browser:{browserDefaultEvalLength:o.browserDefaultEvalLength(),canWriteCookie:o.canWriteCookie(),getBrowserVendor:o.getBrowserVendor(),getHardwareConcurrency:o.getHardwareConcurrency(),getLanguage:o.getLanguage(),getPlatform:o.getPlatform(),getPlugins:o.getPlugins(),getProductSub:o.getProductSub(),getTimeZone:o.getTimeZone(),getTimeZoneOffset:o.getTimeZoneOffset(),getUserAgent:o.getUserAgent(),isIndexedDBAvailable:o.isIndexedDBAvailable(),isLocalStorageAvailable:o.isLocalStorageAvailable(),isSessionStorageAvailable:o.isSessionStorageAvailable(),isTestingBot:o.isTestingBot(),isWebDriver:o.isWebDriver()},canvas:{studyPrint:i.studyPrint()},font:{jsFonts:(new u.DetectFonts).detect()},webGL:{getWebGL:c.getWebGL()}}}catch(e){return a.ERROR}},e.getValue=function(e){try{var t=[o.browserDefaultEvalLength(),o.canWriteCookie(),o.getBrowserVendor(),o.getHardwareConcurrency(),o.getLanguage(),o.getPlatform(),o.getPlugins(),o.getProductSub(),o.getTimeZone(),o.getTimeZoneOffset(),o.getUserAgent(),o.isIndexedDBAvailable(),o.isLocalStorageAvailable(),o.isSessionStorageAvailable(),o.isTestingBot(),o.isWebDriver(),i.studyPrint(),(new u.DetectFonts).result(),c.getWebGL()],n=l.x64hash128(t.join("|"),64),a=void 0;return"EXISTING"===(a=e.length?e[0].value===n?"EXISTING":"CHANGED":"NEW")?e:r.__spreadArrays([{type:s.XIDItemType.UID,createdAt:(new Date).toISOString(),state:a,value:n}],e)}catch(e){return[{type:s.XIDItemType.UID,state:"ERROR"}]}},e}();t.UIDGenerator=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20);t.browserDefaultEvalLength=r.browserDefaultEvalLength;var o=n(21);t.canWriteCookie=o.canWriteCookie;var i=n(22);t.getBrowserVendor=i.getBrowserVendor;var a=n(23);t.getHardwareConcurrency=a.getHardwareConcurrency;var u=n(24);t.getLanguage=u.getLanguage;var c=n(25);t.getPlatform=c.getPlatform;var s=n(26);t.getPlugins=s.getPlugins;var l=n(27);t.getProductSub=l.getProductSub;var f=n(28);t.getTimeZone=f.getTimeZone;var d=n(29);t.getTimeZoneOffset=d.getTimeZoneOffset;var v=n(30);t.getUserAgent=v.getUserAgent;var h=n(31);t.isIndexedDBAvailable=h.isIndexedDBAvailable;var p=n(32);t.isLocalStorageAvailable=p.isLocalStorageAvailable;var m=n(33);t.isSessionStorageAvailable=m.isSessionStorageAvailable;var g=n(34);t.isTestingBot=g.isTestingBot;var y=n(35);t.isWebDriver=y.isWebDriver},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.browserDefaultEvalLength=function(){try{return eval.toString().length||0}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.canWriteCookie=function(){try{return document.cookie="cookietest=1",-1!==document.cookie.indexOf("cookietest=")?(document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",r.YES):r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getBrowserVendor=function(){try{return navigator.vendor||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHardwareConcurrency=function(){try{var e=parseInt(navigator.hardwareConcurrency.toString(),10);return isNaN(e)?1:e}catch(e){return 1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getLanguage=function(){try{return navigator.language||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getPlatform=function(){try{return navigator.platform||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getPlugins=function(){try{var e="Microsoft Internet Explorer"===navigator.appName,t="Netscape"===navigator.appName,n=/Trident/.test(navigator.userAgent);if(e||t&&n)return r.UNAVAILABLE;for(var o=navigator.plugins,i="",a=0;a<o.length;a++)for(var u=navigator.plugins[a],c=u.name,s=u.filename,l=u.length,f=0;f<l;f++){var d=u[f];d&&(i=i+c+","+s+","+d.type+"|")}return i}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getProductSub=function(){try{return navigator.productSub||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getTimeZone=function(){try{return window.Intl&&window.Intl.DateTimeFormat?(new window.Intl.DateTimeFormat).resolvedOptions().timeZone:r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getTimeZoneOffset=function(){try{return(new Date).getTimezoneOffset()||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getUserAgent=function(){try{return navigator.userAgent||r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.isIndexedDBAvailable=function(){try{return window.indexedDB?r.YES:r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.isLocalStorageAvailable=function(){try{return window.localStorage?r.YES:r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.isSessionStorageAvailable=function(){try{return window.sessionStorage?r.YES:r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.isTestingBot=function(){try{return["webdriver"in window,"_Selenium_IDE_Recorder"in window,"callSelenium"in window,"_selenium"in window,"__webdriver_script_fn"in document,"__driver_evaluate"in document,"__webdriver_evaluate"in document,"__selenium_evaluate"in document,"__fxdriver_evaluate"in document,"__driver_unwrapped"in document,"__webdriver_unwrapped"in document,"__selenium_unwrapped"in document,"__fxdriver_unwrapped"in document,"__webdriver_script_func"in document,null!==document.documentElement.getAttribute("selenium"),null!==document.documentElement.getAttribute("webdriver"),null!==document.documentElement.getAttribute("driver")].some((function(e){return!0===e}))?r.YES:r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.isWebDriver=function(){try{return navigator.webdriver?r.YES:r.NO}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37);t.studyPrint=r.studyPrint},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.studyPrint=function(){try{var e=document.createElement("canvas");e.width=240,e.height=140,e.style.display="inline";var t=e.getContext("2d");return t?(t.rect(0,0,10,10),t.rect(2,2,6,6),t.isPointInPath(5,5,"evenodd"),t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.font="11pt no-real-font-123",t.fillText("Cwm fjordbank ðŸ˜ƒ gly",2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText("Cwm fjordbank ðŸ˜ƒ gly",4,45),t.globalCompositeOperation="multiply",t.fillStyle="rgb(255,0,255)",t.beginPath(),t.arc(50,50,50,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(0,255,255)",t.beginPath(),t.arc(100,50,50,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(255,255,0)",t.beginPath(),t.arc(75,100,50,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(255,0,255)",t.arc(75,75,75,0,2*Math.PI,!0),t.arc(75,75,25,0,2*Math.PI,!0),t.fill("evenodd"),e.toDataURL()):r.UNAVAILABLE}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(39);t.DetectFonts=r.DetectFonts},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(40),i=function(){function e(){var e=this;this.baseFonts=["monospace","sans-serif","serif"],this.testString="mmmmmmmmmmlli",this.testSize="72px",this.defaultWidth={},this.defaultHeight={},this.createSpan=function(){var t=document.createElement("span");return t.style.position="absolute",t.style.left="-9999px",t.style.fontSize=e.testSize,t.style.fontStyle="normal",t.style.fontWeight="normal",t.style.letterSpacing="normal",t.style.lineBreak="auto",t.style.lineHeight="normal",t.style.textTransform="none",t.style.textAlign="left",t.style.textDecoration="none",t.style.textShadow="none",t.style.whiteSpace="normal",t.style.wordBreak="normal",t.style.wordSpacing="normal",t.innerHTML=e.testString,t},this.createSpanWithFonts=function(t,n){var r=e.createSpan();return r.style.fontFamily="'"+t+"',"+n,r},this.initializeBaseFontsSpans=function(){for(var t=[],n=0,r=e.baseFonts;n<r.length;n++){var o=r[n],i=e.createSpan();i.style.fontFamily=o,e.baseFontsDiv.appendChild(i),t.push(i)}return t},this.initializeFontsSpans=function(){for(var t={},n=0,r=o.fontsToCheck;n<r.length;n++){for(var i=r[n],a=[],u=0,c=e.baseFonts;u<c.length;u++){var s=c[u],l=e.createSpanWithFonts(i,s);e.fontsDiv.appendChild(l),a.push(l)}t[i]=a}return t},this.isFontAvailable=function(t){for(var n=!1,r=0;r<e.baseFonts.length;r++){var o=t[r].offsetWidth,i=e.defaultWidth[e.baseFonts[r]],a=t[r].offsetHeight,u=e.defaultHeight[e.baseFonts[r]];if(n=o!==i||a!==u)return n}return n},this.bodyElement=document.getElementsByTagName("body")[0],this.baseFontsDiv=document.createElement("div"),this.fontsDiv=document.createElement("div")}return e.prototype.detect=function(){var e=this.initializeBaseFontsSpans();this.bodyElement.appendChild(this.baseFontsDiv);for(var t=0;t<this.baseFonts.length;t++)this.defaultWidth[this.baseFonts[t]]=e[t].offsetWidth,this.defaultHeight[this.baseFonts[t]]=e[t].offsetHeight;var n=this.initializeFontsSpans();this.bodyElement.appendChild(this.fontsDiv);for(var r=[],i=0,a=o.fontsToCheck;i<a.length;i++){var u=a[i],c=0;this.isFontAvailable(n[u])&&(c=1),r.push(c)}return this.bodyElement.removeChild(this.fontsDiv),this.bodyElement.removeChild(this.baseFontsDiv),r.join("|")},e.prototype.result=function(){try{return this.detect()}catch(e){return r.ERROR}},e}();t.DetectFonts=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fontsToCheck=["Adobe Garamond","Adobe Hebrew","Agency FB","Airstream","Andale Mono","Aparajita","Arial","BN Manson Nights","Baskerville","BlackChancery","Book Antiqua","Bookman Old Style","CG Times","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Chalkboard","Comic Sans","Comic Sans MS","Consolas","Cooper Black","Corbel","Courier","Courier New","Curlz MT","DS Sans Serif","Degrassi","Didot","Ebrima","GOST Common","Geneva","Georgia","Gulim","Heiti TC","Helvetica","Helvetica Neue","Hoefler Text","Impact","Kalinga","Letter Gothic","Lithos Pro","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","Lucida Handwriting","Lucida Sans","MS Gothic","MS Outlook","MS PGothic","MYRIAD","Malgun Gothic","Mangal","MapInfo Miscellaneous","Meiryo UI","Monaco","Monotype Corsiva","NSimSun","OSAKA","Palatino","Pickwick","Playbill","Pristina","Segoe Print","Segoe Script","Segoe UI","Shonar Bangla","Snell Roundhand","Styllo","Tahoma","Times","Times New Roman","Trebuchet MS","Verdana","Wingdings"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(42);t.getWebGL=r.getWebGL},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(43);t.getWebGL=function(){try{var e=o.getContext();if(void 0===e)return r.UNAVAILABLE;if(e&&"object"==typeof e&&e.context){var t=e.context,n=t.getExtension("WEBGL_debug_renderer_info");return null!==n?[t.getParameter(n.UNMASKED_RENDERER_WEBGL),t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE)].join("|"):r.UNAVAILABLE}}catch(e){return r.ERROR}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getContext=function(){if(window.WebGLRenderingContext)for(var e=document.createElement("canvas"),t=0,n=["webgl","experimental-webgl","moz-webgl","webkit-3d"];t<n.length;t++){var o=n[t];try{var i=e.getContext(o);if(i&&i instanceof WebGLRenderingContext&&"function"==typeof i.getParameter)return{name:o,context:i}}catch(e){return r.ERROR}}return r.UNAVAILABLE}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},o=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},i=function(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])},a=function(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},u=function(e,t){return[e[0]^t[0],e[1]^t[1]]},c=function(e){return e=u(e,[0,e[0]>>>1]),e=o(e,[4283543511,3981806797]),e=u(e,[0,e[0]>>>1]),e=o(e,[3301882366,444984403]),e=u(e,[0,e[0]>>>1])};t.x64hash128=function(e,t){t=t||0;for(var n=(e=e||"").length%16,s=e.length-n,l=[0,t],f=[0,t],d=[0,0],v=[0,0],h=[2277735313,289559509],p=[1291169091,658871167],m=0;m<s;m+=16)d=[255&e.charCodeAt(m+4)|(255&e.charCodeAt(m+5))<<8|(255&e.charCodeAt(m+6))<<16|(255&e.charCodeAt(m+7))<<24,255&e.charCodeAt(m)|(255&e.charCodeAt(m+1))<<8|(255&e.charCodeAt(m+2))<<16|(255&e.charCodeAt(m+3))<<24],v=[255&e.charCodeAt(m+12)|(255&e.charCodeAt(m+13))<<8|(255&e.charCodeAt(m+14))<<16|(255&e.charCodeAt(m+15))<<24,255&e.charCodeAt(m+8)|(255&e.charCodeAt(m+9))<<8|(255&e.charCodeAt(m+10))<<16|(255&e.charCodeAt(m+11))<<24],d=o(d,h),d=i(d,31),d=o(d,p),l=u(l,d),l=i(l,27),l=r(l,f),l=r(o(l,[0,5]),[0,1390208809]),v=o(v,p),v=i(v,33),v=o(v,h),f=u(f,v),f=i(f,31),f=r(f,l),f=r(o(f,[0,5]),[0,944331445]);d=[0,0],v=[0,0];var g=s;switch(n){case 15:v=u(v,a([0,e.charCodeAt(g+14)],48));case 14:v=u(v,a([0,e.charCodeAt(g+13)],40));case 13:v=u(v,a([0,e.charCodeAt(g+12)],32));case 12:v=u(v,a([0,e.charCodeAt(g+11)],24));case 11:v=u(v,a([0,e.charCodeAt(g+10)],16));case 10:v=u(v,a([0,e.charCodeAt(g+9)],8));case 9:v=u(v,[0,e.charCodeAt(g+8)]),v=o(v,p),v=i(v,33),v=o(v,h),f=u(f,v);case 8:d=u(d,a([0,e.charCodeAt(g+7)],56));case 7:d=u(d,a([0,e.charCodeAt(g+6)],48));case 6:d=u(d,a([0,e.charCodeAt(g+5)],40));case 5:d=u(d,a([0,e.charCodeAt(g+4)],32));case 4:d=u(d,a([0,e.charCodeAt(g+3)],24));case 3:d=u(d,a([0,e.charCodeAt(g+2)],16));case 2:d=u(d,a([0,e.charCodeAt(g+1)],8));case 1:d=u(d,[0,e.charCodeAt(g)]),d=o(d,h),d=i(d,31),d=o(d,p),l=u(l,d)}return l=u(l,[0,e.length]),f=u(f,[0,e.length]),l=r(l,f),f=r(f,l),l=c(l),f=c(f),l=r(l,f),f=r(f,l),("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)+("00000000"+(f[0]>>>0).toString(16)).slice(-8)+("00000000"+(f[1]>>>0).toString(16)).slice(-8)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1).__importDefault(n(5)),o=n(8),i=n(7),a=n(3),u=function(){function e(){}return e.getValue=function(t,n,o){void 0===n&&(n=3e3),void 0===o&&(o=!0);var u=e.getHost(t),c=u?"https://"+u:"",s=c?c+"?t="+(new Date).getTime():"",l=e.addFrame(s);return new r.default((function(r){var u=function(n){if("xcReady"===n.data.type&&n.origin===c){var a=e.messageToXc(n);o&&(a=i.Storage.updateXc(t,a)),r(a),e.removeFrame(l,u)}};window.addEventListener("message",u),setTimeout((function(){r({type:a.XIDItemType.XC,state:"TIMEOUT"}),e.removeFrame(l,u)}),n)}))},e.messageToXc=function(e){var t=e.data,n=t.xc,r=t.ts,o=t.state;return n&&Date.parse(r)&&o?{type:a.XIDItemType.XC,value:n,createdAt:r,state:o}:{type:a.XIDItemType.XC,state:o||"MALFORMED"}},e.addFrame=function(e){var t=document.createElement("iframe");return t.id="xc-"+(new Date).getTime(),t.src=e,t.style.display="none",t.style.position="fixed",document.body.appendChild(t),t},e.removeFrame=function(e,t){document.body.contains(e)&&(document.body.removeChild(e),window.removeEventListener("message",t))},e.getHost=function(e){switch(e){case"stage":return"xxid.staging.atl-paas.net";case"prod":return o.isAtlassianComDomain()?"xxid.atl-paas.net":"xxid.atlassian.com";case"test":return"";case"local":case"dev":default:return"xxid.dev.atl-paas.net"}},e}();t.XCGenerator=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.promiseWithTimer=function(e){var t=function(e){var t={type:r.XIDItemType.UID,state:"MALFORMED"};return function(e,t){var n=e.state,r=e.type,i=e.value,a=e.createdAt;return e&&n&&r&&i&&a&&("NEW"===n||"CHANGED"===n)?{state:n,type:r,value:i,createdAt:a,timeTaken:o()-t}:null}(e,n)||function(e){var t=e.state,n=e.type,r=e.value,o=e.createdAt;return e&&t&&n&&r&&o&&"EXISTING"===t?{state:t,type:n,value:r,createdAt:o}:null}(e)||function(e){var t=e.state,n=e.type;if(e&&t&&n)switch(t){case"TIMEOUT":case"ERROR":case"UNAVAILABLE":case"UNKNOWN":case"MALFORMED":return{type:n,state:t}}return null}(e)||function(e){var t=e.type;return e&&t?{type:t,state:"MALFORMED"}:null}(e)||t},n=o();return e().then((function(e){return e.map((function(e){return t(e)}))}))};var o=function(){return performance&&performance.now?performance.now():(new Date).getTime()}}])}));