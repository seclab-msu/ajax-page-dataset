var ace=ace||{};ace.analytics=ace.analytics||{},ace.analytics.Initializer=function(){"use strict";return{autoTrack:function(){var e=ace.analytics.LaunchDarkly.getFeatureFlagForUser("opted-in-sites")||[],a=ace.analytics.LaunchDarkly.getFeatureFlagForUser("opted-in-all-sites")||[];window.location.host&&-1<e.indexOf(window.location.host)?(ace.analytics.Tracking.autoTrackButtons(!1),ace.analytics.Tracking.autoTrackLinks(!1),ace.analytics.Tracking.autoTrackVideos()):window.location.host&&-1<a.indexOf(window.location.host)&&(ace.analytics.Tracking.autoTrackButtons(!0),ace.analytics.Tracking.autoTrackLinks(!0),ace.analytics.Tracking.autoTrackVideos())},captureUTMs:function(){ace.analytics.utms=ace.mkt.Helpers.getUtms({utm_campaign:"",utm_medium:"",utm_source:"",utm_content:"",utm_term:""})},gaIntegration:function(){var e=ace.mkt.Helpers.emailAddressIsDetected(),a="/path-contained-email-address";"undefined"!=typeof ga&&(ga("require","linker"),ga("linker:autoLink",["atlassian.com","bitbucket.org","hipchat.com","attendease.com","get.atlassian.com","eegeventsite.secure.force.com","atlassian.swoogo.com"]),e&&(ace.mkt.Helpers.urlContainsEmail(window.location.href)&&(ga("set","location",window.location.origin+a),ga("set","path",a)),ace.mkt.Helpers.urlContainsEmail(document.referrer)&&ga("set","referrer",ace.mkt.Helpers.hostnameFromUrl(document.referrer)+a)))},globalCallReady:function(){"function"==typeof window.segmentPageReady?window.segmentPageReady():"function"==typeof window.analyticsPageReady&&window.analyticsPageReady(),"function"==typeof window.optimizelyReady&&window.optimizelyReady(),"function"==typeof window.metricsReady&&window.metricsReady()},init:function(e,a,t,n,i,c,o){ace.analytics.Metrics.loadTimestamp=c,ace.analytics.Gtm.initialize(e),ace.analytics.Initializer.captureUTMs(),"object"==typeof i&&null!==i||(i={}),"object"==typeof t&&null!==t||(t={}),ace.analytics.Initializer.isMarketingEvent(a="object"==typeof a&&null!==a?a:{}),ace.analytics.Initializer.initSource=e,window.ace.analytics.Tracking.pageViewOptions=t,ace.analytics.SegmentIO.initSegment(e,i),ace.mkt.Helpers.addActualUrl(a),!0===n&&ace.analytics.Tracking.pageView(null,null,a,t),ace.analytics.Initializer.autoTrack(),ace.analytics.Initializer.gaIntegration(),ace.analytics.SegmentIO.segmentDoReady(),ace.analytics.Initializer.initGAS(a),ace.analytics.Initializer.initSnowplow(),ace.analytics.SegmentIO.loadSegmentFlag||ace.analytics.Initializer.globalCallReady()},initGAS:function(e){ace.analytics.GASv3.loadGASFlag&&(e=e.gasv3Product||"marketing",ace.analytics.GASv3.loadGAS(e))},initSnowplow:function(){ace.analytics.Snowplow&&ace.analytics.Snowplow.loadSnowplowFlag&&ace.analytics.Snowplow.loadSnowplow()},initAnalytics:function(e,a){ace.analytics.Initializer.init(e,{},{},!1,a)},initWithPageAnalytics:function(e,a,t,n,i){ace.analytics.Initializer.init(e,a,t,!0,n,i)},setXID:function(e){ace.analytics.Tracking.xid=e},isMarketingEvent:function(e){ace.analytics.GASv3.loadGASFlag&&("boolean"!=typeof e.isMarketingEvent?ace.analytics.GASv3.isMarketingEvent=!0:ace.analytics.GASv3.isMarketingEvent=e.isMarketingEvent)}}}(),(ace=ace||{}).analytics=ace.analytics||{},ace.analytics.Tracking=function(){"use strict";function i(e){"object"==typeof e&&null!==e||(a=e,e={},void 0!==a&&(e.data=a));var a=ace.mkt.Cookie.readCookie("login_user_detected"),t=ace.analytics.Identity.getMarketoId(),a=(null!==a&&(e.loginUserDetected=a),ace.analytics.Tracking.bxpGatewayRequestId||(ace.analytics.Tracking.bxpGatewayRequestId=ace.mkt.Cookie.readCookie("bxp_gateway_request_id")),ace.analytics.Tracking.bxpGatewayRequestId&&(e.bxpGatewayRequestId=ace.analytics.Tracking.bxpGatewayRequestId),e.pageViewId=ace.analytics.Tracking.getPageViewId(),e.atlEventId=ace.mkt.Guid.guid(),e.atlJSVersion=ace.analytics.version||"1.0.0",e.browserLanguages=navigator.languages,e.category=e.category||("undefined"!==document.title?document.title.trim().replace(/\W+/g,"_"):""),e[ace.analytics.Cohort.ATL_COHORT]=ace.analytics.Cohort.readWriteAtlCohort(),ace.analytics.Optimizely.isDemandbaseAvailable()&&(e.demandbase=e.demandbase||ace.analytics.Optimizely.getDemandbase()),ace.analytics.Optimizely.isInitialized()&&(e.optimizelyCampaigns=ace.analytics.Optimizely.getCampaigns()),ace.analytics.utms);return a&&(e.campaign={name:a.utm_campaign,medium:a.utm_medium,source:a.utm_source,content:a.utm_content,term:a.utm_term}),e.clientSessionId=ace.analytics.Tracking.readWriteSessionCookie(),ace.analytics.Tracking.xid&&(e.atlXid=ace.analytics.Tracking.xid),e.marketoId=t||"",e}function c(){return null!==document.querySelector('script[src*="atl-analytics"]')?"atl-analytics":null!==document.querySelector('script[src*="atl-global"]')?"atl-global":null}function r(e){try{"INPUT"===e.target.tagName?a=""!==e.target.value?e.target.value:e.target.textContent:""===(a=""===(a=""===(a=""===(a=e.target.textContent)?e.target.parentNode.textContent:a)?e.target.title:a)?e.target["aria-label"]:a)&&(a=e.target.className);var a,t=e.target.href||"",n=e.target.getAttribute("data-track-event")||e.currentTarget.getAttribute("data-track-event")||"Clicked-Auto-CTA",i={label:void 0!==a?a.toLowerCase().trim().replace(/ /g,"-"):"",href:t},c=["eventContainer","eventColumn","eventComponent","uuid","event","inputValue","parentLabel","label","productKey","productVersion","productEdition","productPlatform","schemaVersion"];if(e.target.dataset){var o,r,s=[];for(o in e.target.dataset)"track-event"!==o&&e.target.dataset.hasOwnProperty(o)&&(c.includes(o)?i[o]=e.target.dataset[o]:((r={})[o]=e.target.dataset[o],s.push(r)));i.dataSet=s}ace.analytics.Tracking.trackEvent(n,i)}catch(e){"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(e)}}function o(e,a){try{var t=(void 0!==e.className?e:e.parentNode).className,n=void 0!==e.textContent?e.textContent:"",i=void 0!==document.title?document.title.replace(/\W+/g,"_").trim():"";ace.analytics.Tracking.trackEvent(a,{className:t,category:i,label:n,_sio:ace.mkt.Cookie.readCookie("_sio")||"",_atl_path:ace.mkt.Cookie.readCookie("__atl_path")||""})}catch(e){"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(e)}}function s(e){return e.classList.contains("doNotAutoTrack")}return{autoTrackButtons:function(e){try{for(var a=e?"button, input[type='submit'], input[type='button']":"button, input[type='submit']",t=document.querySelectorAll(a),n=0;n<t.length;n++)s(t[n])||t[n].addEventListener("click",r)}catch(e){"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(e)}},autoTrackLinks:function(e){try{for(var a=[],t=e?"a, .external-link":"a[class*='button'], a[class*='btn'], .external-link",n=document.querySelectorAll(t),i=0;i<n.length;i++){var c=n[i];(e||50<=c.offsetWidth||-1!==c.className.indexOf("cta")||-1!==c.className.indexOf("external-link"))&&a.push(c)}for(var o=0;o<a.length;o++)s(a[o])||a[o].addEventListener("click",r)}catch(e){"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(e)}},autoTrackVideos:function(){try{for(var e=document.querySelectorAll("div[class*='videoPlayButton'], .video-link, .video_link, .customer-story-video-link"),a=document.querySelectorAll("div[class='overlay'], .modal.video .close"),t=function(){o(this,"Opened Video")},n=function(){o(this,"Closed Video")},i=0;i<e.length;i++)e[i].addEventListener("click",t);for(var c=0;c<a.length;c++)a[c].addEventListener("click",n)}catch(e){"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(e)}},enrichEventData:i,getWrapperName:c,logError:function(e,a,t,n){var i=ace.analytics.SegmentIO.getAnonymousId();ace.mkt.Helpers.logEvent(e,i,"atl-globalError",{error:a,data:t},n)},trackEvent:function(e,a){a=ace.analytics.Tracking.enrichEventData(a),ace.analytics.SegmentIO.trackEvent(e,a),ace.analytics.GASv3.sendUIEvent(e,a),ace.analytics.Snowplow.trackSelfDescribingEvent(a),ace.analytics.Gtm.track(a,e)},sendGasV3TrackEvent:function(e,a,t,n,i){ace.analytics.GASv3.sendTrackEvent(e,a,t,n,i)},trackUnloadEvent:function(e,a,t){a=ace.analytics.Tracking.enrichEventData(a),t&&"function"==typeof t.addEventListener?t.addEventListener("beforeunload",function(){ace.analytics.SegmentIO.sendTrackBeacon(e,a),ace.analytics.GASv3.sendUIBeacon(e,a)}):(ace.analytics.SegmentIO.sendTrackBeacon(e,a),ace.analytics.GASv3.sendUIBeacon(e,a))},pageView:function(e,a,t,n){"object"==typeof a&&void 0===t&&(t=a,a=e,e=null),(t=i(t)).wrapperName=c(),ace.analytics.Tracking.destinationFlag&&(t.destinationFlag=ace.analytics.Tracking.destinationFlag),window.cmsPageVariant&&(t.cmsPageVariant=window.cmsPageVariant),!0===ace.analytics.Tracking.switchOrder?(ace.analytics.GASv3.sendScreenEvent(a,t),ace.analytics.SegmentIO.trackPage(e,a,t,n),ace.analytics.Gtm.page(a,e,t)):(ace.analytics.Gtm.page(a,e,t),ace.analytics.SegmentIO.trackPage(e,a,t,n),ace.analytics.GASv3.sendScreenEvent(a,t)),ace.analytics.Snowplow.trackPageView(t)},getPageViewId:function(){return ace.analytics.Tracking.pageViewId||(ace.analytics.Tracking.pageViewId=ace.mkt.Guid.guid()),ace.analytics.Tracking.pageViewId},readWriteSessionCookie:function(){var e=ace.mkt.Cookie.readCookie("atl_session")||Math.guid();return ace.mkt.Cookie.writeCookieInSeconds&&ace.mkt.Cookie.writeCookieInSeconds("atl_session",e,1800),e},sendGasV3OperationalEvent:function(e,a,t,n,i){ace.analytics.GASv3.sendOperationalEvent(e,a,t,n,i)}}}(),(ace=ace||{}).analytics=ace.analytics||{},ace.analytics.Identity=function(){"use strict";var i="seg_xid",c={},e=["trello","blog_trello_production","blog_trello_staging","info_trello_production","info_trello_staging"],a=["trello.com","trellis.coffee"];return{autoIdentify:function(){var e=ace.mkt.Helpers.emailAddressIsDetected(),a=ace.analytics.Identity.getAtlassianUserId(),t=ace.mkt.Cookie.readCookie(i);e&&(ace.analytics.Tracking.pageViewOptions.integrations={All:!1,"Google Analytics":!0},ace.mkt.Helpers.urlContainsEmail(window.location.href)&&ace.mkt.Helpers.addCleanedUrlAndPaths(c),ace.mkt.Helpers.urlContainsEmail(document.referrer)&&ace.mkt.Helpers.addCleanedReferrer(c));try{var n=decodeURIComponent(ace.mkt.Cookie.readCookie("optimizelyBuckets"));"null"!==n&&(c.optimizelyBuckets=JSON.parse(n))}catch(e){"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(e,"error reading optimizelyBuckets cookie value")}try{c.anonymous_id=ace.analytics.SegmentIO.getAnonymousId()}catch(e){"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(e,"error reading window.analytics.user().anonymousId() in identify")}try{c[ace.analytics.Cohort.ATL_COHORT]=ace.analytics.Cohort.readWriteAtlCohort()}catch(e){"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(e,"error reading or writing cohort in ace.analytics.Cohort.readWriteAtlCohort() in identify")}(a||t)&&ace.analytics.Identity.identify(a,c)},identify:function(e,a){e=void 0!==e&&"null"!==e&&e,a=a&&"object"==typeof a?a:{};var t=ace.mkt.Cookie.readCookie(i);if(e&&(ace.analytics.Identity.segmentIdentify?ace.analytics.Identity.segmentIdentify(e,a,ace.analytics.Tracking.pageViewOptions):window.analytics.identify(e,a,ace.analytics.Tracking.pageViewOptions)),e||t){t=e,e=a;e.atlassian_id=t,e.optimizely_end_user_id=ace.analytics.Optimizely.getVisitorId(),e.atlJSVersion=ace.analytics.version||"1.0.0";try{e.ga_clientid=ace.mkt.Cookie.readCookie("_ga")}catch(e){"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(e)}ace.analytics.Tracking.segmentTrack?ace.analytics.Tracking.segmentTrack("known_identifiers",e,ace.analytics.Tracking.pageViewOptions):window.analytics.track("known_identifiers",e,ace.analytics.Tracking.pageViewOptions)}},getUserId:function(){return ace.analytics.Identity.isTrelloWriteKey()?ace.analytics.Identity.getTrelloUserId():ace.analytics.Identity.getAtlassianUserId()},getAtlassianUserId:function(){var e=ace.mkt.Cookie.readCookie("__aid_user_id");return e?decodeURIComponent(e):null},getTrelloUserId:function(){try{var e=location.href?new URL(location.href):null;if(e&&(-1!==e.hostname.indexOf("trello.com")||-1!==e.hostname.indexOf("trellis.coffee"))){var a=ace.mkt.Cookie.readCookie("token");if(a)return decodeURIComponent(a).split("/")[0]}}catch(e){}return null},getMarketoId:function(){var e=ace.mkt.Cookie.readCookie("_mkto_trk");return e?decodeURIComponent(e):null},getUserType:function(){return ace.analytics.Identity.isTrelloWriteKey()?ace.analytics.GASv3.defaultClient.userType.TRELLO:ace.analytics.GASv3.defaultClient.userType.ATLASSIAN_ACCOUNT},isTrelloWriteKey:function(){return 0<=e.indexOf(ace.analytics.Initializer.initSource)},isReferrerTrello:function(){if(!document.referrer)return!1;var e=new URL(document.referrer);return 0<=a.indexOf(e.hostname)}}}(),(ace=ace||{}).analytics=ace.analytics||{},ace.analytics.GASv3=function(){"use strict";var o=["atlCohort","featureFlags"],n="atlUserHash";function s(e){var a=!1,t="";return e.eventContainer&&(t=e.eventContainer.split(" ")[0],a=!0),e.eventColumn&&(t+=e.eventColumn.split(" ")[0],a=!0),t=a?t:"none"}function c(){window.ace.analytics.GASv3.methodQueue||(window.ace.analytics.GASv3.methodQueue=[]);var e=Array.prototype.slice.call(arguments);window.ace.analytics.GASv3.methodQueue.unshift({method:e.shift(),args:e})}function r(){if(window.ace.analytics.GASv3.methodQueue)for(var e=window.ace.analytics.GASv3.methodQueue.length-1;0<=e;e--){var a=window.ace.analytics.GASv3.methodQueue[e].method,t=window.ace.analytics.GASv3.methodQueue[e].args;window.ace.analytics.GASv3[a].apply(window.ace.analytics.GASv3,t),window.ace.analytics.GASv3.methodQueue.splice(e,1)}}return{getUserIdentifiers:function(){return{anonymousId:ace.analytics.GASv3.getAnonymousId(),atlassianAccountId:ace.analytics.Identity.getAtlassianUserId(),crossDomainId:ace.analytics.Tracking.xid,optimizelyEndUserId:ace.analytics.Optimizely.getVisitorId(),trelloUserId:ace.analytics.Identity.getTrelloUserId()}},enrichEventData:function(a){if(!ace.analytics.GASv3.loadGASFlag)return a;"object"==typeof a&&null!==a||(i=a,a={},void 0!==i&&(a.data=i));var e,t,n,i,c=JSON.parse(JSON.stringify(a));c.writeKey=ace.analytics.Initializer.initSource,c.isMarketingEvent=ace.analytics.GASv3.isMarketingEvent;try{Object.keys(c).forEach(function(e){c[e]&&"object"==typeof c[e]&&!Array.isArray(c[e])&&-1===o.indexOf(e)&&(c[e]=JSON.stringify(c[e]))}),e=location.href?new URL(ace.mkt.Helpers.maskURL(location.href)):null,t=document.referrer?new URL(ace.mkt.Helpers.maskURL(document.referrer)):null,n=ace.mkt.Helpers.maskURL(ace.mkt.Helpers.getCanonicalUrl()),c.page_title=c.page_title||document.title||"",c.page_canonical_url=n,c.page_url=e&&e.href||"",c.page_domain=e&&e.hostname||"",c.page_subdomain=e&&e.hostname||"",c.page_path=e&&e.pathname||"",c.page_url_parameters=e&&e.search||"",c.page_url_params_json=e?JSON.stringify(ace.mkt.Helpers.queryString(e.search)):"",c.page_referrer_domain=t&&t.hostname||"",c.page_referrer_subdomain=t&&t.hostname||"",ace.analytics.Identity.isReferrerTrello()?(c.page_referrer_path=t&&new URL(t.origin).pathname||"",c.page_referrer_url=t&&t.origin+new URL(t.origin).pathname||""):(c.page_referrer_path=t&&t.pathname||"",c.page_referrer_url=t&&t.href||""),c.page_referrer_url_params_json=t?JSON.stringify(ace.mkt.Helpers.queryString(t.search)):""}catch(e){a={error:e.message,href:location?location.href:"no location",referrer:document?document.referrer?(i=document.referrer,ace.analytics.Identity.isReferrerTrello()?new URL(i).hostname:i):"no referrer":"no document"};ace.mkt.Helpers.sendWrapperLoadError("GASv3 enrichEventData error",JSON.stringify(a))}return ace.analytics.Identity.isTrelloWriteKey()&&(c.domainUserId=ace.analytics.Snowplow.getSnowplowDuid()),c},getAnonymousId:function(){var e=ace.mkt.Cookie.readCookie("ajs_anonymous_id");return e?decodeURIComponent(e).replace(/['"]+/g,""):(e=ace.mkt.Guid.guid(),ace.mkt.Cookie.writeCookie("ajs_anonymous_id",encodeURIComponent('"'+e+'"')),(e=ace.mkt.Cookie.readCookie("ajs_anonymous_id"))?decodeURIComponent(e).replace(/['"]+/g,""):null)},loadGAS:function(n){ace.analytics.GASv3.fireGasBeacon=ace.analytics.LaunchDarkly.getFeatureFlagForUser("gas-beacon-call");var i=ace.analytics.LaunchDarkly.getFeatureFlagForUser("gasv3-legacy-url-flag");globalRequire.require([ace.analytics.version+"/gasv3/analytics-web-client.with-deps.amd.min"],function(e){var a=ace.mkt.Helpers.getScript(),t=e.envType.LOCAL;if(a&&a.source)switch(ace.mkt.Helpers.getEnvironment()){case ace.mkt.Helpers.ENVIRONMENT.LOCAL:t=e.envType.LOCAL;break;case ace.mkt.Helpers.ENVIRONMENT.DEV:t=e.envType.DEV;break;case ace.mkt.Helpers.ENVIRONMENT.STAGE:t=e.envType.STAGING;break;case ace.mkt.Helpers.ENVIRONMENT.PROD:t=e.envType.PROD}ace.analytics.GASv3.defaultClient=e,ace.analytics.GASv3.client=new e.default({env:t,product:n},{xidConsent:!0,useLegacyUrl:i});a=ace.analytics.Identity.getUserId();a&&ace.analytics.GASv3.client.setUserInfo(ace.analytics.Identity.getUserType(),a),r()},function(e){console.log(e)})},queueMethod:c,replayQueue:r,sendUIEvent:function(e,a,t){ace.analytics.GASv3.loadGASFlag&&((a=t?a:ace.analytics.GASv3.enrichEventData(a)).trackEventName=e,t=s(a),ace.analytics.GASv3.client?ace.analytics.GASv3.client.sendUIEvent({action:a.event||"clicked",actionSubject:a.eventComponent||"component",actionSubjectId:a.actionSubjectId||null,source:t,attributes:a}):ace.analytics.GASv3.loadGASFlag&&c("sendUIEvent",e,a))},sendUIBeacon:function(e,a,t){if(ace.analytics.GASv3.loadGASFlag&&ace.analytics.GASv3.fireGasBeacon){(a=ace.analytics.GASv3.enrichEventData(a,t)).trackEventName=e;e=s(a);try{var n=ace.mkt.Helpers.getEnvironment()===ace.mkt.Helpers.ENVIRONMENT.PROD?"prod":"staging",i="prod"==n?"https://as.atlassian.com/api/v1/t":"http://as.staging.atl-paas.net/api/v1/t",c=a.event||"sent",o=a.eventComponent||"beaconEvent",r={anonymousId:ace.analytics.GASv3.getAnonymousId(),context:{library:{name:"atl-global.js",version:ace.analytics.version},userAgent:navigator.userAgent},messageId:Math.guid(),sentAt:(new Date).toUTCString(),timestamp:(new Date).toUTCString(),type:"track",userId:ace.analytics.Identity.getAtlassianUserId(),event:o+" "+c,properties:{eventType:"ui",userIdType:"atlassianAccount",env:n,product:"marketing",origin:"web",actionSubject:o,action:c,source:e,attributes:a}};t?t.sendBeacon(i,r):navigator.sendBeacon(i,JSON.stringify(r))}catch(e){}}},sendScreenEvent:function(e,a,t){ace.analytics.GASv3.loadGASFlag&&((a=t?a:ace.analytics.GASv3.enrichEventData(a)).name=e,t=void 0!==a&&a.screenNameOverride||"page",ace.analytics.GASv3.client?("object"==typeof a&&delete a.screenNameOverride,ace.analytics.GASv3.client.sendScreenEvent({name:t,attributes:a}),ace.analytics.GASv3.sendIdentityEvent()):c("sendScreenEvent",e,a))},sendTrackEvent:function(e,a,t,n,i){ace.analytics.GASv3.loadGASFlag&&e&&a&&(n=n||{},e={action:e,actionSubject:a,source:s(n=i?n:ace.analytics.GASv3.enrichEventData(n))},t&&(e.actionSubjectId=t),0<Object.keys(n).length&&(e.attributes=n),ace.analytics.GASv3.client?ace.analytics.GASv3.client.sendTrackEvent(e):c("sendTrackEvent",e))},sendIdentityEvent:function(){var e=ace.mkt.Cookie.readCookie(n),a=ace.analytics.GASv3.getUserIdentifiers(),t=ace.mkt.Guid.guidHashCode(JSON.stringify(a)).toString();e&&e===t||(ace.mkt.Cookie.writeCookie(n,t,3650,!0),e={event:"identified",eventComponent:"user",identifiers:a,writeKey:ace.analytics.Initializer.initSource},ace.analytics.GASv3.sendUIEvent("",e,!0))},sendOperationalEvent:function(e,a,t,n,i){ace.analytics.GASv3.loadGASFlag&&e&&a&&(n=n||{},e={action:e,actionSubject:a,source:s(n=i?n:ace.analytics.GASv3.enrichEventData(n))},t&&(e.actionSubjectId=t),0<Object.keys(n).length&&(e.attributes=n),ace.analytics.GASv3.client?ace.analytics.GASv3.client.sendOperationalEvent(e):c("sendOperationalEvent",e))}}}(),(ace=ace||{}).analytics=ace.analytics||{},ace.analytics.Gtm=function(){"use strict";var n="atl-global-gtm";return{getContainerId:function(e){return{ycih1ygfsk:"GTM-MR6PJQR","9nfqb81km3":"GTM-TSGXFNC",kFTUHPhH9Q:"GTM-TRS3MV",u7y09b0olq:"GTM-5VS67RK",eNVsl3NOQquS5E0YXjD4prfiNVqVP3mr:"GTM-KZLJPX4",bvsetm1g1y:"GTM-5RJSBR",kiv6wyh2nw:"GTM-5RJSBR",r4n974s99s:"GTM-5RJSBR","8oi64no":"GTM-K7MDT22",xjtlog1hqa:"GTM-KQ6R2C3",bNSPpYAL9OiAkamBRvfRJoRu9YANW14I:"GTM-MGV77B",TNnhg0QuQfHEpBTzp27kJXNWZoMqSvkw:"GTM-TQZMFCL",trello:"GTM-PJ8M5SK","4J6H7c3XTcpm1dbenkOILSyOachvf9It":"GTM-TQZMFCL",SBLZG3ZYcSBcUMeLKLalrtyW8w1Caold:"GTM-TQZMFCL",QVFu18jjHlCNaBXizZ3mtiqlBXVRkg1M:"GTM-TQZMFCL",QmWM6iw7auEJw5gDQi6910Xk1wqyZ6bE:"GTM-TQZMFCL",hWTszOAQMuItRdv8J30A3mNpCWd891bx:"GTM-TQZMFCL",EWfeqJKJ0rPNOe3fcXrh2dg7bVXZNi2I:"GTM-5RJSBR",Z2S07IGcRYkPJ7XHy3OIXcjpYoy9E6bs:"GTM-5RJSBR"}[e]},initialize:function(e){var a,t;ace.analytics.LaunchDarkly.getFeatureFlagForUser(n)&&(e=ace.analytics.Gtm.getContainerId(e))&&(a="dataLayer",window[a]=window[a]||[],window[a].push({"gtm.start":(new Date).getTime(),event:"gtm.js"}),a=document.getElementsByTagName("script")[0],(t=document.createElement("script")).async=!0,t.src="https://www.googletagmanager.com/gtm.js?id="+e,a.parentNode.insertBefore(t,a))},page:function(e,a,t){ace.analytics.LaunchDarkly.getFeatureFlagForUser(n)&&(ace.analytics.Gtm.track(t,"Loaded a Page"),a&&ace.analytics.Gtm.track(t,"Viewed "+e+" "+a+" Page"),e&&ace.analytics.Gtm.track(t,"Viewed "+e+" Page"))},track:function(e,a){var t;ace.analytics.LaunchDarkly.getFeatureFlagForUser(n)&&(e=JSON.parse(JSON.stringify(e)),ace.analytics.GASv3.loadGASFlag&&(t=ace.analytics.GASv3.getAnonymousId())&&(e.gasv3AnonymousId=t),a&&(e.event=a),t="dataLayer",window[t]=window[t]||[],window[t].push(e))}}}(),(ace=ace||{}).analytics=ace.analytics||{},ace.analytics.Optimizely=function(){"use strict";function c(){return!!window.optimizely&&window.optimizely.initialized}return{isDemandbaseAvailable:function(){return c()&&window.optimizely.get("visitor")&&window.optimizely.get("visitor")["vendor.demandbase"]},isInitialized:c,getExperimentAndVariationPairs:function(){if(!c())return[];for(var e=window.optimizely.get("state").getActiveExperimentIds(),a=window.optimizely.get("state").getVariationMap(),t=[],n=0;n<e.length;n++){var i=e[n],i={experimentId:i,variationId:a[i]?a[i].id:"null"};t.push(i)}return t},getCampaigns:function(){if(!c())return{};var n={},i=window.optimizely.get("state").getCampaignStates();return Object.keys(i).forEach(function(e){var a=i[e],t={isActive:a.isActive};a.isActive&&(t.experiment={id:a.experiment?a.experiment.id:null},t.allExperiments=[],a.allExperiments.forEach(function(e){t.allExperiments.push({id:e.id})}),t.variation={id:a.variation?a.variation.id:null},t.isInCampaignHoldback=a.isInCampaignHoldback,t.audiences=a.audiences),n[e]=t}),n},getVisitorId:function(){return c()?window.optimizely.get("visitor_id").randomId:null},getDemandbase:function(){if(!window.ace.analytics.Optimizely.isDemandbaseAvailable())return{};var e=window.optimizely.get("visitor")["vendor.demandbase"];return{employee_range:e.employee_range,account_type:e.watch_list?e.watch_list.account_type:void 0,industry:e.industry,sub_industry:e.sub_industry}}}}(),(ace=ace||{}).analytics=ace.analytics||{},ace.analytics.SegmentIO=function(){"use strict";function a(){return!!window.analytics&&!!window.analytics.user}return window.atlReadyCalled=!1,{isInitialized:function(){return!!window.analytics},wrapSegment:function(e,a){var n;(n=window.analytics=window.analytics||[]).initialize||(n.invoked?window.console&&console.error&&console.error("Segment snippet included twice."):(n.invoked=!0,window.analytics&&window.analytics.methods||(ace.analytics.MethodQueue.stubSegmentMethods?ace.analytics.MethodQueue:ace.analytics.SegmentIO).stubSegmentMethods(),n.load=function(e,a){var t=document.createElement("script"),e=(t.type="text/javascript",t.id="analytics-js",t.async=!0,t.src="https://cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js",document.getElementsByTagName("script")[0]);e.parentNode.insertBefore(t,e),n._loadOptions=a,t.onload=function(){ace.analytics.Metrics.logMetric(ace.analytics.Metrics.METRICS_KEYS.TIME_TO_SEGMENT_LOAD),ace.mkt.Helpers.makeRestRequest("GET","https://api.segment.io/v1/p",[{header:"Content-type",value:"text/plain"}],JSON.stringify({writeKey:ace.analytics.Metrics.TEST_LOG_KEY}),null,function(e){"error"===e&&ace.mkt.Helpers.sendWrapperLoadError("Segment endpoint blocked")})},t.onerror=function(){ace.mkt.Helpers.sendWrapperLoadError("Segment load error")}},n.SNIPPET_VERSION="4.1.0",n.load(e,a)))},setAnonymousId:function(){var e=window.localStorage.getItem("ajs_anonymous_id"),a=(a=ace.mkt.Cookie.readCookie("ajs_anonymous_id"))?decodeURIComponent(a):null;return e&&e!=a?(ace.mkt.Cookie.writeCookie("ajs_anonymous_id",encodeURIComponent(e),31536e6,!0),ace.analytics.Cohort.readWriteAtlCohort(!0),a):null},getAnonymousId:function(){var e;return a()?window.analytics.user().anonymousId():(e=ace.mkt.Cookie.readCookie("ajs_anonymous_id"))?decodeURIComponent(e).replace(/['"]+/g,""):(e=ace.mkt.Guid.guid(),ace.mkt.Cookie.writeCookie("ajs_anonymous_id",encodeURIComponent('"'+e+'"')),(e=ace.mkt.Cookie.readCookie("ajs_anonymous_id"))?decodeURIComponent(e).replace(/['"]+/g,""):null)},getXID:function(){var e=null;try{e=ace.mkt.Cookie.readCookie("seg_xid")}catch(e){"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(e)}return e},isSegmentUserAvailable:a,initSegment:function(e,a){var t;ace.analytics.SegmentIO.loadSegmentFlag?(t=ace.analytics.SegmentIO.setAnonymousId(),ace.analytics.SegmentIO.wrapSegment(e,a),t&&ace.analytics.Tracking.trackEvent("cookieStitching",{serverSideAnonymousId:t})):(window.analytics&&window.analytics.methods||(ace.analytics.MethodQueue.stubSegmentMethods?ace.analytics.MethodQueue:ace.analytics.SegmentIO).stubSegmentMethods(),window.analytics.track=ace.analytics.Tracking.trackEvent,window.analytics.page=ace.analytics.Tracking.pageView,window.analytics.identify=ace.analytics.Identity.identify)},segmentDoReady:function(){var e,a,t;ace.analytics.SegmentIO.loadSegmentFlag&&(e=function(){if(!window.atlReadyCalled){window.atlReadyCalled=!0,ace.analytics.Tracking.segmentTrack=window.analytics.track,analytics.track=ace.analytics.Tracking.trackEvent,ace.analytics.Tracking.segmentPage=window.analytics.page,analytics.page=ace.analytics.Tracking.pageView,ace.analytics.Identity.segmentIdentify=window.analytics.identify,analytics.identify=ace.analytics.Identity.identify,"function"==typeof window.segmentReady&&window.segmentReady(),ace.analytics.Initializer.globalCallReady();try{ace.mkt.Cookie.writeCookie("_sio",window.analytics.user().anonymousId(),3650,!0),ace.analytics.Identity.autoIdentify()}catch(e){"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(e,"error writing _sio/utm_params cookie")}}},a=0,t=setInterval(function(){!(a<6)||ace.analytics.SegmentIO.isSegmentUserAvailable()?(clearInterval(t),e()):a++},200),window.analytics.ready(function(){clearInterval(t),e()}))},stubSegmentMethods:function(){var t=window.analytics=window.analytics||[];t.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],t.factory=function(a){return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(a),t.push(e),t}};for(var e=0;e<t.methods.length;e++){var a=t.methods[e];t[a]=t.factory(a)}},ATL_GLOBAL_ERROR_KEY:"OwkfO6MbQAZAEBuW9CxxAgyahOi8I51r",trackEvent:function(e,a){ace.analytics.SegmentIO.loadSegmentFlag&&(ace.analytics.Tracking.segmentTrack?ace.analytics.Tracking.segmentTrack(e,a,ace.analytics.Tracking.pageViewOptions):window.analytics.track(e,a,ace.analytics.Tracking.pageViewOptions))},sendTrackBeacon:function(e,a,t){if(ace.analytics.SegmentIO.loadSegmentFlag){var n="https://api.segment.io/v1/t",e={anonymousId:ace.analytics.SegmentIO.getAnonymousId(),event:e,properties:a,writeKey:ace.analytics.Initializer.initSource};try{t?t.sendBeacon(n,e):navigator.sendBeacon(n,JSON.stringify(e))}catch(e){}}},trackPage:function(e,a,t,n){ace.analytics.SegmentIO.loadSegmentFlag&&(ace.analytics.Tracking.segmentPage?ace.analytics.Tracking.segmentPage(e,a,t,n):window.analytics.page(e,a,t,n))},ready:function(){if(ace.analytics.SegmentIO.loadSegmentFlag)return window.analytics.ready.apply(window,arguments)}}}(),(ace=ace||{}).analytics=ace.analytics||{},ace.analytics.Snowplow=function(){"use strict";var n;function c(){window.ace.analytics.Snowplow.methodQueue||(window.ace.analytics.Snowplow.methodQueue=[]);var e=Array.prototype.slice.call(arguments);window.ace.analytics.Snowplow.methodQueue.unshift({method:e.shift(),args:e})}function i(){if(window.ace.analytics.Snowplow.methodQueue)for(var e=window.ace.analytics.Snowplow.methodQueue.length-1;0<=e;e--){var a=window.ace.analytics.Snowplow.methodQueue[e].method,t=window.ace.analytics.Snowplow.methodQueue[e].args;window.ace.analytics.Snowplow[a].apply(window.ace.analytics.GASv3,t),window.ace.analytics.Snowplow.methodQueue.splice(e,1)}}return{loadSnowplow:function(){n=new Map([[ace.mkt.Helpers.ENVIRONMENT.LOCAL,"c.trellis.coffee"],[ace.mkt.Helpers.ENVIRONMENT.DEV,"c.trellis.coffee"],[ace.mkt.Helpers.ENVIRONMENT.STAGE,"c.trellis.coffee"],[ace.mkt.Helpers.ENVIRONMENT.PROD,"c.trello.com"]]),e=window,t=document,a="sp",e.sp||(e.GlobalSnowplowNamespace=e.GlobalSnowplowNamespace||[],e.GlobalSnowplowNamespace.push(a),e.sp=function(){(e.sp.q=e.sp.q||[]).push(arguments)},e.sp.q=e.sp.q||[],a=t.createElement("script"),t=t.getElementsByTagName("script")[0],a.async=1,a.src="//a.trellocdn.com/lib/snowplow/2.9.0.js",t.parentNode.insertBefore(a,t));var e,a={appId:"meta",respectDoNotTrack:!0,stateStorageStrategy:"cookie"},t=location.href?new URL(location.href):null;t&&t.hostname&&-1!==t.hostname.indexOf("trello.com")&&(a.cookieDomain=".trello.com"),window.sp("newTracker","cf",n.get(ace.mkt.Helpers.getEnvironment()),a),i()},trackPageView:function(e){var a;ace.analytics.Snowplow.loadSnowplowFlag&&(window.sp?(a=((e=ace.analytics.Snowplow.enrichEventData(e)).pageViewId||"")+":"+(e.page_title||document.title||""),window.sp("trackPageView",a)):c("trackPageView",e))},trackSelfDescribingEvent:function(e){var a,t,n,i;ace.analytics.Snowplow.loadSnowplowFlag&&(window.sp?(t=!1,a="",(e=ace.analytics.Snowplow.enrichEventData(e)).eventContainer&&(a=e.eventContainer.split(" ")[0],t=!0),e.eventColumn&&(a+=e.eventColumn.split(" ")[0],t=!0),t||(a="none"),t=e.event||"clicked",n=e.eventComponent||"component",i=e.atlEventId,window.sp("trackSelfDescribingEvent",{schema:"iglu:com.trello/client-event/jsonschema/1-0-0",data:{ue_category:a,ue_verb:t,ue_dir_object:n,ue_prep_object:"",ue_ind_object:"",ue_method:"",ue_context:i}})):c("trackSelfDescribingEvent",e))},enrichEventData:function(e,a){return a||"object"==typeof e&&null!==e||(a=e,e={},void 0!==a&&(e.data=a)),e},getSnowplowDuid:function(){var e=new RegExp("_sp_id\\.[a-f0-9]+=([^;]+);?");return(e=document.cookie.match(e))&&e[1]?e[1].split(".")[0]:""},queueMethod:c,replayQueue:i}}();
//# sourceMappingURL=atl-global-2.120.0.min.js.map