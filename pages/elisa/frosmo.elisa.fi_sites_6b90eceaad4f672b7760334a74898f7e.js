
(function () {
    // See the Frosmo Core header for more details
    var _frosmoNamespace = 'frosmo';
    var _frosmoInternalNamespace = '_frosmo';
    var _frosmoScriptNamespace = '';

    try {
        _frosmoScriptNamespace = window.document.currentScript.getAttribute('data-namespace') || '';
        if (_frosmoScriptNamespace) {
            _frosmoNamespace += _frosmoScriptNamespace
            _frosmoInternalNamespace += _frosmoScriptNamespace;
        }
    } catch (ex) {
        // Ignore the error, as this should only occur on IE
    }

    var frosmo = window[_frosmoNamespace] = window[_frosmoNamespace] || {};
    var _frosmo = window[_frosmoInternalNamespace] = window[_frosmoInternalNamespace] || {};
    // var easy = frosmo.easy = frosmo.easy || {};
    var _config = {"thirdParty":true,"anchorEnabled":1,"api":{"domain":"\/\/inpref.com\/","origin":"6b90eceaad4f672b7760334a74898f7e"},"targetGroups":true,"transactionApi":true,"sharedContext":0,"requestMessages":false,"dataLayer":1,"baseUrl":"\/\/d2wzl9lnvjz3bh.cloudfront.net\/","campaigns":[],"campaignElements":{"4061":{"utm_content":["matchExact","Samsung-Galaxy-S5"],"frdyn":["matchExact","1"]},"4062":{"utm_content":["matchExact","Nokia-Lumia-520"],"frdyn":["matchExact","1"]}},"segments":[],"segmentGroups":[],"segmentsV2":{"sgmt_47621":{"name":"sgmt_47621","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],907]],"id":"4ec95bfd618336d462ff04d6da0e4bb4","counterIds":["b9ebb87ccb822b8f69082dec53ba7710"]}],"segmentGroupId":5823,"rules":["and",["or",[">=",["get-trigger-count","b9ebb87ccb822b8f69082dec53ba7710",30],1]]]},"sgmt_47622":{"name":"sgmt_47622","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],906]],"id":"6b1ae37bd27c1159f7b5411a585b0dc8","counterIds":["458dafc01f719fec955cdac4ca762765"]}],"segmentGroupId":5823,"rules":["and",["or",[">=",["get-trigger-count","458dafc01f719fec955cdac4ca762765",30],1]]]},"sgmt_47623":{"name":"sgmt_47623","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],910]],"id":"2d0311ddd2eb904e5223e6b3ed76d64f","counterIds":["f457005bb86a89e2ef296888bb69d4cc"]}],"segmentGroupId":5823,"rules":["and",["or",[">=",["get-trigger-count","f457005bb86a89e2ef296888bb69d4cc",30],1]]]},"sgmt_47624":{"name":"sgmt_47624","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],908]],"id":"432ba261cb84619f9681d7efc48e3250","counterIds":["adfa0aa33c1a877bf27d7267773cf79d"]}],"segmentGroupId":5823,"rules":["and",["or",[">=",["get-trigger-count","adfa0aa33c1a877bf27d7267773cf79d",30],1]]]},"sgmt_47625":{"name":"sgmt_47625","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],909]],"id":"e21b5265de72dd0dce9ebfd1279e8881","counterIds":["c52f7c6444e2513e13b1497210eb0efe"]}],"segmentGroupId":5823,"rules":["and",["or",[">=",["get-trigger-count","c52f7c6444e2513e13b1497210eb0efe",30],1]]]},"sgmt_47626":{"name":"sgmt_47626","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],905]],"id":"ea0adf4d05b6021cf8f9547c164351e2","counterIds":["c21fb4275316f0757e68ec65bcfa71a1"]}],"segmentGroupId":5823,"rules":["and",["or",[">=",["get-trigger-count","c21fb4275316f0757e68ec65bcfa71a1",30],1]]]},"sgmt_47970":{"name":"sgmt_47970","triggers":[{"on_event":"conversion","rules":["and",["eq?",["get-event-data","type"],"mailListSubscription"]],"id":"78d56c5afb62dd48da8007ba2db35267","counterIds":["80836ae74ae027df96651fee3e4b0a69"]},{"on_event":"conversion","rules":["and",["eq?",["get-event-data","type"],"mail_list_subscription"]],"id":"91f1c2db84a546a3bc67b128399c8d5c","counterIds":["7d2a8b8ee7449deb3d8cc2d1d4eba94a"]}],"segmentGroupId":6271,"rules":["or",["or",[">=",["get-trigger-count","80836ae74ae027df96651fee3e4b0a69",90],1]],["or",[">=",["get-trigger-count","7d2a8b8ee7449deb3d8cc2d1d4eba94a",90],1]]]},"sgmt_48375":{"name":"sgmt_48375","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],2772]],"id":"d319c181cb52f3e1381995c615b114a7","counterIds":["912a37471a4ac5e79663be995e05dd82"]},{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],6686]],"id":"2f0ad1a2a256c4292d4a04a4aed3ad37","counterIds":["db31c0a2fab47ede138dc40e03be168d"]}],"segmentGroupId":5913,"rules":["and",["or",[">=",["get-trigger-count","912a37471a4ac5e79663be995e05dd82",5],1],[">=",["get-trigger-count","db31c0a2fab47ede138dc40e03be168d",5],1]]]},"sgmt_48376":{"name":"sgmt_48376","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3962]],"id":"27ee0c1ae72625b059e38445f42984c0","counterIds":["d676a10dd5d2f5fb0ddf42e382908b26"]}],"segmentGroupId":5913,"rules":["or",["or",[">=",["get-trigger-count","d676a10dd5d2f5fb0ddf42e382908b26",60],1]]]},"sgmt_48377":{"name":"sgmt_48377","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","7"]]],"id":"a577a82b04750bbbcedfb42577028114","counterIds":["2e3153723432aea32b0f1bd9494a8a41"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","2e3153723432aea32b0f1bd9494a8a41",60],1]]]},"sgmt_48378":{"name":"sgmt_48378","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","14"]]],"id":"b8cde14af0344354f9b41349426e36a1","counterIds":["3777fc010436b4519bc33973f6eda022"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","3777fc010436b4519bc33973f6eda022",60],1]]]},"sgmt_48379":{"name":"sgmt_48379","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"]],"id":"1a0c498373b65f2ce6b097c1da5d48c4","counterIds":["756de82e5bf57d5f5985ff6f5e7e9c66"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","756de82e5bf57d5f5985ff6f5e7e9c66",60],1]]]},"sgmt_48380":{"name":"sgmt_48380","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","12"]]],"id":"8b3182b7c4e143bd0cd30a9923048685","counterIds":["fadf132c00e975e6919f982a9219b55f"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","fadf132c00e975e6919f982a9219b55f",60],1]]]},"sgmt_48381":{"name":"sgmt_48381","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","11"]]],"id":"034989a428a36ebdbbfd809ae7c4ec76","counterIds":["b760c670e7b0ebcb224b7c5977cf63e2"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","b760c670e7b0ebcb224b7c5977cf63e2",60],1]]]},"sgmt_48382":{"name":"sgmt_48382","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","10"]]],"id":"577fedf5a6408642779b91b8a8be01d3","counterIds":["869b1f3fd526d443816b95b05b8c2b11"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","869b1f3fd526d443816b95b05b8c2b11",60],1]]]},"sgmt_48383":{"name":"sgmt_48383","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","9"]]],"id":"699d81f100e88735285da82fd4e46bdc","counterIds":["d62fbbadf8dde7e95c1f79bfbde4fd7e"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","d62fbbadf8dde7e95c1f79bfbde4fd7e",60],1]]]},"sgmt_48384":{"name":"sgmt_48384","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","8"]]],"id":"ca04bb4dca1fb918c1ee4742dab36009","counterIds":["fd8ff6ff708fc3912cbdfffa62379de7"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","fd8ff6ff708fc3912cbdfffa62379de7",60],1]]]},"sgmt_48385":{"name":"sgmt_48385","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","6"]]],"id":"08c0df60fa2b5edf33e033b570013453","counterIds":["f60a87cbc6581f99f0c1a5b772d5d62c"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","f60a87cbc6581f99f0c1a5b772d5d62c",60],1]]]},"sgmt_48386":{"name":"sgmt_48386","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","1","2","3","4","5"]]],"id":"cd2ff143746b05d81b89329dfa769d34","counterIds":["0576eea5a1e90d5286417e574134f016"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","0576eea5a1e90d5286417e574134f016",60],1]]]},"sgmt_48387":{"name":"sgmt_48387","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","0","23","22"]]],"id":"1b1bdada5b214fe60bca73646e4f3333","counterIds":["d0c64a454c34ff732b9e232abc730a02"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","d0c64a454c34ff732b9e232abc730a02",60],1]]]},"sgmt_48388":{"name":"sgmt_48388","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","21"]]],"id":"2c55f7b3c756fdf0bcc6ad1e1e056b28","counterIds":["fc423f8158e26b811982b20ea0cbb92b"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","fc423f8158e26b811982b20ea0cbb92b",60],1]]]},"sgmt_48389":{"name":"sgmt_48389","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","20"]]],"id":"ed205b0f369d22660007b03c4004e37a","counterIds":["970ba442485425f8529db17a1efe4723"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","970ba442485425f8529db17a1efe4723",60],1]]]},"sgmt_48390":{"name":"sgmt_48390","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","15"]]],"id":"38f0d132403907e53d53294e95df3f1e","counterIds":["740dd7b195574f94a61c6b98ff9c7d54"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","740dd7b195574f94a61c6b98ff9c7d54",60],1]]]},"sgmt_48391":{"name":"sgmt_48391","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","16"]]],"id":"4092431f4c236f606a723cb241041e69","counterIds":["19b972c94b4a9ab8dd4cb22f97da0834"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","19b972c94b4a9ab8dd4cb22f97da0834",60],1]]]},"sgmt_48392":{"name":"sgmt_48392","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","17"]]],"id":"e41d491b4046903a5c8f853a3334b3c4","counterIds":["cc44eca1433cafeb606af263a05f9740"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","cc44eca1433cafeb606af263a05f9740",60],1]]]},"sgmt_48393":{"name":"sgmt_48393","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","18"]]],"id":"e6cea69163a46a345975608e5134e3c3","counterIds":["16175c16730bd0e17740b2efc91eccff"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","16175c16730bd0e17740b2efc91eccff",60],1]]]},"sgmt_48394":{"name":"sgmt_48394","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitHour"],["in",["get-event-data","value"],["array","19"]]],"id":"bd5ae75621708aa59126a589630186e8","counterIds":["b33e1d4746f3861d22228eef18a2b30f"]}],"segmentGroupId":5914,"rules":["and",["or",[">=",["get-trigger-count","b33e1d4746f3861d22228eef18a2b30f",60],1]]]},"sgmt_48395":{"name":"sgmt_48395","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitDay"],["in",["get-event-data","value"],["array","Mon","Thur","Tue","Fri","Wed"]]],"id":"c59eb95318f03d340cf1270408edb0a9","counterIds":["56061cda2668909522fa4e33cfdba688"]}],"segmentGroupId":6266,"rules":["and",["or",[">=",["get-trigger-count","56061cda2668909522fa4e33cfdba688",60],1]]]},"sgmt_48396":{"name":"sgmt_48396","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"visitDay"],["in",["get-event-data","value"],["array","Sat","Sun"]]],"id":"ae02def4a56ca7f28f32b256e421a812","counterIds":["e6dd54df82e11960b204dedc62367408"]}],"segmentGroupId":6266,"rules":["and",["or",[">=",["get-trigger-count","e6dd54df82e11960b204dedc62367408",60],1]]]},"sgmt_48407":{"name":"sgmt_48407","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","host"],"yksityisille.hub.elisa.fi"],"id":"abb1cb913b22e1f610462af00052e96a","counterIds":["ea7a7e209a0b833a46d46864385a5d21"]}],"segmentGroupId":5823,"rules":["and",["or",[">=",["get-trigger-count","ea7a7e209a0b833a46d46864385a5d21",60],1]]]},"sgmt_49021":{"name":"sgmt_49021","triggers":[{"on_event":"scriptLoad","rules":["begins",["location","path"],"\/viihde"],"id":"4bcc876ec35281477d73f4506742103d","counterIds":["1c2b0ea8d56715141ffad33b9d127114"]},{"on_event":"scriptLoad","rules":["eq?",["location","host"],"www.elisaviihde.fi"],"id":"3383ae77ac53673b53d5d92790d52ff9","counterIds":["52b2af01a7f8f38333ac8c365449d5f9"]}],"segmentGroupId":6264,"rules":["or",["and",[">=",["get-trigger-count","1c2b0ea8d56715141ffad33b9d127114",30],1]],["or",[">=",["get-trigger-count","52b2af01a7f8f38333ac8c365449d5f9",30],1]]]},"sgmt_49095":{"name":"sgmt_49095","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","query","frosmotest"],"on"],"id":"2d4d8d40576999d673d0e68dae03a34c","counterIds":["4436eafeb3274ffd7d5e7f160a9f471d"]}],"segmentGroupId":6236,"rules":["and",["or",[">=",["get-trigger-count","4436eafeb3274ffd7d5e7f160a9f471d",1],1]]]},"sgmt_49310":{"name":"sgmt_49310","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Geolokaatio"]],"id":"b1e75cf48083e960402c4cc3acbe1660","counterIds":["8dc90028eaabe5d7a5a7ad6e48eff5c7"]}],"segmentGroupId":6267,"rules":["and",["or",[">=",["get-trigger-count","8dc90028eaabe5d7a5a7ad6e48eff5c7",180],1]]]},"sgmt_49782":{"name":"sgmt_49782","triggers":[{"on_event":"visit","rules":[],"id":"d4ff14b8d7e54bdf24affe4eb3dffe66","counterIds":["e6551101adfdf1c29b02ada2d9e71f21"]}],"segmentGroupId":6268,"rules":["and",["or",["not",["eq?",["get-trigger-count","e6551101adfdf1c29b02ada2d9e71f21",180],1]]]]},"sgmt_49850":{"name":"sgmt_49850","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Finland"],["in",["get-event-data","value"],["array","true"]]],"id":"039f846af1b8913db55086e2a9b47379","counterIds":["f2c2d8296e1b97e669fc85296bef1459"]}],"segmentGroupId":6267,"rules":["and",["or",[">=",["get-trigger-count","f2c2d8296e1b97e669fc85296bef1459",180],1]]]},"sgmt_49851":{"name":"sgmt_49851","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Finland"],["in",["get-event-data","value"],["array","false"]]],"id":"b9b6c92e3cf469bfe05e4ab62ff63b93","counterIds":["2e80eb7bdeba75ac5d3a0df533c1cf80"]}],"segmentGroupId":6267,"rules":["and",["or",[">=",["get-trigger-count","2e80eb7bdeba75ac5d3a0df533c1cf80",180],1]]]},"sgmt_49852":{"name":"sgmt_49852","triggers":[{"on_event":"visit","rules":[],"id":"d4ff14b8d7e54bdf24affe4eb3dffe66","counterIds":["e6551101adfdf1c29b02ada2d9e71f21"]}],"segmentGroupId":6268,"rules":["and",["or",[">=",["get-trigger-count","e6551101adfdf1c29b02ada2d9e71f21",180],1]]]},"sgmt_49902":{"name":"sgmt_49902","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","893"]]],"id":"0cb9145f8134dae43ee2d2b44c536fcf","counterIds":["628817e64c35567d6c72f5af0a9acfd6"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","628817e64c35567d6c72f5af0a9acfd6",60],1]]]},"sgmt_49903":{"name":"sgmt_49903","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","1982"]]],"id":"73e505c5250a2a84d12176b4f9cda665","counterIds":["51059025092b4cdaf00112828eb7527e"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","51059025092b4cdaf00112828eb7527e",60],1]]]},"sgmt_49904":{"name":"sgmt_49904","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","2028"]]],"id":"9bc84bc4a5624e037bfe4b185f8d7156","counterIds":["6a27b9363f7611f2ac4afcc6549e0a51"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","6a27b9363f7611f2ac4afcc6549e0a51",60],1]]]},"sgmt_49905":{"name":"sgmt_49905","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","2171"]]],"id":"0a2edf2b2a25093375ee6f990ee931eb","counterIds":["ccdf0325e53fd34f0d846b9c4cefbd0f"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","ccdf0325e53fd34f0d846b9c4cefbd0f",60],1]]]},"sgmt_49907":{"name":"sgmt_49907","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","2248"]]],"id":"1fe4f6784f96f77e846a4a4c412b1ade","counterIds":["cb18ae2ae3ae22baa7392107e85494bc"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","cb18ae2ae3ae22baa7392107e85494bc",60],1]]]},"sgmt_49908":{"name":"sgmt_49908","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","2457"]]],"id":"2d826d26085a346fe92a3e19ce540887","counterIds":["650945fe968bd159f212c2f5457f8997"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","650945fe968bd159f212c2f5457f8997",60],1]]]},"sgmt_49909":{"name":"sgmt_49909","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3073"]]],"id":"d4ab5ad3e8871429e449957af87ccf87","counterIds":["3bdda5e34612ea949b0730775583d356"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","3bdda5e34612ea949b0730775583d356",60],1]]]},"sgmt_49910":{"name":"sgmt_49910","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3642"]]],"id":"f2a51e1af284dc0f61000cee8425a580","counterIds":["c90888a3d65c34a81b0b0d6a22153409"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","c90888a3d65c34a81b0b0d6a22153409",60],1]]]},"sgmt_49911":{"name":"sgmt_49911","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3671"]]],"id":"01e5b062d208033024955233bfe7de56","counterIds":["658d53b8388175f21074f36ab8e3eb53"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","658d53b8388175f21074f36ab8e3eb53",60],1]]]},"sgmt_49912":{"name":"sgmt_49912","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3790"]]],"id":"43771dd7e3dc0b4c83e6a38f5869c7d3","counterIds":["cd9dad5c0a53cebe8c6b5e8290f974da"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","cd9dad5c0a53cebe8c6b5e8290f974da",60],1]]]},"sgmt_49913":{"name":"sgmt_49913","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","1198"]]],"id":"ec1077decb469c8eb4e87a2a70e5e62f","counterIds":["3de6f93254d443c05bcb58cd1aa9222f"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","3de6f93254d443c05bcb58cd1aa9222f",60],1]]]},"sgmt_49914":{"name":"sgmt_49914","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","1291"]]],"id":"008eddab668340df870aa57fae35269d","counterIds":["fa3db66591ddb84f2724df2e503dff92"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","fa3db66591ddb84f2724df2e503dff92",60],1]]]},"sgmt_49915":{"name":"sgmt_49915","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","1827"]]],"id":"8305d39584e3e9e61b2d71efa616a94f","counterIds":["2ec93a842143af39015fc2deab92a451"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","2ec93a842143af39015fc2deab92a451",60],1]]]},"sgmt_49916":{"name":"sgmt_49916","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","2458"]]],"id":"45b977c80b456ad1ade098c00397921a","counterIds":["63082e58e09e66638714ea07eee62c55"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","63082e58e09e66638714ea07eee62c55",60],1]]]},"sgmt_49917":{"name":"sgmt_49917","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","2726"]]],"id":"1e2df6cc12a23e661e33c0eb71758513","counterIds":["743aae4e411b7cf6fef57c4cf556f0f2"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","743aae4e411b7cf6fef57c4cf556f0f2",60],1]]]},"sgmt_49918":{"name":"sgmt_49918","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3471"]]],"id":"fa30275052f134edbe984462c95f85b1","counterIds":["d60972820a45e51a1c0ba37ddec96be0"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","d60972820a45e51a1c0ba37ddec96be0",60],1]]]},"sgmt_49919":{"name":"sgmt_49919","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3472"]]],"id":"53e7429b3558605313ceb622221e31ee","counterIds":["a2f5e33367795bba69f421dc35b67fcf"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","a2f5e33367795bba69f421dc35b67fcf",60],1]]]},"sgmt_49920":{"name":"sgmt_49920","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3473"]]],"id":"7fcd153b0da6d6d823c48a4e9e408368","counterIds":["c830e4eede06ddc62b2cb9f6c01df8a6"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","c830e4eede06ddc62b2cb9f6c01df8a6",60],1]]]},"sgmt_49921":{"name":"sgmt_49921","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3474"]]],"id":"0229de2e2e04c30f90ff8ebdad0b7031","counterIds":["9a1a5562f4546bd1c73d807ebc9d7b4f"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","9a1a5562f4546bd1c73d807ebc9d7b4f",60],1]]]},"sgmt_49922":{"name":"sgmt_49922","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3475"]]],"id":"525b246e2597736a2b609af085aec4da","counterIds":["affab508f6950860ff001e63ce79f739"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","affab508f6950860ff001e63ce79f739",60],1]]]},"sgmt_49923":{"name":"sgmt_49923","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3791"]]],"id":"1a6dbbf8d275bd6488a43737070bb7ad","counterIds":["85d996c46a26182894b74ead0db12b72"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","85d996c46a26182894b74ead0db12b72",60],1]]]},"sgmt_49924":{"name":"sgmt_49924","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","4118"]]],"id":"90d8c539a3358ab301bb8b4b753bd170","counterIds":["9041f243e55f3f9205fb4465bb16f43b"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","9041f243e55f3f9205fb4465bb16f43b",60],1]]]},"sgmt_49925":{"name":"sgmt_49925","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","895"]]],"id":"21d4e4e224714e712c34ee83d8c8c84b","counterIds":["d5e5c654db2fd4914c221ce4f33b07a4"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","d5e5c654db2fd4914c221ce4f33b07a4",60],1]]]},"sgmt_49926":{"name":"sgmt_49926","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3476"]]],"id":"e1d0a40b9a665c0b4cc5bd64e1dfe182","counterIds":["ba80a5920e2de71303afccc044b70645"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","ba80a5920e2de71303afccc044b70645",60],1]]]},"sgmt_49927":{"name":"sgmt_49927","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3792"]]],"id":"c2bf109818e5fd094954f5314a4fa7d4","counterIds":["bba03ec7456be7813b2703b2219c90d6"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","bba03ec7456be7813b2703b2219c90d6",60],1]]]},"sgmt_49929":{"name":"sgmt_49929","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeLogin"],["in",["get-event-data","value"],["array","true"]]],"id":"b34834d3b8ab33786128cc6e8d05e141","counterIds":["0035e58971c55cd054576187e1228114"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","0035e58971c55cd054576187e1228114",180],1]]]},"sgmt_50321":{"name":"sgmt_50321","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3989"]]],"id":"1a6c8416a1b33fadcdec3f1d47307333","counterIds":["773b2d47e8e7199961fd28781c758707"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","773b2d47e8e7199961fd28781c758707",60],1]]]},"sgmt_50327":{"name":"sgmt_50327","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"omaElisaLogin"],["in",["get-event-data","value"],["array","true"]]],"id":"2a4272d15d8c31216718dc1201910c7d","counterIds":["bc7587e019fe6ab7adef03f71cac478b"]}],"segmentGroupId":6265,"rules":["and",["or",[">=",["get-trigger-count","bc7587e019fe6ab7adef03f71cac478b",365],1]]]},"sgmt_50328":{"name":"sgmt_50328","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"omaElisaLogin"],["in",["get-event-data","value"],["array","true"]]],"id":"2a4272d15d8c31216718dc1201910c7d","counterIds":["bc7587e019fe6ab7adef03f71cac478b"]}],"segmentGroupId":6265,"rules":["and",["or",["<",["get-trigger-count","bc7587e019fe6ab7adef03f71cac478b",365],1]]]},"sgmt_50402":{"name":"sgmt_50402","triggers":[{"on_event":"scriptLoad","rules":["begins",["location","path"],"\/ohjelmakirjastot\/2822"],"id":"d8f4cd09c02d5243527b27bb36bdac9d","counterIds":["9e93e4ad4b3fd62190a4a580400e7ce8"]},{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","2726","3125"]]],"id":"b09eeaf86179a6a1b8064b0aeaf7cda7","counterIds":["c4309c65e450d4f8e24c4aa0142bc4e3"]}],"segmentGroupId":6264,"rules":["or",["or",[">=",["get-trigger-count","9e93e4ad4b3fd62190a4a580400e7ce8",180],1]],["or",[">=",["get-trigger-count","c4309c65e450d4f8e24c4aa0142bc4e3",180],1]]]},"sgmt_50481":{"name":"sgmt_50481","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeHasRecordings"],["in",["get-event-data","value"],["array","true"]]],"id":"f0bcbedef9907ecd95df6e33c5f4d386","counterIds":["0451cf4d566ced68b38ee255734929a1"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","0451cf4d566ced68b38ee255734929a1",180],1]]]},"sgmt_50499":{"name":"sgmt_50499","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"]],"id":"24aef8fe5582e6511149941162329b32","counterIds":["38c87f48241aea6a25d474dae77dc092"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","38c87f48241aea6a25d474dae77dc092",90],1]]]},"sgmt_51116":{"name":"sgmt_51116","triggers":[{"on_event":"product","rules":["and",["eq?",["get-event-data","type"],"tablet"]],"id":"3b9ad812ec0d0da08f2800318a7ddeef","counterIds":["386f8afa07b6ba2bd62adde80a7ec591"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","386f8afa07b6ba2bd62adde80a7ec591",30],1]]]},"sgmt_51213":{"name":"sgmt_51213","triggers":[{"on_event":"scriptLoad","rules":["begins",["location","path"],"\/asiakaspalvelu"],"id":"2f552a026fa6c2752230def649c98a45","counterIds":["2979024a555f5069ac2fb6dafc821c16"]}],"segmentGroupId":6167,"rules":["and",["or",[">=",["get-trigger-count","2979024a555f5069ac2fb6dafc821c16",14],1]]]},"sgmt_51215":{"name":"sgmt_51215","triggers":[{"on_event":"scriptLoad","rules":["begins",["location","path"],"\/omaguru"],"id":"6ac150cb1a63fd76bb7b0dd4206b9ece","counterIds":["c6bfa98ac43d8ca42d953b69778cfebc"]}],"segmentGroupId":6167,"rules":["and",["or",[">=",["get-trigger-count","c6bfa98ac43d8ca42d953b69778cfebc",14],1]]]},"sgmt_51262":{"name":"sgmt_51262","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],1763]],"id":"61faf4ad61bbff9abd5b12c316b7d4b2","counterIds":["23efb0609de43d68ab41272472872f86"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","23efb0609de43d68ab41272472872f86",14],1]]]},"sgmt_51263":{"name":"sgmt_51263","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],1762]],"id":"ec2a011788f4762b4fe96c1e2e2ca0b4","counterIds":["2308a130f96cd7f450070331cae158ae"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","2308a130f96cd7f450070331cae158ae",14],1]]]},"sgmt_51972":{"name":"sgmt_51972","triggers":[{"on_event":"conversion","rules":["and",["eq?",["get-event-data","type"],"transaction"]],"id":"2c9166505636d41571af7f746596e3f8","counterIds":["971c0d70cfa68b6ba3ed734c655e6fc9"]}],"segmentGroupId":6269,"rules":["and",["or",[">=",["get-trigger-count","971c0d70cfa68b6ba3ed734c655e6fc9",30],1]]]},"sgmt_51974":{"name":"sgmt_51974","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","query","utm_source"],"sbon"],"id":"699e19c5581fa478f0b694825512ff24","counterIds":["beae26987906ea4d8ba47e55b49064f5"]},{"on_event":"scriptLoad","rules":["contains",["location","query","utm_source"],"bonusta"],"id":"631850a8a32398910741cd475de77884","counterIds":["e8560d1a965e6eae171c51e21e18b9d4"]}],"segmentGroupId":6265,"rules":["and",["or",[">=",["get-trigger-count","beae26987906ea4d8ba47e55b49064f5",60],1],[">=",["get-trigger-count","e8560d1a965e6eae171c51e21e18b9d4",60],1]]]},"sgmt_51975":{"name":"sgmt_51975","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","query","utm_source"],"elisa_vinkki_laskuvinkit"],"id":"c4c44212c6d8d0b755c4bffc56620924","counterIds":["99c3d036de7f2b45d2366c018049f9cb"]}],"segmentGroupId":6265,"rules":["and",["or",[">=",["get-trigger-count","99c3d036de7f2b45d2366c018049f9cb",60],1]]]},"sgmt_52052":{"name":"sgmt_52052","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],2211]],"id":"9c55dd7512b4b60cbfc02f66d4f81215","counterIds":["5adacc40d5e347752782fc4575bb7da1"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","5adacc40d5e347752782fc4575bb7da1",14],3]]]},"sgmt_52128":{"name":"sgmt_52128","triggers":[{"on_event":"product.purchase","rules":["and",["in",["get-event-data","id"],["array","product-3933"]]],"id":"d23549541fe0d396de40a350b72d4e0a","counterIds":["d76e64644bdb7091c1d3169b8cc3c8d4"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","d76e64644bdb7091c1d3169b8cc3c8d4",90],1]]]},"sgmt_52149":{"name":"sgmt_52149","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],2294]],"id":"4b740973e2d90bfcdc167e97b52a28e5","counterIds":["8c51798559c566c8cd33a285448fb6db"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","8c51798559c566c8cd33a285448fb6db",180],1]]]},"sgmt_52730":{"name":"sgmt_52730","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","href"],"\/puhelinliittymat"],"id":"44f0a8573f8170b91a25d062778af41c","counterIds":["fbaec4cb7822739a97f4e69d3d8f17f4"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","fbaec4cb7822739a97f4e69d3d8f17f4",14],1]]]},"sgmt_52921":{"name":"sgmt_52921","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","anchor"],"aspa-1"],"id":"535a7bfbe2b385ef3eb0157b488cc003","counterIds":["9badea4de2f2cdb01a5be1631e34a135"]}],"segmentGroupId":6236,"rules":["and",["or",[">=",["get-trigger-count","9badea4de2f2cdb01a5be1631e34a135",1],1]]]},"sgmt_52922":{"name":"sgmt_52922","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","anchor"],"aspa-2"],"id":"c795b134e585a51178cc42c5ad761989","counterIds":["c0803b734015cc99a6b43f930ccf65f6"]}],"segmentGroupId":6236,"rules":["and",["or",[">=",["get-trigger-count","c0803b734015cc99a6b43f930ccf65f6",1],1]]]},"sgmt_52954":{"name":"sgmt_52954","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"viihdeOrderedProduct"],["in",["get-event-data","value"],["array","3933"]]],"id":"1d49c86eecbc50415cb578257121fbef","counterIds":["d09554a80384c51f9a5c17c68bd98211"]}],"segmentGroupId":6045,"rules":["and",["or",[">=",["get-trigger-count","d09554a80384c51f9a5c17c68bd98211",60],1]]]},"sgmt_53179":{"name":"sgmt_53179","triggers":[{"on_event":"scriptLoad","rules":["begins",["location","path"],"\/kotiverkko\/"],"id":"3b38e151def54e514062cfd125cd5668","counterIds":["43f4412eac6aadaaf2c1a509b6728b87"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","43f4412eac6aadaaf2c1a509b6728b87",30],1]]]},"sgmt_53520":{"name":"sgmt_53520","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],2694]],"id":"479da52916c93dfed2e660c7d22277d3","counterIds":["7b932d1a590345983a213d936e1e58f4"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","7b932d1a590345983a213d936e1e58f4",14],1]]]},"sgmt_53555":{"name":"sgmt_53555","triggers":[{"on_event":"product.purchase","rules":["and",["in",["get-event-data","id"],["array","product-2396","product-3692","product-2397","product-2398","Elisa Turvapaketti 1"]]],"id":"c33ae15d8f68a2e5836b9d4a5f728162","counterIds":["5df004d56f1761174eda2104bcecbfb4"]}],"segmentGroupId":6269,"rules":["and",["or",[">=",["get-trigger-count","5df004d56f1761174eda2104bcecbfb4",60],1]]]},"sgmt_53664":{"name":"sgmt_53664","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"omaElisaLogin"],["in",["get-event-data","value"],["array","true"]]],"id":"2a4272d15d8c31216718dc1201910c7d","counterIds":["87985cd7954c3be06342fdd7c854466f"]}],"segmentGroupId":6265,"rules":["and",["or",[">=",["get-trigger-count","87985cd7954c3be06342fdd7c854466f",180],3]]]},"sgmt_53665":{"name":"sgmt_53665","triggers":[{"on_event":"scriptLoad","rules":["begins",["location","href"],"https:\/\/elisa.fi\/asiakaspalvelu\/"],"id":"e5f1d3d2eddf870206befc130bccc870","counterIds":["9a46d1964451481a26e97ff374bacc3a"]}],"segmentGroupId":6265,"rules":["and",["or",[">=",["get-trigger-count","9a46d1964451481a26e97ff374bacc3a",90],1]]]},"sgmt_53668":{"name":"sgmt_53668","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"omaElisaLogin"],["in",["get-event-data","value"],["array","true"]]],"id":"2a4272d15d8c31216718dc1201910c7d","counterIds":["87985cd7954c3be06342fdd7c854466f"]}],"segmentGroupId":6265,"rules":["and",["or",["<=",["get-trigger-count","87985cd7954c3be06342fdd7c854466f",180],2]]]},"sgmt_53805":{"name":"sgmt_53805","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","query","utm_campaign"],"AitioAppSalesWebshopcustomer"],"id":"d2df7afa51e1ceb7650dbd056130d8bc","counterIds":["c2861fb1385be697b28285207adc278d"]},{"on_event":"scriptLoad","rules":["eq?",["location","query","utm_source"],"elmako"],"id":"19d7ce3be8a7cd4dd3883f55e075a8e3","counterIds":["fe5d012a4e24349426979ded49db0d56"]},{"on_event":"scriptLoad","rules":["eq?",["location","query","campaign"],"AitioAppSalesWebshopcustomer"],"id":"c171a6c3150803efc9126123a5581945","counterIds":["4972b0f4c75dd66be874b3a9a83c862d"]},{"on_event":"scriptLoad","rules":["eq?",["location","query","source"],"elmako"],"id":"2c426cd8f37a6940bdb8f7161d906e2e","counterIds":["36ed5aa5b9737f73e7afcc70f26d135e"]}],"segmentGroupId":6264,"rules":["or",["and",[">=",["get-trigger-count","c2861fb1385be697b28285207adc278d",30],1],[">=",["get-trigger-count","fe5d012a4e24349426979ded49db0d56",30],1]],["and",[">=",["get-trigger-count","4972b0f4c75dd66be874b3a9a83c862d",30],1],[">=",["get-trigger-count","36ed5aa5b9737f73e7afcc70f26d135e",30],1]]]},"sgmt_53822":{"name":"sgmt_53822","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"browserLanguage"],["in",["get-event-data","value"],["array","swedish"]]],"id":"1722bab138aa4bb0b4a0224a0e0dfe42","counterIds":["31a1704973b55d5a2328deb63c605044"]},{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"userLanguage"],["in",["get-event-data","value"],["array","swedish"]]],"id":"b3ba10c14bddb3418c7b88e48e9bf758","counterIds":["7255074a8b69677d8223f8939d3465af"]}],"segmentGroupId":6265,"rules":["and",["or",[">=",["get-trigger-count","31a1704973b55d5a2328deb63c605044",365],1],[">=",["get-trigger-count","7255074a8b69677d8223f8939d3465af",365],1]]]},"sgmt_53823":{"name":"sgmt_53823","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","path"],"\/asiakaspalvelu"],"id":"8e7a3a5d50a1ee8aef8371d7f066dd44","counterIds":["f67694bce77be7bde4d1e3e5be254396"]},{"on_event":"scriptLoad","rules":["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/"],"id":"137e799277f93bbc56503da8f9002b18","counterIds":["b523cbeddd956fa0d1ffabca55a3945f"]},{"on_event":"scriptLoad","rules":["contains",["location","path"],"omaguru"],"id":"d4dd0d144c44020c7eddca56c5724a27","counterIds":["b4ea5088d4485481288962399bda0ea8"]},{"on_event":"scriptLoad","rules":["begins",["location","path"],"\/asiakaspalvelu\/yhteystiedot\/"],"id":"c8099ae81b36bf88fde6c13a961a36c0","counterIds":["59b2f07aea3a66f329a5940c3f6db9b4"]}],"segmentGroupId":6265,"rules":["and",["or",[">=",["get-trigger-count","f67694bce77be7bde4d1e3e5be254396",7],1],[">=",["get-trigger-count","b523cbeddd956fa0d1ffabca55a3945f",7],1],[">=",["get-trigger-count","b4ea5088d4485481288962399bda0ea8",7],1]],["or",["<",["get-trigger-count","59b2f07aea3a66f329a5940c3f6db9b4",7],1]]]},"sgmt_53824":{"name":"sgmt_53824","triggers":[{"on_event":"scriptLoad","rules":["begins",["location","path"],"\/asiakaspalvelu\/aihe\/svenska\/"],"id":"fa7161d0188e588618d33c132e2a244d","counterIds":["872d6e265ae8d2c8cd513854f3bb7e11"]}],"segmentGroupId":6265,"rules":["and",["or",[">=",["get-trigger-count","872d6e265ae8d2c8cd513854f3bb7e11",180],1]]]},"sgmt_53825":{"name":"sgmt_53825","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","query","wm"],"logout"],"id":"02f0d18245906e9499694ae253030e9c","counterIds":["2d4cc060f74aa00928523e62ec568e4e"]}],"segmentGroupId":6270,"rules":["and",["or",[">=",["get-trigger-count","2d4cc060f74aa00928523e62ec568e4e",14],1]]]},"sgmt_53827":{"name":"sgmt_53827","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"elisaFrontpageLoginActions"],["in",["get-event-data","value"],["array","email","Email","S\u00e4hk\u00f6posti","s\u00e4hk\u00f6posti"]]],"id":"e1b1af8e488851a0b7f641a9b3e5e2f2","counterIds":["596e9ae792441edb090aa36c9112e46f"]}],"segmentGroupId":6270,"rules":["and",["or",[">=",["get-trigger-count","596e9ae792441edb090aa36c9112e46f",14],1]]]},"sgmt_53828":{"name":"sgmt_53828","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"elisaFrontpageActions"],["in",["get-event-data","value"],["array","emailLogin"]]],"id":"c356182dd1a9fdff916369c6849fd650","counterIds":["3df352296dc0d8315cfda64911727029"]},{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"elisaFrontpageLoginActions"],["in",["get-event-data","value"],["array","Email","S\u00e4hk\u00f6posti","email","s\u00e4hk\u00f6posti"]]],"id":"2930e485b4a253a133d57322ad4652be","counterIds":["549c45b16b1f40c6d991251d5e49fc6a"]},{"on_event":"scriptLoad","rules":["eq?",["location","host"],"webmail.elisa.fi"],"id":"e5a39f63dc41f22a85fb229d741c9424","counterIds":["4ea1644be5bd96b02ed29f1642c65e28"]}],"segmentGroupId":6270,"rules":["and",["or",[">=",["get-trigger-count","3df352296dc0d8315cfda64911727029",7],2],[">=",["get-trigger-count","549c45b16b1f40c6d991251d5e49fc6a",7],2],[">=",["get-trigger-count","4ea1644be5bd96b02ed29f1642c65e28",7],2]]]},"sgmt_53830":{"name":"sgmt_53830","triggers":[{"on_event":"conversion","rules":["and",["eq?",["get-event-data","type"],"login"]],"id":"acea8f199d481e14127972b1b995275a","counterIds":["0bbd6ceb51d2d8c0fd2f40e853374cf5"]}],"segmentGroupId":6270,"rules":["and",["or",[">=",["get-trigger-count","0bbd6ceb51d2d8c0fd2f40e853374cf5",14],1]]]},"sgmt_53831":{"name":"sgmt_53831","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"elisaFrontpageLoginActions"],["in",["get-event-data","value"],["array","Email","S\u00e4hk\u00f6posti","email","s\u00e4hk\u00f6posti"]]],"id":"2930e485b4a253a133d57322ad4652be","counterIds":["549c45b16b1f40c6d991251d5e49fc6a"]},{"on_event":"scriptLoad","rules":["contains",["location","host"],"webmail.elisa.fi"],"id":"f6b188fd50cbf9f518654228dc89c4f9","counterIds":["2bd64e42bf7a40b59471c37903bfc385"]}],"segmentGroupId":6270,"rules":["and",["or",[">=",["get-trigger-count","549c45b16b1f40c6d991251d5e49fc6a",1],1],[">=",["get-trigger-count","2bd64e42bf7a40b59471c37903bfc385",1],1]]]},"sgmt_53832":{"name":"sgmt_53832","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"elisaFrontpageActions"],["in",["get-event-data","value"],["array","emailLogin"]]],"id":"c356182dd1a9fdff916369c6849fd650","counterIds":["3df352296dc0d8315cfda64911727029"]},{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"elisaFrontpageLoginActions"],["in",["get-event-data","value"],["array","Email","S\u00e4hk\u00f6posti","email","s\u00e4hk\u00f6posti"]]],"id":"2930e485b4a253a133d57322ad4652be","counterIds":["549c45b16b1f40c6d991251d5e49fc6a"]},{"on_event":"scriptLoad","rules":["eq?",["location","host"],"webmail.elisa.fi"],"id":"e5a39f63dc41f22a85fb229d741c9424","counterIds":["b66d54527900dda91d0bf2f40604608c"]},{"on_event":"scriptLoad","rules":["eq?",["location","query","wm"],"logout"],"id":"02f0d18245906e9499694ae253030e9c","counterIds":["7638bcd7a3ac821aa71e7dfa73b95358"]}],"segmentGroupId":6270,"rules":["and",["or",[">=",["get-trigger-count","3df352296dc0d8315cfda64911727029",7],5],[">=",["get-trigger-count","549c45b16b1f40c6d991251d5e49fc6a",7],5],[">=",["get-trigger-count","b66d54527900dda91d0bf2f40604608c",7],5],[">=",["get-trigger-count","7638bcd7a3ac821aa71e7dfa73b95358",7],5]]]},"sgmt_53833":{"name":"sgmt_53833","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"elisaFrontpageLoginActions"],["in",["get-event-data","value"],["array","Verkkokauppa","verkkokauppa"]]],"id":"57ddc3c6cb8aff47b60c4880b733e522","counterIds":["4a51c1b5b5ba5fb13fd972287d0b10a2"]}],"segmentGroupId":6270,"rules":["and",["or",[">=",["get-trigger-count","4a51c1b5b5ba5fb13fd972287d0b10a2",14],1]]]},"sgmt_53836":{"name":"sgmt_53836","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","href"],"mobiililaajakaista"],"id":"5cfa2c61b140729bde1b4c8f4f35140b","counterIds":["ce7ed2621afd488da48fcf318633ce60"]}],"segmentGroupId":6271,"rules":["and",["and",[">=",["get-trigger-count","ce7ed2621afd488da48fcf318633ce60",30],1]]]},"sgmt_53838":{"name":"sgmt_53838","triggers":[{"on_event":"scriptLoad","rules":["regex?",["location","path"],"\\\/matkapuhelin\\\/"],"id":"139b194ce09bdd746e914e3034cc3430","counterIds":["3ccc9a79293a085a6de04fb51e45bc07"]},{"on_event":"scriptLoad","rules":["eq?",["location","host"],"verkkoasiointi.elisa.fi"],"id":"8c1d0a8ad58e92d76487e453214b7e11","counterIds":["7bbf8352057553eb0f0f79ff7ef92246"]}],"segmentGroupId":6271,"rules":["and",["and",[">=",["get-trigger-count","3ccc9a79293a085a6de04fb51e45bc07",14],1],[">=",["get-trigger-count","7bbf8352057553eb0f0f79ff7ef92246",14],1]]]},"sgmt_53839":{"name":"sgmt_53839","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","anchor"],"matkapuhelinliittymat"],"id":"30ae12681e2556996f050c476bbe2fb2","counterIds":["ad864d0049f04ee4a6c5f8276602044c"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","ad864d0049f04ee4a6c5f8276602044c",30],1]]]},"sgmt_53840":{"name":"sgmt_53840","triggers":[{"on_event":"scriptLoad","rules":["regex?",["location","path"],"palvelut\\\/viihde"],"id":"f3d1b08e9037818148e0f5a09d862d29","counterIds":["0fc09b598da7f202ee2e0c40fc875737"]},{"on_event":"scriptLoad","rules":["begins",["location","path"],"\/viihde"],"id":"4bcc876ec35281477d73f4506742103d","counterIds":["1c2b0ea8d56715141ffad33b9d127114"]},{"on_event":"scriptLoad","rules":["contains",["location","host"],"elisaviihde"],"id":"a716a340284a5a7360d9bda10d1cac1d","counterIds":["af55f0d950c9c01845bd18d1b73490f9"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","0fc09b598da7f202ee2e0c40fc875737",30],1],[">=",["get-trigger-count","1c2b0ea8d56715141ffad33b9d127114",30],1],[">=",["get-trigger-count","af55f0d950c9c01845bd18d1b73490f9",30],1]]]},"sgmt_53842":{"name":"sgmt_53842","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","path"],"\/matkapuhelinliittymat"],"id":"0fc3969199b191cc2904cfcc4ff0ca80","counterIds":["85c06d099721c0e83b1842d45609cd18"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","85c06d099721c0e83b1842d45609cd18",7],1]]]},"sgmt_53843":{"name":"sgmt_53843","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","path"],"\/prepaid"],"id":"f728e94c60f6bb92c2e5f9df731adf97","counterIds":["335ff18931a36a9a7bf46c2b62f9406f"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","335ff18931a36a9a7bf46c2b62f9406f",7],1]]]},"sgmt_53844":{"name":"sgmt_53844","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","path"],"\/latausliittymat"],"id":"44bf1894c87780e565e698fa786cf8e2","counterIds":["66734f4447e8f9c1f79acce4a8eabefa"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","66734f4447e8f9c1f79acce4a8eabefa",7],1]]]},"sgmt_53845":{"name":"sgmt_53845","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","path"],"\/kotipuhelin"],"id":"432d0f12e308d5e00512a4ddfbc55bfd","counterIds":["8d7c67f17d694a057dbc8667b7bbb891"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","8d7c67f17d694a057dbc8667b7bbb891",7],1]]]},"sgmt_53846":{"name":"sgmt_53846","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","path"],"\/tietoturva"],"id":"68abaa14b2a7a37862ad08730f4a8227","counterIds":["27e27d8ebdec0cc760dc4b7a526ba933"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","27e27d8ebdec0cc760dc4b7a526ba933",7],1]]]},"sgmt_53848":{"name":"sgmt_53848","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","path"],"\/pilvilinna"],"id":"269316ac94830209bdded0ae2fea55c9","counterIds":["68b0c06caafc7b26ba36e3c255b270aa"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","68b0c06caafc7b26ba36e3c255b270aa",7],1]]]},"sgmt_53849":{"name":"sgmt_53849","triggers":[{"on_event":"visit","rules":[],"id":"d4ff14b8d7e54bdf24affe4eb3dffe66","counterIds":["e6551101adfdf1c29b02ada2d9e71f21"]}],"segmentGroupId":6268,"rules":["and",["or",[">=",["get-trigger-count","e6551101adfdf1c29b02ada2d9e71f21",30],2]]]},"sgmt_53850":{"name":"sgmt_53850","triggers":[{"on_event":"visit","rules":[],"id":"d4ff14b8d7e54bdf24affe4eb3dffe66","counterIds":["e6551101adfdf1c29b02ada2d9e71f21"]}],"segmentGroupId":6268,"rules":["and",["or",[">=",["get-trigger-count","e6551101adfdf1c29b02ada2d9e71f21",7],2]]]},"sgmt_53860":{"name":"sgmt_53860","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],2895]],"id":"9bd21144ba6ed9e5bc90f4dbdd36fa20","counterIds":["82e9b53d241b4d991e2a941cc2d619e7"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","82e9b53d241b4d991e2a941cc2d619e7",30],1]]]},"sgmt_53861":{"name":"sgmt_53861","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],2896]],"id":"2d4a2321506e7c8052eebbea83656773","counterIds":["967097c1fc58202a341bb0eea772a2e6"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","967097c1fc58202a341bb0eea772a2e6",30],1]]]},"sgmt_53862":{"name":"sgmt_53862","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],2894]],"id":"3a2b35914862e7f291a9c10fca9b905b","counterIds":["402b2b1e4fd8971624fb00740071d3dc"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","402b2b1e4fd8971624fb00740071d3dc",30],1]]]},"sgmt_53898":{"name":"sgmt_53898","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","href"],"kiinteat-laajakaistat"],"id":"62c0f5ef961ffae75545cc2211b98c99","counterIds":["22cf8f19ad40a2d812e458c2b82a20f1"]}],"segmentGroupId":6271,"rules":["and",["and",[">=",["get-trigger-count","22cf8f19ad40a2d812e458c2b82a20f1",30],1]]]},"sgmt_53923":{"name":"sgmt_53923","triggers":[{"on_event":"product.purchase","rules":[],"id":"ef0a748295d8a3c32c2f42247a15a4ff","counterIds":["ae01a35c32ce26ab0106a215820d2088"]}],"segmentGroupId":6269,"rules":["and",["or",[">",["get-trigger-count","ae01a35c32ce26ab0106a215820d2088",14],1]]]},"sgmt_54352":{"name":"sgmt_54352","triggers":[{"on_event":"conversion","rules":["and",["eq?",["get-event-data","type"],"transaction"]],"id":"2c9166505636d41571af7f746596e3f8","counterIds":["971c0d70cfa68b6ba3ed734c655e6fc9"]}],"segmentGroupId":6269,"rules":["and",["or",[">=",["get-trigger-count","971c0d70cfa68b6ba3ed734c655e6fc9",60],1]]]},"sgmt_54462":{"name":"sgmt_54462","triggers":[{"on_event":"product.purchase","rules":["and",["in",["get-event-data","id"],["array","product-1963"]]],"id":"3b040356b3334298eb7fcf2e1ce2c125","counterIds":["ab12e772a6fce7b96a84b114729b0a25"]}],"segmentGroupId":6269,"rules":["and",["or",[">=",["get-trigger-count","ab12e772a6fce7b96a84b114729b0a25",30],1]]]},"sgmt_54538":{"name":"sgmt_54538","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"productPurchaseCategory"],["in",["get-event-data","value"],["array","tablet"]]],"id":"67460cc3066c67da2cf76dcf91bdf2d9","counterIds":["6d482767439681861693bd893cc343ea"]}],"segmentGroupId":6269,"rules":["and",["or",[">=",["get-trigger-count","6d482767439681861693bd893cc343ea",60],1]]]},"sgmt_54672":{"name":"sgmt_54672","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Geolokaatio"],["in",["get-event-data","value"],["array","Kotka"]]],"id":"9d8e1d64205316af8c002f281c01501b","counterIds":["46ad90446b5b3b4dcdff401ecb2e5cf1"]}],"segmentGroupId":6267,"rules":["and",["or",[">=",["get-trigger-count","46ad90446b5b3b4dcdff401ecb2e5cf1",90],1]]]},"sgmt_54673":{"name":"sgmt_54673","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Geolokaatio"],["in",["get-event-data","value"],["array","Kuopio"]]],"id":"0b3b882577b5f3066c99274c9232326a","counterIds":["c1f3cc708d00bcf6fb1df83c3df7a056"]}],"segmentGroupId":6267,"rules":["and",["or",[">=",["get-trigger-count","c1f3cc708d00bcf6fb1df83c3df7a056",90],1]]]},"sgmt_54674":{"name":"sgmt_54674","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Geolokaatio"],["in",["get-event-data","value"],["array","Jyv\u00e4skyl\u00e4"]]],"id":"5b2848014f123f61b21624ce6166c662","counterIds":["bf444844f669e24e936045808192e037"]}],"segmentGroupId":6267,"rules":["and",["or",[">=",["get-trigger-count","bf444844f669e24e936045808192e037",90],1]]]},"sgmt_54675":{"name":"sgmt_54675","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Geolokaatio"],["in",["get-event-data","value"],["array","Oulu"]]],"id":"27a43fe274d1a1c98d32070875d1e6a2","counterIds":["03c9406afc25159c3f8c2e931ddf68a3"]}],"segmentGroupId":6267,"rules":["and",["or",[">=",["get-trigger-count","03c9406afc25159c3f8c2e931ddf68a3",90],1]]]},"sgmt_54676":{"name":"sgmt_54676","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Geolokaatio"],["in",["get-event-data","value"],["array","Tampere"]]],"id":"313b94064dbd720447e69b64df92c0d6","counterIds":["1c53af487a0505a644aa5be065326fa6"]}],"segmentGroupId":6267,"rules":["and",["or",[">=",["get-trigger-count","1c53af487a0505a644aa5be065326fa6",90],1]]]},"sgmt_54677":{"name":"sgmt_54677","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Geolokaatio"],["in",["get-event-data","value"],["array","Turku"]]],"id":"3d8292d276004cfa602b23fcd4327bfd","counterIds":["724d6e8e59434077c72bfde37effcdbe"]}],"segmentGroupId":6267,"rules":["and",["or",[">=",["get-trigger-count","724d6e8e59434077c72bfde37effcdbe",90],1]]]},"sgmt_54678":{"name":"sgmt_54678","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Geolokaatio"],["in",["get-event-data","value"],["array","Vantaa"]]],"id":"ec9d41a1118dd0d7440ad4c8a6882489","counterIds":["d2c6f47de6d553a5240f419ef4050fef"]}],"segmentGroupId":6267,"rules":["and",["or",[">=",["get-trigger-count","d2c6f47de6d553a5240f419ef4050fef",90],1]]]},"sgmt_54764":{"name":"sgmt_54764","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"productPurchaseCategory"],["in",["get-event-data","value"],["array","phone"]]],"id":"6cb769afb4d2a3775dc2268b223c8f65","counterIds":["50cd025e9ba4c149d0a7f6d186a58641"]}],"segmentGroupId":6269,"rules":["and",["or",[">=",["get-trigger-count","50cd025e9ba4c149d0a7f6d186a58641",30],1]]]},"sgmt_54765":{"name":"sgmt_54765","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"productPurchaseCategory"],["in",["get-event-data","value"],["array","audio"]]],"id":"a48e9631525fa9f69ed03c94c0e4cc39","counterIds":["72efa1dc1665b0700b1d3903598f7900"]}],"segmentGroupId":6269,"rules":["and",["or",[">=",["get-trigger-count","72efa1dc1665b0700b1d3903598f7900",30],1]]]},"sgmt_54775":{"name":"sgmt_54775","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3382]],"id":"590d8009f60d27913ac27e58e4fed682","counterIds":["9f630d899494bd675d11194220b885e4"]}],"segmentGroupId":6358,"rules":["and",["or",[">=",["get-trigger-count","9f630d899494bd675d11194220b885e4",180],1]]]},"sgmt_54776":{"name":"sgmt_54776","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3385]],"id":"c6c34df8bc0d519295f85beec57aa6ee","counterIds":["40476f625611e3386f54a11417f72e3f"]}],"segmentGroupId":6358,"rules":["and",["or",[">=",["get-trigger-count","40476f625611e3386f54a11417f72e3f",180],1]]]},"sgmt_54782":{"name":"sgmt_54782","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3344]],"id":"950bcf41f09f9eefc900b2d6b54d951f","counterIds":["74badd637c9c31a3613b0602cc176a96"]}],"segmentGroupId":6360,"rules":["and",["or",[">=",["get-trigger-count","74badd637c9c31a3613b0602cc176a96",1],1]]]},"sgmt_54783":{"name":"sgmt_54783","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3399]],"id":"ec1bcd9ab668fd14da1536480983a087","counterIds":["3aa728bea29bc698d7ac1d6294217c9e"]}],"segmentGroupId":6359,"rules":["and",["or",[">=",["get-trigger-count","3aa728bea29bc698d7ac1d6294217c9e",1],1]]]},"sgmt_54784":{"name":"sgmt_54784","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3400]],"id":"87dc342a6720a06e3b0844fab8b94db2","counterIds":["b5acdedf08df5c85e2ead4d50ef752e6"]}],"segmentGroupId":6359,"rules":["and",["or",[">=",["get-trigger-count","b5acdedf08df5c85e2ead4d50ef752e6",1],1]]]},"sgmt_54803":{"name":"sgmt_54803","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3402]],"id":"b521a421943d257984bd9b6643e4dd71","counterIds":["50a677dc490631bbd022e98ce69db2d3"]}],"segmentGroupId":6360,"rules":["and",["or",[">=",["get-trigger-count","50a677dc490631bbd022e98ce69db2d3",1],1]]]},"sgmt_54804":{"name":"sgmt_54804","triggers":[{"on_event":"product.purchase","rules":[],"id":"ef0a748295d8a3c32c2f42247a15a4ff","counterIds":["ae01a35c32ce26ab0106a215820d2088"]}],"segmentGroupId":6269,"rules":["and",["or",[">=",["get-trigger-count","ae01a35c32ce26ab0106a215820d2088",30],1]]]},"sgmt_54805":{"name":"sgmt_54805","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3395]],"id":"9440077a5256c4b0b96697ed387190db","counterIds":["ca6a818e425eeb7bd725dcb411da81c9"]}],"segmentGroupId":6358,"rules":["and",["or",[">=",["get-trigger-count","ca6a818e425eeb7bd725dcb411da81c9",180],1]]]},"sgmt_54806":{"name":"sgmt_54806","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3405]],"id":"47ded7b7edfa94aaae33ff3f54e77752","counterIds":["400f3fc26e24d0ab518c18f85196e2df"]}],"segmentGroupId":6361,"rules":["and",["or",[">=",["get-trigger-count","400f3fc26e24d0ab518c18f85196e2df",180],1]]]},"sgmt_54807":{"name":"sgmt_54807","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3403]],"id":"a37ae56e879d96ec8e2d8239246c665d","counterIds":["c2036736918a4d84f6a7e9757db31384"]}],"segmentGroupId":6361,"rules":["and",["or",[">=",["get-trigger-count","c2036736918a4d84f6a7e9757db31384",180],1]]]},"sgmt_54808":{"name":"sgmt_54808","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3404]],"id":"b73fc30814dfe1987754a7270d693ab9","counterIds":["2154f2dc4ac018e91e8c87e15914ce6d"]}],"segmentGroupId":6361,"rules":["and",["or",[">=",["get-trigger-count","2154f2dc4ac018e91e8c87e15914ce6d",180],1]]]},"sgmt_55301":{"name":"sgmt_55301","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","href"],"kirja.elisa.fi"],"id":"a0ff5b5a2aec35fb3216c22e28ddcaeb","counterIds":["ff11987ac5fd8906bae810fea8eec867"]}],"segmentGroupId":6271,"rules":["and",["or",[">=",["get-trigger-count","ff11987ac5fd8906bae810fea8eec867",14],1]]]},"sgmt_55302":{"name":"sgmt_55302","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","path"],"\/sipoonherttua"],"id":"22f54d0cdea635513672ab0b2d6f6cc9","counterIds":["a2561a2d00236673877bbb934e814d7a"]}],"segmentGroupId":6264,"rules":["or",["or",[">=",["get-trigger-count","a2561a2d00236673877bbb934e814d7a",30],1]]]},"sgmt_55303":{"name":"sgmt_55303","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","path"],"\/nyrkki"],"id":"46f8d8b574d4d289d0c82ef2f6a001ed","counterIds":["9b3587b0e7ad14d6461c44ed700803ab"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","9b3587b0e7ad14d6461c44ed700803ab",30],1]]]},"sgmt_55304":{"name":"sgmt_55304","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","path"],"\/ivalo"],"id":"949846b25d2cef2a0c7307874f1f5169","counterIds":["0c49456f22179e9697e10f5fa2cfff3e"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","0c49456f22179e9697e10f5fa2cfff3e",30],1]]]},"sgmt_55305":{"name":"sgmt_55305","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","path"],"\/maanantai"],"id":"0534b68351eb29edbbff84e7d1624e68","counterIds":["0b221133c66c70184b40c07704eb38de"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","0b221133c66c70184b40c07704eb38de",30],1]]]},"sgmt_55348":{"name":"sgmt_55348","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","path"],"\/huone301"],"id":"051c8e3e1b3ef17d55147c3ce4eb5b17","counterIds":["d8ef8cf942e066475bfebd2659a13753"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","d8ef8cf942e066475bfebd2659a13753",14],1]]]},"sgmt_55349":{"name":"sgmt_55349","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","path"],"\/kaikkisynnit"],"id":"2b0a9c950abf7caf111481ad099676d2","counterIds":["ec8e9ab714216dfd3d5f073e26cec41f"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","ec8e9ab714216dfd3d5f073e26cec41f",14],1]]]},"sgmt_55350":{"name":"sgmt_55350","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","path"],"\/aitio"],"id":"45a40526e5e35c2ab9ad330ee329e402","counterIds":["73c00ac5b73af0e9c06be8c7f94783c7"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","73c00ac5b73af0e9c06be8c7f94783c7",14],1]]]},"sgmt_55387":{"name":"sgmt_55387","triggers":[{"on_event":"visit","rules":["contains",["referrer","host"],"facebook"],"id":"a5daed77d3353662df685e34179c473e","counterIds":["eeb455c597fb5ef41106c58252b7b1f0"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","eeb455c597fb5ef41106c58252b7b1f0",2],1]]]},"sgmt_56263":{"name":"sgmt_56263","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","href"],"https:\/\/elisa.fi\/kauppa\/tarjoukset"],"id":"7b8288d54edfee1fd244bb25a5b0cb65","counterIds":["52c9ed1e1ec5822b054cb592eac7786b"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","52c9ed1e1ec5822b054cb592eac7786b",14],1]]]},"sgmt_56830":{"name":"sgmt_56830","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"ISP"],["in",["get-event-data","value"],["array","Elisa Eesti","Elisa Mobile","Elisa Oyj","Elisa Teleteenused","Suomi Communications Oy","Anvia Oyj"]]],"id":"3ed10000ae30f629cad9c194dc701b3d","counterIds":["f62040339a676535ba1994f645e4e265"]}],"segmentGroupId":6495,"rules":["and",["or",[">=",["get-trigger-count","f62040339a676535ba1994f645e4e265",14],1]]]},"sgmt_56831":{"name":"sgmt_56831","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"ISP"],["in",["get-event-data","value"],["array","DNA Oyj"]]],"id":"1bced4ab918b35b98ed733d0a7bf2629","counterIds":["63aaca034936b79651d394b3f2b62681"]}],"segmentGroupId":6495,"rules":["and",["or",[">=",["get-trigger-count","63aaca034936b79651d394b3f2b62681",14],1]]]},"sgmt_56832":{"name":"sgmt_56832","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"ISP"],["in",["get-event-data","value"],["array","Telia Communication Oy","Telia Eesti","Telia Finland"]]],"id":"a6ef543ae62662cd195245f1e7b7072d","counterIds":["fc08967960b6283fb1141951b201da7f"]}],"segmentGroupId":6495,"rules":["and",["or",[">=",["get-trigger-count","fc08967960b6283fb1141951b201da7f",14],1]]]},"sgmt_56842":{"name":"sgmt_56842","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"articleTag"],["in",["get-event-data","value"],["array","5G","5G Kotinetti","5G-mobiiliverkko"]]],"id":"51b29213ac0cc304332653a932208bd4","counterIds":["46f3dde492063c7a8cf84733c173637e"]}],"segmentGroupId":5823,"rules":["and",["or",[">=",["get-trigger-count","46f3dde492063c7a8cf84733c173637e",30],1]]]},"sgmt_56854":{"name":"sgmt_56854","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","href"],"https:\/\/elisa.fi\/kauppa\/erikoistarjous"],"id":"0cb953639825583e610dc90000377786","counterIds":["708af5b022fa37275a3da81805470a7d"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","708af5b022fa37275a3da81805470a7d",14],1]]]},"sgmt_57952":{"name":"sgmt_57952","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","href"],"https:\/\/elisa.fi\/viihdepremium\/"],"id":"cb584efca58c9e09eb513f404f81b168","counterIds":["cc69d7f16819f834dd5c0cf64996d01e"]}],"segmentGroupId":6264,"rules":["and",["or",[">=",["get-trigger-count","cc69d7f16819f834dd5c0cf64996d01e",14],1]]]},"sgmt_58153":{"name":"sgmt_58153","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","anchor"],"fr-test"],"id":"faf0a679ccc9af63d02ebbd76f0ae447","counterIds":["fbfc78f9cef314ffade556d834dfe89d"]}],"segmentGroupId":6236,"rules":["and",["or",[">=",["get-trigger-count","fbfc78f9cef314ffade556d834dfe89d",1],1]]]},"sgmt_58352":{"name":"sgmt_58352","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"View Product"]],"id":"cd18d07db93c12a1b4321cf93fb6ddc4","counterIds":["a65a20cd3909eaa38b0f2d6a003eaa72"]},{"on_event":"product","rules":["and",["eq?",["get-event-data","type"],"product\/phone"]],"id":"1ce375b9e777a4b97a6216e074732d34","counterIds":["16a304c54aaed94734efc6e221831f17"]},{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8362]],"id":"83dd208f2d0dd476e6fb21ed2a6cfed2","counterIds":["ec008a67c7c7220f33ec83714a81bfd6"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","a65a20cd3909eaa38b0f2d6a003eaa72",7],1],[">=",["get-trigger-count","16a304c54aaed94734efc6e221831f17",7],1],[">=",["get-trigger-count","ec008a67c7c7220f33ec83714a81bfd6",7],1]]]},"sgmt_58353":{"name":"sgmt_58353","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"hasCart"]],"id":"a1750e340244a2153bb9265ee64b1221","counterIds":["e7889c3851b9f35f76c99101ab7ed837"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","e7889c3851b9f35f76c99101ab7ed837",14],1]]]},"sgmt_58378":{"name":"sgmt_58378","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],2772]],"id":"d319c181cb52f3e1381995c615b114a7","counterIds":["912a37471a4ac5e79663be995e05dd82"]}],"segmentGroupId":6265,"rules":["and",["or",[">=",["get-trigger-count","912a37471a4ac5e79663be995e05dd82",180],2]],["or",["<=",["get-trigger-count","912a37471a4ac5e79663be995e05dd82",180],10]]]},"sgmt_58715":{"name":"sgmt_58715","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],2772]],"id":"d319c181cb52f3e1381995c615b114a7","counterIds":["912a37471a4ac5e79663be995e05dd82"]},{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],6077]],"id":"fcaff49400fc66d09f15e47699db1659","counterIds":["dcc6a3322da1673da0f83cc1bc804276"]}],"segmentGroupId":7017,"rules":["and",["and",[">=",["get-trigger-count","912a37471a4ac5e79663be995e05dd82",3],1],[">=",["get-trigger-count","dcc6a3322da1673da0f83cc1bc804276",3],1]]]},"sgmt_58716":{"name":"sgmt_58716","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],3962]],"id":"27ee0c1ae72625b059e38445f42984c0","counterIds":["d676a10dd5d2f5fb0ddf42e382908b26"]},{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],6077]],"id":"fcaff49400fc66d09f15e47699db1659","counterIds":["00fd7c9d3220aa58cae6965368a395d9"]}],"segmentGroupId":7017,"rules":["and",["or",[">=",["get-trigger-count","d676a10dd5d2f5fb0ddf42e382908b26",3],1],["<",["get-trigger-count","00fd7c9d3220aa58cae6965368a395d9",3],1]]]},"sgmt_59212":{"name":"sgmt_59212","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],6077]],"id":"fcaff49400fc66d09f15e47699db1659","counterIds":["00fd7c9d3220aa58cae6965368a395d9"]}],"segmentGroupId":7140,"rules":["and",["or",[">=",["get-trigger-count","00fd7c9d3220aa58cae6965368a395d9",1],1]]]},"sgmt_59213":{"name":"sgmt_59213","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],6077]],"id":"fcaff49400fc66d09f15e47699db1659","counterIds":["00fd7c9d3220aa58cae6965368a395d9"]}],"segmentGroupId":7140,"rules":["and",["or",["<",["get-trigger-count","00fd7c9d3220aa58cae6965368a395d9",1],1]]]},"sgmt_59215":{"name":"sgmt_59215","triggers":[{"on_event":"scriptLoad","rules":["eq?",["location","query","customtest"],"on"],"id":"7c18e869ef189b1d43f0151a772bbff0","counterIds":["b82a1f01c72d36ba501673250c664227"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","b82a1f01c72d36ba501673250c664227",1],1]]]},"sgmt_59220":{"name":"sgmt_59220","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],6604]],"id":"dca02030cda6c730a6a28c500bae77e7","counterIds":["ac8c9c38f1a7bdc8eda5799aae7b8aad"]}],"segmentGroupId":6270,"rules":["and",["or",[">=",["get-trigger-count","ac8c9c38f1a7bdc8eda5799aae7b8aad",7],1]]]},"sgmt_59284":{"name":"sgmt_59284","triggers":[{"on_event":"scriptLoad","rules":["begins",["location","path"],"\/asiakaspalvelu\/aihe\/english\/"],"id":"ed9a0e0434c2c6853be3c3e47637d1cb","counterIds":["e538f968db20f9a8d97c024daadd628b"]}],"segmentGroupId":6265,"rules":["and",["or",[">=",["get-trigger-count","e538f968db20f9a8d97c024daadd628b",180],1]]]},"sgmt_59327":{"name":"sgmt_59327","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],6735]],"id":"1803eae0df1c8b14a72c0f22966eacd5","counterIds":["0e87cfb1d9c297edf953aff8119bdd02"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","0e87cfb1d9c297edf953aff8119bdd02",14],1]]]},"sgmt_60101":{"name":"sgmt_60101","triggers":[{"on_event":"scriptLoad","rules":["contains",["location","href"],"\/kiinteat-laajakaistat"],"id":"29ecb718bac7b50bec926b909f4e9686","counterIds":["335772e5800531df1fcd9aee961693c6"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","335772e5800531df1fcd9aee961693c6",30],1]]]}},"segmentCountersV2":{"b9ebb87ccb822b8f69082dec53ba7710":{"timelimit":30,"frequency":"everytime"},"458dafc01f719fec955cdac4ca762765":{"timelimit":30,"frequency":"everytime"},"f457005bb86a89e2ef296888bb69d4cc":{"timelimit":30,"frequency":"everytime"},"adfa0aa33c1a877bf27d7267773cf79d":{"timelimit":30,"frequency":"everytime"},"c52f7c6444e2513e13b1497210eb0efe":{"timelimit":30,"frequency":"everytime"},"c21fb4275316f0757e68ec65bcfa71a1":{"timelimit":30,"frequency":"everytime"},"80836ae74ae027df96651fee3e4b0a69":{"timelimit":90,"frequency":"everytime"},"7d2a8b8ee7449deb3d8cc2d1d4eba94a":{"timelimit":90,"frequency":"everytime"},"912a37471a4ac5e79663be995e05dd82":{"timelimit":3,"frequency":"everytime"},"db31c0a2fab47ede138dc40e03be168d":{"timelimit":5,"frequency":"everytime"},"d676a10dd5d2f5fb0ddf42e382908b26":{"timelimit":3,"frequency":"everytime"},"2e3153723432aea32b0f1bd9494a8a41":{"timelimit":60,"frequency":"everytime"},"3777fc010436b4519bc33973f6eda022":{"timelimit":60,"frequency":"everytime"},"756de82e5bf57d5f5985ff6f5e7e9c66":{"timelimit":60,"frequency":"everytime"},"fadf132c00e975e6919f982a9219b55f":{"timelimit":60,"frequency":"everytime"},"b760c670e7b0ebcb224b7c5977cf63e2":{"timelimit":60,"frequency":"everytime"},"869b1f3fd526d443816b95b05b8c2b11":{"timelimit":60,"frequency":"everytime"},"d62fbbadf8dde7e95c1f79bfbde4fd7e":{"timelimit":60,"frequency":"everytime"},"fd8ff6ff708fc3912cbdfffa62379de7":{"timelimit":60,"frequency":"everytime"},"f60a87cbc6581f99f0c1a5b772d5d62c":{"timelimit":60,"frequency":"everytime"},"0576eea5a1e90d5286417e574134f016":{"timelimit":60,"frequency":"everytime"},"d0c64a454c34ff732b9e232abc730a02":{"timelimit":60,"frequency":"everytime"},"fc423f8158e26b811982b20ea0cbb92b":{"timelimit":60,"frequency":"everytime"},"970ba442485425f8529db17a1efe4723":{"timelimit":60,"frequency":"everytime"},"740dd7b195574f94a61c6b98ff9c7d54":{"timelimit":60,"frequency":"everytime"},"19b972c94b4a9ab8dd4cb22f97da0834":{"timelimit":60,"frequency":"everytime"},"cc44eca1433cafeb606af263a05f9740":{"timelimit":60,"frequency":"everytime"},"16175c16730bd0e17740b2efc91eccff":{"timelimit":60,"frequency":"everytime"},"b33e1d4746f3861d22228eef18a2b30f":{"timelimit":60,"frequency":"everytime"},"56061cda2668909522fa4e33cfdba688":{"timelimit":60,"frequency":"everytime"},"e6dd54df82e11960b204dedc62367408":{"timelimit":60,"frequency":"everytime"},"ea7a7e209a0b833a46d46864385a5d21":{"timelimit":60,"frequency":"everytime"},"1c2b0ea8d56715141ffad33b9d127114":{"timelimit":30,"frequency":"everytime"},"52b2af01a7f8f38333ac8c365449d5f9":{"timelimit":30,"frequency":"everytime"},"4436eafeb3274ffd7d5e7f160a9f471d":{"timelimit":1,"frequency":"everytime"},"8dc90028eaabe5d7a5a7ad6e48eff5c7":{"timelimit":180,"frequency":"everytime"},"e6551101adfdf1c29b02ada2d9e71f21":{"timelimit":7,"frequency":"everytime"},"f2c2d8296e1b97e669fc85296bef1459":{"timelimit":180,"frequency":"everytime"},"2e80eb7bdeba75ac5d3a0df533c1cf80":{"timelimit":180,"frequency":"everytime"},"628817e64c35567d6c72f5af0a9acfd6":{"timelimit":60,"frequency":"everytime"},"51059025092b4cdaf00112828eb7527e":{"timelimit":60,"frequency":"everytime"},"6a27b9363f7611f2ac4afcc6549e0a51":{"timelimit":60,"frequency":"everytime"},"ccdf0325e53fd34f0d846b9c4cefbd0f":{"timelimit":60,"frequency":"everytime"},"cb18ae2ae3ae22baa7392107e85494bc":{"timelimit":60,"frequency":"everytime"},"650945fe968bd159f212c2f5457f8997":{"timelimit":60,"frequency":"everytime"},"3bdda5e34612ea949b0730775583d356":{"timelimit":60,"frequency":"everytime"},"c90888a3d65c34a81b0b0d6a22153409":{"timelimit":60,"frequency":"everytime"},"658d53b8388175f21074f36ab8e3eb53":{"timelimit":60,"frequency":"everytime"},"cd9dad5c0a53cebe8c6b5e8290f974da":{"timelimit":60,"frequency":"everytime"},"3de6f93254d443c05bcb58cd1aa9222f":{"timelimit":60,"frequency":"everytime"},"fa3db66591ddb84f2724df2e503dff92":{"timelimit":60,"frequency":"everytime"},"2ec93a842143af39015fc2deab92a451":{"timelimit":60,"frequency":"everytime"},"63082e58e09e66638714ea07eee62c55":{"timelimit":60,"frequency":"everytime"},"743aae4e411b7cf6fef57c4cf556f0f2":{"timelimit":60,"frequency":"everytime"},"d60972820a45e51a1c0ba37ddec96be0":{"timelimit":60,"frequency":"everytime"},"a2f5e33367795bba69f421dc35b67fcf":{"timelimit":60,"frequency":"everytime"},"c830e4eede06ddc62b2cb9f6c01df8a6":{"timelimit":60,"frequency":"everytime"},"9a1a5562f4546bd1c73d807ebc9d7b4f":{"timelimit":60,"frequency":"everytime"},"affab508f6950860ff001e63ce79f739":{"timelimit":60,"frequency":"everytime"},"85d996c46a26182894b74ead0db12b72":{"timelimit":60,"frequency":"everytime"},"9041f243e55f3f9205fb4465bb16f43b":{"timelimit":60,"frequency":"everytime"},"d5e5c654db2fd4914c221ce4f33b07a4":{"timelimit":60,"frequency":"everytime"},"ba80a5920e2de71303afccc044b70645":{"timelimit":60,"frequency":"everytime"},"bba03ec7456be7813b2703b2219c90d6":{"timelimit":60,"frequency":"everytime"},"0035e58971c55cd054576187e1228114":{"timelimit":180,"frequency":"everytime"},"773b2d47e8e7199961fd28781c758707":{"timelimit":60,"frequency":"everytime"},"bc7587e019fe6ab7adef03f71cac478b":{"timelimit":365,"frequency":"everytime"},"9e93e4ad4b3fd62190a4a580400e7ce8":{"timelimit":180,"frequency":"everytime"},"c4309c65e450d4f8e24c4aa0142bc4e3":{"timelimit":180,"frequency":"everytime"},"0451cf4d566ced68b38ee255734929a1":{"timelimit":180,"frequency":"everytime"},"38c87f48241aea6a25d474dae77dc092":{"timelimit":90,"frequency":"everytime"},"386f8afa07b6ba2bd62adde80a7ec591":{"timelimit":30,"frequency":"everytime"},"2979024a555f5069ac2fb6dafc821c16":{"timelimit":14,"frequency":"everytime"},"c6bfa98ac43d8ca42d953b69778cfebc":{"timelimit":14,"frequency":"everytime"},"23efb0609de43d68ab41272472872f86":{"timelimit":14,"frequency":"everytime"},"2308a130f96cd7f450070331cae158ae":{"timelimit":14,"frequency":"everytime"},"971c0d70cfa68b6ba3ed734c655e6fc9":{"timelimit":60,"frequency":"everytime"},"beae26987906ea4d8ba47e55b49064f5":{"timelimit":60,"frequency":"everytime"},"e8560d1a965e6eae171c51e21e18b9d4":{"timelimit":60,"frequency":"everytime"},"99c3d036de7f2b45d2366c018049f9cb":{"timelimit":60,"frequency":"everytime"},"5adacc40d5e347752782fc4575bb7da1":{"timelimit":14,"frequency":"everytime"},"d76e64644bdb7091c1d3169b8cc3c8d4":{"timelimit":90,"frequency":"everytime"},"8c51798559c566c8cd33a285448fb6db":{"timelimit":180,"frequency":"everytime"},"fbaec4cb7822739a97f4e69d3d8f17f4":{"timelimit":14,"frequency":"everytime"},"9badea4de2f2cdb01a5be1631e34a135":{"timelimit":1,"frequency":"everytime"},"c0803b734015cc99a6b43f930ccf65f6":{"timelimit":1,"frequency":"everytime"},"d09554a80384c51f9a5c17c68bd98211":{"timelimit":60,"frequency":"everytime"},"43f4412eac6aadaaf2c1a509b6728b87":{"timelimit":30,"frequency":"everytime"},"7b932d1a590345983a213d936e1e58f4":{"timelimit":14,"frequency":"everytime"},"5df004d56f1761174eda2104bcecbfb4":{"timelimit":60,"frequency":"everytime"},"87985cd7954c3be06342fdd7c854466f":{"timelimit":180,"frequency":"once_a_day"},"9a46d1964451481a26e97ff374bacc3a":{"timelimit":90,"frequency":"everytime"},"c2861fb1385be697b28285207adc278d":{"timelimit":30,"frequency":"everytime"},"fe5d012a4e24349426979ded49db0d56":{"timelimit":30,"frequency":"everytime"},"4972b0f4c75dd66be874b3a9a83c862d":{"timelimit":30,"frequency":"everytime"},"36ed5aa5b9737f73e7afcc70f26d135e":{"timelimit":30,"frequency":"everytime"},"31a1704973b55d5a2328deb63c605044":{"timelimit":365,"frequency":"everytime"},"7255074a8b69677d8223f8939d3465af":{"timelimit":365,"frequency":"everytime"},"f67694bce77be7bde4d1e3e5be254396":{"timelimit":7,"frequency":"everytime"},"b523cbeddd956fa0d1ffabca55a3945f":{"timelimit":7,"frequency":"everytime"},"b4ea5088d4485481288962399bda0ea8":{"timelimit":7,"frequency":"everytime"},"59b2f07aea3a66f329a5940c3f6db9b4":{"timelimit":7,"frequency":"everytime"},"872d6e265ae8d2c8cd513854f3bb7e11":{"timelimit":180,"frequency":"everytime"},"2d4cc060f74aa00928523e62ec568e4e":{"timelimit":14,"frequency":"everytime"},"596e9ae792441edb090aa36c9112e46f":{"timelimit":14,"frequency":"everytime"},"3df352296dc0d8315cfda64911727029":{"timelimit":7,"frequency":"everytime"},"549c45b16b1f40c6d991251d5e49fc6a":{"timelimit":7,"frequency":"everytime"},"4ea1644be5bd96b02ed29f1642c65e28":{"timelimit":7,"frequency":"once_a_visit"},"0bbd6ceb51d2d8c0fd2f40e853374cf5":{"timelimit":14,"frequency":"everytime"},"2bd64e42bf7a40b59471c37903bfc385":{"timelimit":1,"frequency":"everytime"},"b66d54527900dda91d0bf2f40604608c":{"timelimit":7,"frequency":"once_a_day"},"7638bcd7a3ac821aa71e7dfa73b95358":{"timelimit":7,"frequency":"once_a_day"},"4a51c1b5b5ba5fb13fd972287d0b10a2":{"timelimit":14,"frequency":"everytime"},"ce7ed2621afd488da48fcf318633ce60":{"timelimit":30,"frequency":"everytime"},"3ccc9a79293a085a6de04fb51e45bc07":{"timelimit":14,"frequency":"everytime"},"7bbf8352057553eb0f0f79ff7ef92246":{"timelimit":14,"frequency":"everytime"},"ad864d0049f04ee4a6c5f8276602044c":{"timelimit":30,"frequency":"everytime"},"0fc09b598da7f202ee2e0c40fc875737":{"timelimit":30,"frequency":"everytime"},"af55f0d950c9c01845bd18d1b73490f9":{"timelimit":30,"frequency":"everytime"},"85c06d099721c0e83b1842d45609cd18":{"timelimit":7,"frequency":"everytime"},"335ff18931a36a9a7bf46c2b62f9406f":{"timelimit":7,"frequency":"everytime"},"66734f4447e8f9c1f79acce4a8eabefa":{"timelimit":7,"frequency":"everytime"},"8d7c67f17d694a057dbc8667b7bbb891":{"timelimit":7,"frequency":"everytime"},"27e27d8ebdec0cc760dc4b7a526ba933":{"timelimit":7,"frequency":"everytime"},"68b0c06caafc7b26ba36e3c255b270aa":{"timelimit":7,"frequency":"everytime"},"82e9b53d241b4d991e2a941cc2d619e7":{"timelimit":30,"frequency":"everytime"},"967097c1fc58202a341bb0eea772a2e6":{"timelimit":30,"frequency":"everytime"},"402b2b1e4fd8971624fb00740071d3dc":{"timelimit":30,"frequency":"everytime"},"22cf8f19ad40a2d812e458c2b82a20f1":{"timelimit":30,"frequency":"everytime"},"ae01a35c32ce26ab0106a215820d2088":{"timelimit":30,"frequency":"everytime"},"ab12e772a6fce7b96a84b114729b0a25":{"timelimit":30,"frequency":"everytime"},"6d482767439681861693bd893cc343ea":{"timelimit":60,"frequency":"everytime"},"46ad90446b5b3b4dcdff401ecb2e5cf1":{"timelimit":90,"frequency":"everytime"},"c1f3cc708d00bcf6fb1df83c3df7a056":{"timelimit":90,"frequency":"everytime"},"bf444844f669e24e936045808192e037":{"timelimit":90,"frequency":"everytime"},"03c9406afc25159c3f8c2e931ddf68a3":{"timelimit":90,"frequency":"everytime"},"1c53af487a0505a644aa5be065326fa6":{"timelimit":90,"frequency":"everytime"},"724d6e8e59434077c72bfde37effcdbe":{"timelimit":90,"frequency":"everytime"},"d2c6f47de6d553a5240f419ef4050fef":{"timelimit":90,"frequency":"everytime"},"50cd025e9ba4c149d0a7f6d186a58641":{"timelimit":30,"frequency":"everytime"},"72efa1dc1665b0700b1d3903598f7900":{"timelimit":30,"frequency":"everytime"},"9f630d899494bd675d11194220b885e4":{"timelimit":180,"frequency":"everytime"},"40476f625611e3386f54a11417f72e3f":{"timelimit":180,"frequency":"everytime"},"74badd637c9c31a3613b0602cc176a96":{"timelimit":1,"frequency":"everytime"},"3aa728bea29bc698d7ac1d6294217c9e":{"timelimit":1,"frequency":"everytime"},"b5acdedf08df5c85e2ead4d50ef752e6":{"timelimit":1,"frequency":"everytime"},"50a677dc490631bbd022e98ce69db2d3":{"timelimit":1,"frequency":"everytime"},"ca6a818e425eeb7bd725dcb411da81c9":{"timelimit":180,"frequency":"everytime"},"400f3fc26e24d0ab518c18f85196e2df":{"timelimit":180,"frequency":"everytime"},"c2036736918a4d84f6a7e9757db31384":{"timelimit":180,"frequency":"everytime"},"2154f2dc4ac018e91e8c87e15914ce6d":{"timelimit":180,"frequency":"everytime"},"ff11987ac5fd8906bae810fea8eec867":{"timelimit":14,"frequency":"everytime"},"a2561a2d00236673877bbb934e814d7a":{"timelimit":30,"frequency":"everytime"},"9b3587b0e7ad14d6461c44ed700803ab":{"timelimit":30,"frequency":"everytime"},"0c49456f22179e9697e10f5fa2cfff3e":{"timelimit":30,"frequency":"everytime"},"0b221133c66c70184b40c07704eb38de":{"timelimit":30,"frequency":"everytime"},"d8ef8cf942e066475bfebd2659a13753":{"timelimit":14,"frequency":"everytime"},"ec8e9ab714216dfd3d5f073e26cec41f":{"timelimit":14,"frequency":"everytime"},"73c00ac5b73af0e9c06be8c7f94783c7":{"timelimit":14,"frequency":"everytime"},"eeb455c597fb5ef41106c58252b7b1f0":{"timelimit":2,"frequency":"everytime"},"52c9ed1e1ec5822b054cb592eac7786b":{"timelimit":14,"frequency":"everytime"},"f62040339a676535ba1994f645e4e265":{"timelimit":14,"frequency":"everytime"},"63aaca034936b79651d394b3f2b62681":{"timelimit":14,"frequency":"everytime"},"fc08967960b6283fb1141951b201da7f":{"timelimit":14,"frequency":"everytime"},"46f3dde492063c7a8cf84733c173637e":{"timelimit":30,"frequency":"everytime"},"708af5b022fa37275a3da81805470a7d":{"timelimit":14,"frequency":"everytime"},"cc69d7f16819f834dd5c0cf64996d01e":{"timelimit":14,"frequency":"everytime"},"fbfc78f9cef314ffade556d834dfe89d":{"timelimit":1,"frequency":"everytime"},"a65a20cd3909eaa38b0f2d6a003eaa72":{"timelimit":7,"frequency":"everytime"},"16a304c54aaed94734efc6e221831f17":{"timelimit":7,"frequency":"everytime"},"ec008a67c7c7220f33ec83714a81bfd6":{"timelimit":7,"frequency":"everytime"},"e7889c3851b9f35f76c99101ab7ed837":{"timelimit":14,"frequency":"everytime"},"dcc6a3322da1673da0f83cc1bc804276":{"timelimit":3,"frequency":"once_a_visit"},"00fd7c9d3220aa58cae6965368a395d9":{"timelimit":1,"frequency":"everytime"},"b82a1f01c72d36ba501673250c664227":{"timelimit":1,"frequency":"everytime"},"ac8c9c38f1a7bdc8eda5799aae7b8aad":{"timelimit":7,"frequency":"everytime"},"e538f968db20f9a8d97c024daadd628b":{"timelimit":180,"frequency":"everytime"},"0e87cfb1d9c297edf953aff8119bdd02":{"timelimit":14,"frequency":"everytime"},"335772e5800531df1fcd9aee961693c6":{"timelimit":30,"frequency":"everytime"}},"segmentGroupsV2":{"sggp_5913":{"segments":["sgmt_48375","sgmt_48376"],"mode":"radio"},"sggp_5914":{"segments":["sgmt_48387","sgmt_48388","sgmt_48389","sgmt_48394","sgmt_48393","sgmt_48392","sgmt_48391","sgmt_48390","sgmt_48378","sgmt_48379","sgmt_48380","sgmt_48381","sgmt_48382","sgmt_48383","sgmt_48384","sgmt_48377","sgmt_48385","sgmt_48386"],"mode":"radio"},"sggp_6167":{"segments":["sgmt_51215","sgmt_51213"],"mode":"radio"},"sggp_6236":{"segments":["sgmt_52921","sgmt_52922","sgmt_49095","sgmt_58153"],"mode":"radio"},"sggp_6358":{"segments":["sgmt_54775","sgmt_54776","sgmt_54805"],"mode":"radio"},"sggp_6359":{"segments":["sgmt_54783","sgmt_54784"],"mode":"radio"},"sggp_6360":{"segments":["sgmt_54782","sgmt_54803"],"mode":"radio"},"sggp_6361":{"segments":["sgmt_54806","sgmt_54807","sgmt_54808"],"mode":"radio"},"sggp_6495":{"segments":["sgmt_56830","sgmt_56831","sgmt_56832"],"mode":"radio"},"sggp_7017":{"segments":["sgmt_58715","sgmt_58716"],"mode":"radio"},"sggp_7140":{"segments":["sgmt_59212","sgmt_59213"],"mode":"radio"}},"pages":[],"forms":[],"links":[],"meta":[],"landingPages":[],"positions":[{"position":8116,"name":"[elisa-banner-hero-1] (excludes logout)","elementId":"#elisa-banner-hero-1","method":"hide","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["not",["eq?",["location","query","wm"],"logout"]],["eq?",["location","host"],"elisa.fi"]],"cssClasses":"frosmo-fade-container"},{"position":8208,"name":"[elisa-banner-hero-1] (wm=logout)","elementId":"#elisa-banner-hero-1","method":"hide","selectorType":"css","rules":["and",["begins",["location","path"],"\/"],["eq?",["location","query","wm"],"logout"],["eq?",["location","host"],"elisa.fi"]]},{"position":8293,"name":"[elisa-banner-hero-2] SPLIT","elementId":"#elisa-banner-hero-2","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]],"cssClasses":"fr-pega-banner-container"},{"position":8301,"name":"[elisa-banner-6]","elementId":"#elisa-banner-6","method":"replace","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]]},{"position":8594,"name":"[elisa-banner-1]","elementId":"#elisa-banner-1","method":"replace","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]]},{"position":9957,"name":"[elisa-banner-4]","elementId":"#elisa-banner-4","method":"replace","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]]},{"position":10271,"name":"[elisa-banner-8]","elementId":"#elisa-banner-8","method":"replace","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]]},{"position":10382,"name":"No placement, this message is obsolete","elementId":"#no-placement","method":"replace","selectorType":"css","rules":["and",["eq?",["location","host"],"no-domain"]]},{"position":10737,"name":"[elisa-banner-2]  (All users)","elementId":"#elisa-banner-2","method":"replace","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]]},{"position":11296,"name":"elisa.fi - SPLIT elisa-banner-hero-2\t(for webmail logout)","elementId":"#elisa-banner-hero-2","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","query","wm"],"logout"]]},{"position":11342,"name":"[elisa-banner-3]","elementId":"#elisa-banner-3","method":"replace","selectorType":"css","rules":["and",["eq?",["location","host"],"elisa.fi"],["eq?",["location","path"],"\/"],["not",["contains",["location","href"],"wm=logout"]]]},{"position":11343,"name":"[elisa-banner-5]","elementId":"#elisa-banner-5","method":"replace","selectorType":"css","rules":["and",["eq?",["location","host"],"elisa.fi"],["eq?",["location","path"],"\/"]]},{"position":11344,"name":"[elisa-banner-7]","elementId":"#elisa-banner-7","method":"replace","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]]},{"position":11493,"name":"elisa.fi - aspaStickyFooter","elementId":"body","method":"prepend","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]],"renderer":"aspaStickyFooter"},{"position":11995,"name":"Article recommendation - elisa-banner-hero-1","elementId":".frosmo-hero-1-reco","method":"replace","selectorType":"css","rules":["and",["eq?",["location","query","wm"],"logout"]],"triggerId":3209,"renderer":"elisaArticleRecommendation"},{"position":12904,"name":"Ideat: right side of content","elementId":"body","method":"prepend","selectorType":"css","rules":[],"triggerId":1391,"renderer":"sauna190RecommendationsOnArticlePage","cssClasses":"frosmo-article-recos-right-wrapper"},{"position":14475,"name":"Hy\u00f6tylinkit page-position-split-1","elementId":"#fr-split-1","method":"replace","selectorType":"css","rules":["and",["contains",["location","href"],"hyotylinkit"]],"renderer":"elisaArticleRecommendation","cssClasses":"fr-hero-1","cssText":"overflow: hidden;"},{"position":14476,"name":"Hy\u00f6tylinkit page-position-split-2","elementId":"#fr-split-2","method":"replace","selectorType":"css","rules":["and",["contains",["location","href"],"hyotylinkit\/"]]},{"position":14789,"name":"Update easy.context on EVENT_DATALAYER_ITEM_PUSHED","elementId":"body","method":"prepend","selectorType":"css","rules":[],"triggerId":2080},{"position":15059,"name":"ELISA-1032 OmaGuru: Banners with Overlay to device instructions (MOBILE)","elementId":".qc-content .qc-specificationsButton","method":"after","selectorType":"css","rules":["and",["begins",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/laiteohjeet\/"]]},{"position":15406,"name":"[elisa-banner-2] (For Toggled content)","elementId":"#elisa-banner-2","method":"replace","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]],"triggerId":2158},{"position":15934,"name":"[elisa-banner-3] iOS Trigger","elementId":"#elisa-banner-3","method":"replace","selectorType":"css","rules":["and",["eq?",["location","host"],"elisa.fi"],["eq?",["location","path"],"\/"]],"triggerId":1576},{"position":15935,"name":"[elisa-banner-3] Android Trigger","elementId":"#elisa-banner-3","method":"replace","selectorType":"css","rules":["and",["eq?",["location","host"],"elisa.fi"],["eq?",["location","path"],"\/"]],"triggerId":1577},{"position":15978,"name":"Hy\u00f6tylinkit page-position-split-1 (not a recommendation)","elementId":"#fr-split-1","method":"replace","selectorType":"css","rules":["and",["contains",["location","href"],"hyotylinkit"]],"cssClasses":"fr-hero-1","cssText":"overflow: hidden;"},{"position":17221,"name":"[elisa-banner-hero-1] (link=elisanet)","elementId":"#elisa-banner-hero-1","method":"replace","selectorType":"css","rules":["and",["begins",["location","path"],"\/"],["eq?",["location","query","link"],"elisanet"],["eq?",["location","host"],"elisa.fi"]]},{"position":17320,"name":"Article recommendation - elisa-banner-hero-1 - ?link=elisanet","elementId":".frosmo-hero-1-reco","method":"replace","selectorType":"css","rules":["and",["eq?",["location","query","link"],"elisanet"]],"renderer":"elisaArticleRecommendation"},{"position":18178,"name":"elisa.fi\/5g-uutiset page > recommendation","elementId":"body > div.ea-snapper-container.ea-snapper-container.ea-snapper-container--laptop-compress-0.ea-pad.ea-pad--pad-bottom-4.ea-pad--pad-h-s","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/5g\/5g-uutiset\/"]]},{"position":18268,"name":"E-sports-uutiset page > recommendation","elementId":"body > section.ea-marketing-block","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/gaming\/peliuutiset\/"]]},{"position":18472,"name":"elisa.fi  - 5G B2B Recommendation Placement","elementId":"body > section.productgrid","method":"replace","selectorType":"css","rules":["and",["eq?",["location","path"],"\/5g\/5g-firmat\/"]]},{"position":21290,"name":"[elisa-banner-hero-2] SPLIT - MLK offer","elementId":"#elisa-banner-hero-2","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]],"triggerId":3560},{"position":23129,"name":"[Tracking] dataLayer","elementId":"body","method":"prepend","selectorType":"css","rules":[]},{"position":23360,"name":"[elisa.fi] Replace Pikanavigaatio - Asiakaspalvelu","elementId":".ea-category-menu .ea-category-menu__list .ea-category-menu__item:nth-child(6)","method":"replace","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]]},{"position":23969,"name":"[elisa.fi] Tarjoukset-stripe etusivulla Suosittelu-stripen j\u00e4lkeen","elementId":".frosmo-tarjoukset","method":"after","selectorType":"css","rules":["and",["eq?",["location","host"],"elisa.fi"],["eq?",["location","path"],"\/"]]},{"position":24167,"name":"ELISA-1151 DESK Quick Links A\/B","elementId":"nav.ea-category-menu.ea-pad.ea-pad--pad-v-1:nth-child(1)","method":"renew","selectorType":"css","rules":["or",["eq?",["location","href"],"https:\/\/elisa.fi\/"]]},{"position":24246,"name":"(ELISA-1154) - A\/B test - Tarjoukset-stripe etusivulla Suosittelu-stripen j\u00e4lkeen","elementId":".frosmo-tarjoukset","method":"after","selectorType":"css","rules":["and",["eq?",["location","host"],"elisa.fi"],["eq?",["location","path"],"\/"]]},{"position":24328,"name":"ELISA-1151 MOBI Quick Links Bottom Nav","elementId":"nav.ea-category-menu.ea-pad.ea-pad--pad-v-1.frosmo_inline:nth-child(1)","method":"after","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/elisa.fi\/"]]},{"position":24329,"name":"ELISA-1151 MOBI Quick Links Top Nav","elementId":"nav.ea-category-menu.ea-pad.ea-pad--pad-v-1:nth-child(1)","method":"replace","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/elisa.fi\/"]],"cssClasses":"fr-1157-top-nav"},{"position":24353,"name":"(ELISA-1156) Front page Kassalle: Front page","elementId":"#shoppingCartContainer","method":"replace","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"]],"cssClasses":"fr-1156"},{"position":24592,"name":"[elisa-banner-hero-1] (includes logout)","elementId":"#elisa-banner-hero-1","method":"hide","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]],"cssClasses":"frosmo-fade-container"},{"position":25419,"name":"[Elisa-1163] PEGA: homepage --> split banner","elementId":"#elisa-banner-hero-2","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]],"triggerId":6077,"renderer":"genericRenderer","cssClasses":"fr-pega-banner-container"},{"position":25519,"name":"Asiakaspalvelu > AppBanner","elementId":"body","method":"prepend","selectorType":"css","rules":["and",["contains",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/ohje\/mobiili-omaelisa\/"]]},{"position":25804,"name":"[ELISA-1217] Replace current banner UI","elementId":"#root > div > div > div:nth-child(3) > div","method":"replace","selectorType":"css","rules":["and",["contains",["location","path"],"\/asiakaspalvelu\/yhteystiedot"]]},{"position":25882,"name":"[elisa-banner-hero-2] SPLIT - trigger login segment immediately","elementId":"#elisa-banner-hero-2","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]],"triggerId":6758},{"position":26942,"name":"(ELISA-1226) Dynamic content for content elevator (DESKTOP)","elementId":"body","method":"prepend","selectorType":"css","rules":["and",["begins",["location","path"],"\/ideat\/"],["not",["contains",["location","path"],"hyotylinkit"]]],"triggerId":7662,"cssClasses":"frosmo-article-recos-right-wrapper fr-hidden"},{"position":26943,"name":"(ELISA-1226) Dynamic content for content elevator (MOBILE)","elementId":"#main article.single-post","method":"after","selectorType":"css","rules":["and",["begins",["location","path"],"\/ideat\/"],["not",["contains",["location","path"],"hyotylinkit"]]],"triggerId":7662,"cssClasses":"frosmo-article-recos-mobile-wrapper fr-hidden"},{"position":27015,"name":"\/laskutus .ea-color-container--blue element - replace element","elementId":".ea-color-container--blue","method":"renew","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/elisa.fi\/asiakaspalvelu\/aihe\/laskutus\/"]],"cssClasses":"fr-omaElisa-banner-mod-wrapper"},{"position":27487,"name":"Verkkoapuri a\/b test for application","elementId":".maintenance-text","method":"replace","selectorType":"css","rules":["and",["contains",["location","href"],"elisa.fi\/verkkoapuri\/"]]},{"position":28563,"name":"[Tracking] [elisa-banner-hero-2] SPLIT","elementId":"#elisa-banner-hero-2","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]],"cssClasses":"fr-pega-banner-container"},{"position":28658,"name":"Test Placement","elementId":"test-placement","method":"replace","selectorType":"css","rules":[]},{"position":28765,"name":"Asiakaspalvelu > yhteystiedot >  chat button","elementId":"#dsGn34 .ds-card-footer","method":"replace","selectorType":"css","rules":["and",["begins",["location","href"],"https:\/\/elisa.fi\/asiakaspalvelu\/yhteystiedot"]]},{"position":28930,"name":"[elisa-banner-hero-2] SPLIT - MLK offer - DESKTOP","elementId":"#elisa-banner-hero-2","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]],"triggerId":3560},{"position":28931,"name":"[elisa-banner-hero-2] SPLIT - trigger login segment immediately - DESKTOP","elementId":"#elisa-banner-hero-2","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]],"triggerId":6758},{"position":28932,"name":"[elisa-banner-hero-2] SPLIT - TABLET\/MOBILE","elementId":"#frosmo-grid-banner","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]]},{"position":28934,"name":"[elisa-banner-hero-2] SPLIT - MLK offer - TABLET\/MOBILE","elementId":"#frosmo-grid-banner","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]],"triggerId":3560},{"position":28935,"name":"[Tracking] [elisa-banner-hero-2] SPLIT - DESKTOP","elementId":"#elisa-banner-hero-2","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]]},{"position":28936,"name":"[Tracking] [elisa-banner-hero-2] SPLIT - TABLET\/MOBILE","elementId":"#frosmo-grid-banner","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]]},{"position":28937,"name":"[elisa-banner-hero-2] SPLIT - DESKTOP","elementId":"#elisa-banner-hero-2","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]]},{"position":28938,"name":"[elisa-banner-hero-2] SPLIT - trigger login segment immediately - TABLET\/MOBILE","elementId":"#frosmo-grid-banner","method":"replace","selectorType":"css","rules":["and",["regex?",["location","host"],"(www\\.)*elisa\\.fi"],["eq?",["location","path"],"\/"]]},{"position":28933,"name":"[Utility] Add extra grid slot for mobiles","elementId":"body","method":"append","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"]]},{"position":28495,"name":"[ELISA-1154] Front page - Before product grid","elementId":".productgrid","method":"before","selectorType":"css","rules":["and",["eq?",["location","host"],"elisa.fi"],["eq?",["location","path"],"\/"]],"cssClasses":"frosmo-tarjoukset"},{"position":27532,"name":"(ELISA-1225) Article page product recommendation","elementId":"div.related-list.entry-tags","method":"before","selectorType":"css","rules":["and",["begins",["location","path"],"\/ideat\/"]]},{"position":25608,"name":"ELISA-1196 Viihde static recos","elementId":"#elisa-banner-6","method":"before","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"]],"cssText":"width: 100%"},{"position":25024,"name":"(ELISA-1174) Feedback tooltip - saunalahti_yritys: PUK-koodia page --> body --> after content","elementId":"body","method":"append","selectorType":"css","rules":["and",["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/ohje\/puk-koodi\/"]],"renderer":"genericRenderer"},{"position":25023,"name":"(ELISA-1174) Feedback tooltip - prepaid: PUK-koodia page --> body --> after content","elementId":"body","method":"append","selectorType":"css","rules":["and",["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/ohje\/puk-koodi\/"]],"renderer":"genericRenderer"},{"position":25022,"name":"(ELISA-1174) Feedback tooltip - yritys: PUK-koodia page --> body --> after content","elementId":"body","method":"append","selectorType":"css","rules":["and",["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/ohje\/puk-koodi\/"]],"renderer":"genericRenderer"},{"position":24992,"name":"(ELISA-1174) Feedback tooltip - saunalahti : PUK-koodia page --> body --> after content","elementId":"body","method":"append","selectorType":"css","rules":["and",["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/ohje\/puk-koodi\/"]],"renderer":"genericRenderer"},{"position":24801,"name":"(ELISA-1167) MOBI 5g nav icon: homepage --> body --> after content","elementId":"body","method":"append","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"]],"renderer":"genericRenderer"},{"position":24717,"name":"Uuden-sim-kortin-aktivointi page --> body --> before content","elementId":"#Nuance-chat-anchored","method":"before","selectorType":"css","rules":["or",["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/ohje\/uuden-sim-kortin-aktivointi\/"]],"cssClasses":"fr-chatbot-tt-container"},{"position":24716,"name":"Liittyman-kayton-rajoittaminen page --> body --> before content","elementId":"#Nuance-chat-anchored","method":"before","selectorType":"css","rules":["or",["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/ohje\/liittyman-kayton-rajoittaminen\/"]],"cssClasses":"fr-chatbot-tt-container"},{"position":24715,"name":"Laitteen-loppulasku page --> body --> before content","elementId":"#Nuance-chat-anchored","method":"before","selectorType":"css","rules":["or",["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/laskutus\/ohje\/laitteen-loppulasku\/"]],"cssClasses":"fr-chatbot-tt-container"},{"position":24714,"name":"Laskun maksutavat page --> body --> before content","elementId":"#Nuance-chat-anchored","method":"before","selectorType":"css","rules":["or",["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/laskutus\/ohje\/laskun-maksutavat\/"]],"cssClasses":"fr-chatbot-tt-container"},{"position":24713,"name":"s-bonus page --> body --> before content","elementId":"#Nuance-chat-anchored","method":"before","selectorType":"css","rules":["or",["eq?",["location","path"],"\/asiakaspalvelu\/ohje\/s-bonus\/"]],"cssClasses":"fr-chatbot-tt-container"},{"position":24712,"name":"Maksusopimus page --> body --> before content","elementId":"#Nuance-chat-anchored","method":"before","selectorType":"css","rules":["or",["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/laskutus\/ohje\/maksusopimus\/"]],"cssClasses":"fr-chatbot-tt-container"},{"position":24643,"name":"(ELISA-1161) asiakaspalvelu page --> body --> before content","elementId":"#Nuance-chat-anchored","method":"before","selectorType":"css","rules":["or",["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/"],["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/laskutus\/"],["eq?",["location","path"],"\/asiakaspalvelu\/aihe\/matkoilla\/"],["eq?",["location","path"],"\/asiakaspalvelu\/yhteystiedot\/"],["eq?",["location","path"],"\/asiakaspalvelu\/"]],"cssClasses":"fr-chatbot-tt-container"},{"position":23923,"name":"Hub-artikkelit, ennen t\u00e4gilistaa","elementId":".related-list.entry-tags.clearfix","method":"before","selectorType":"css","rules":["and",["begins",["location","path"],"\/ideat\/"]]},{"position":23510,"name":"Front Page","elementId":"body","method":"append","selectorType":"css","rules":["and",["eq?",["location","host"],"elisa.fi"],["eq?",["location","path"],"\/"]]},{"position":23128,"name":"Elisa.fi maksusopimus page","elementId":"#campaignformid","method":"append","selectorType":"css","rules":["and",["eq?",["location","path"],"\/maksusopimus\/"]]},{"position":22556,"name":"[elisa.fi] Before navigation - for Disclaimer texts","elementId":".react-navi-ea-mainheader-container","method":"before","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]]},{"position":22190,"name":"Navigation Test: Home page --> body --> after content","elementId":"body","method":"append","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]],"renderer":"genericRenderer"},{"position":22188,"name":"[elisa.fi] After secondary navigation","elementId":".ea-color-container.ea-color-container--inherit","method":"append","selectorType":"css","rules":["and",["eq?",["location","host"],"elisa.fi"],["eq?",["location","path"],"\/"]],"cssClasses":"frosmo-tarjoukset"},{"position":18267,"name":"Sticky footer on \/kartat (after body)","elementId":"body","method":"append","selectorType":"css","rules":["and",["contains",["location","path"],"\/kartat"]],"triggerId":8074,"cssText":"height: 1px;"},{"position":17310,"name":"OmaElisa: Banner for all OmaElisa visitors with an open invoice","elementId":"#banks","method":"before","selectorType":"css","rules":["and",["regex?",["location","path"],"\\\/laskut\/avoimet\/[0-9]*\/maksu","i"]],"triggerId":2583},{"position":15715,"name":"Hide elisa.fi - aspaStickyFooter","elementId":"body","method":"append","selectorType":"css","rules":["and",["eq?",["location","path"],"\/"],["eq?",["location","host"],"elisa.fi"]]},{"position":15400,"name":"Banner at the bottom of articles  5G","elementId":".entry-content","method":"append","selectorType":"css","rules":["and",["eq?",["location","host"],"yksityisille.hub.elisa.fi"]],"triggerId":2156},{"position":15306,"name":"Ideat >  banner at the bottom of articles","elementId":".entry-content","method":"append","selectorType":"css","rules":["and",["eq?",["location","host"],"yksityisille.hub.elisa.fi"]],"triggerId":2100},{"position":15201,"name":"Article page with tag 'Elisa viihde' OR 'Elokuvat' OR 'Leffat' OR 'Sarjat'","elementId":".posts-wrap-background","method":"before","selectorType":"css","rules":["and",["contains",["location","href"],"yksityisille.hub"]],"triggerId":2100},{"position":15058,"name":"ELISA-1032 OmaGuru: Banners with Overlay to device instructions (DESKTOP)","elementId":".qc-sidebar","method":"append","selectorType":"css","rules":["and",["begins",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/laiteohjeet\/"]]},{"position":14558,"name":"Ideat > article page with tags: lukeminen, Elisa Kirja, e-kirja","elementId":".posts-wrap-background","method":"before","selectorType":"css","rules":["and",["contains",["location","href"],"yksityisille.hub"]],"triggerId":1882},{"position":14557,"name":"Ideat.fi > article page with tag: \u00e4\u00e4nikirja","elementId":".posts-wrap-background","method":"before","selectorType":"css","rules":["and",["contains",["location","href"],"yksityisille.hub"]],"triggerId":1881},{"position":14477,"name":"Hy\u00f6tylinkit page-navi-top","elementId":".elisa-navi__header__right-element-wrapper","method":"before","selectorType":"css","rules":["and",["contains",["location","href"],"hyotylinkit"]],"cssClasses":"fr-tooltip-container"},{"position":14474,"name":"Hy\u00f6tylinkit  > page redesign - CONTAINER","elementId":"div.page#container","method":"before","selectorType":"css","rules":["and",["begins",["location","href"],"https:\/\/elisa.fi\/ideat\/hyotylinkit\/"]]},{"position":14364,"name":"Ideat > article recommendation to article page - mobile","elementId":"div.posts-wrap-background","method":"before","selectorType":"css","rules":[],"triggerId":1391,"renderer":"sauna190RecommendationsOnArticlePage","cssClasses":"frosmo-article-recos-mobile-wrapper"},{"position":13848,"name":"Article page with tag 'Windows' or 'Windows 10'","elementId":".posts-wrap-background","method":"before","selectorType":"css","rules":["and",["contains",["location","href"],"yksityisille.hub"]],"triggerId":1640},{"position":13780,"name":"Article page with tag 'Tietokoneen k\u00e4ytt\u00f6' or 'Tietokone'","elementId":".posts-wrap-background","method":"before","selectorType":"css","rules":["and",["contains",["location","href"],"yksityisille.hub"]],"triggerId":1598},{"position":13722,"name":"AspaFooter - searchText API","elementId":"body","method":"append","selectorType":"css","rules":["and",["contains",["location","href"],"elisa.fi\/asiakaspalvelu\/hakutulokset\/"]]},{"position":13622,"name":"Asiakaspalvelu > SmartApp Banner - android","elementId":"body","method":"append","selectorType":"css","rules":["and",["contains",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/ohje\/mobiili-omaelisa\/"]],"triggerId":1577},{"position":13598,"name":"Asiakaspalvelu > SmartApp Banner - iOS","elementId":"body","method":"append","selectorType":"css","rules":["and",["contains",["location","path"],"\/asiakaspalvelu\/aihe\/matkapuhelinliittymat\/ohje\/mobiili-omaelisa\/"]],"triggerId":1576},{"position":13009,"name":"Ideat: article page with tag  '\u00e4lypuhelin' [2]","elementId":"div.elisa-navi__global-footer","method":"before","selectorType":"css","rules":["and",["contains",["location","href"],"yksityisille.hub"]],"triggerId":1425},{"position":13008,"name":"Ideat: article page with tag '\u00e4lypuhelin' [1]","elementId":".posts-wrap-background","method":"before","selectorType":"css","rules":["and",["contains",["location","href"],"yksityisille.hub"]],"triggerId":1425},{"position":12676,"name":"Hy\u00f6tylinkit > Article recommendation","elementId":".posts-wrap-background","method":"before","selectorType":"css","rules":["and",["contains",["location","href"],"hyotylinkit"]],"renderer":"elisaFiveArticleRecommendation"},{"position":8288,"name":"All sites - Insert after body tag content when Frosmo script loaded","elementId":"body","method":"append","selectorType":"css","rules":["and",["not",["contains",["location","href"],"verkkoasiointi.elisa.fi"]],["not",["contains",["location","path"],"\/kauppa"]],["not",["contains",["location","host"],"elisaviihde"]]],"triggerId":580}],"customActions":{"segments":[],"states":["hasCart","hasPurchasedDevice","hasSeenLastViewedItem","hasViewedDevices","hasViewedItems","hasViewedKirja"],"rules":[{"name":"Geolocation: Joensuu","type":"geolocation","rules":{"Joensuu":[62.588283472086225,29.750976422569693,80]}},{"name":"Geolocation: J\u00e4rvi-Suomi","type":"geolocation","rules":{"J\u00e4rvi-Suomi":[61.762729103258366,28.82812485921022,100]}},{"name":"Geolocation: Lappeenranta","type":"geolocation","rules":{"Lappeenranta":[61.015724930192306,28.179931499231543,50]}},{"name":"Geolocation: Mikkeli","type":"geolocation","rules":{"Mikkeli":[61.658595288712,27.312011576548,60]}},{"name":"Geolocation: Mikkeli (OLD)","type":"geolocation","rules":{"Mikkeli":[61.658595288712,27.312011576548,60]}},{"name":"Geolocation: Oulu","type":"geolocation","rules":{"Oulu":[64.979359324841,25.466308449829,50]}},{"name":"Geolocation: Pohjanmaa","type":"geolocation","rules":{"Pohjanmaa":[63.538152287782,22.201995702649,55]}},{"name":"Geolokaatio","type":"geolocation","rules":{"Vantaa":[60.314601922267,25.044965744019,5],"Kotka":[60.458266992017,26.948897807811,5],"Mikkeli":[61.659605325333,27.278487651868,5],"Sein\u00e4joki":[62.785860926737,22.85099741337,5],"Rovaniemi":[66.500970093962,25.740401712936,5],"Vaasa":[63.100692261345,21.620528662224,5],"H\u00e4meenlinna":[60.984799033845,24.487960305519,5],"Lappeenranta":[61.053998314057,28.201339215228,5],"Joensuu":[62.589262991934,29.761397810431,5],"Pori":[61.471283424666,21.796309912388,5],"Kouvola":[60.861999467086,26.696212260701,5],"Kuopio":[62.881166948437,27.673995464737,5],"Lahti":[60.979469760375,25.68547007226,10],"Jyv\u00e4skyl\u00e4":[62.238224080213,25.773360697342,10],"Turku":[60.442012254733,22.279708350338,10],"Oulu":[65.01276459225,25.487716165826,10],"Tampere":[61.492264278629,23.751876320459,10]}},{"name":"Geolokaatio: PK-seutu","type":"geolocation","rules":{"Helsinki +30km":[60.166109067266,24.927978371203,30]}}]},"conversions":[],"googleAnalytics":{"trackDisplays":true,"trackTrueDisplays":true,"trackClicks":true,"eventCategory":"Frosmo","eventActionDisplay":"display","eventActionTrueDisplay":"true display","eventActionClick":"click","trackingId":"UA-60262224-1"},"templates":{"(Elisa-1163) Split Hero  with PEGA API":"<a href=\"{{ctaUrl}}\" class=\"fr-pega-banner\" id=\"frosmo_pega_split_second\">\n    <div class=\"fr-banner-image\">\n      <img class=\"frosmo_image\" src=\"{{image}}\" alt=\"\">\n    <\/div>\n    <div class=\"fr-banner-text\">\n        <h3 class=\"ea-h3 frosmo_product_name\">{{title}}<\/h3>\n        <p class=\"ea-bodytext ea-bodytext--two-lines ea-pad ea-pad--pad-bottom-1\">{{description}}<\/p>\n        <p class=\"ea-bodytext fr-cta\">{{ctaText}}<\/p>\n    <\/div>\n<\/a>\n\n<script>\n(function () {\n    var MODULE = '[ELISA-1163-PEGA]';\n    var instance = positionData.getMessageInstance();\n    var defaults = instance.getTemplateDefaults();\n\n    init();\n\n    function addSplitClasses() {\n        window.$(\"#elisa-banner-hero-1\").removeClass(\"ea-fgrid__item--laptop-12\");\n        window.$(\"#elisa-banner-hero-1\").addClass(\"ea-fgrid__item--laptop-8\");\n        window.$(\"#elisa-banner-hero-1\").removeClass(\"ea-fgrid__item--desktop-ratio-3-1\");\n        window.$(\"#elisa-banner-hero-1\").addClass(\"ea-fgrid__item--laptop-ratio-2-1\");\n        window.$(\"#elisa-banner-hero-2\").addClass(\"ea-fgrid__item--laptop-ratio-1-1 ea-fgrid__item--laptop-4 ea-color-container ea-color-container--white\");\n    }\n\n    function headingText() {\n        var headingTextEl = document.querySelectorAll('#elisa-banner-hero-1 .ea-h1')[0];\n\n        if (headingTextEl) {\n            var hText = headingTextEl.innerText;\n            if (hText && hText.length > 14) {\n                headingTextEl.style.fontSize = \"3.8vw\";\n            }\n            if (hText && hText.length > 24) {\n                headingTextEl.style.fontSize = \"3.2vw\";\n            }\n        }\n    }\n\n    \/\/ when screen size is <960px, we replace #elisa-banner-1 \n    \/\/ with the contents of this message, and when the screen \n    \/\/ is resized back to >960px, we put the original contents \n    \/\/ in both places (two copies are created in the process)\n    var divReplaced = false;\n    var thisMsgContent; \/\/ = $('#frosmo_pega_split_second').clone();\n    var originalBanner; \/\/ = $('#elisa-banner-1 .ea-fluid-container').clone();\n\n    function isTablet(width) {\n        return width < 960;\n    }\n\n    \/**\n     * Send POST request to pega API to trigger impression or click\n     * POST data are pre-filled \n     * \n     * @param {string} outcome - Either 'Clicked' or 'Impression'\n     **\/\n\n    function postPEGA(outcome, timeout) {\n        var payload = {\n            'OffersList': [{\n                'Application': 'ElisaWebsite',\n                'Behaviour': 'positive',\n                'Channel': 'ElisaWebsite',\n                'Direction': 'Inbound',\n                'Issue': 'Service',\n                'Group': 'Support',\n                'PropositionID': '{{propositionId}}',\n                'SubjectID': '{{subjectId}}',\n                'InteractionID': '{{interactionId}}',\n                'Outcome': outcome\n            }]\n        };\n\n        return easy.fetch.post('{{pega_post}}', {\n            contentType: 'application\/json;charset=utf-8',\n            dataType: 'json',\n            data: JSON.stringify(payload),\n            headers: {\n                '{{headerkey}}': '{{headervalue}}'\n            },\n            timeout: timeout\n        })\n    }\n\n    function initTracking() {\n        var element = easy.domElements.selector('#frosmo_pega_split_second');\n        var testmode = defaults.layoutTestMode;\n\n        instance.setTrackableElements(element);\n        instance.startTracking();\n\n        \/\/ check for test mode (not related to easy test mode)\n        if (testmode !== 'on') {\n            \/\/ Add true display event listener\n            \/\/ In theory this should fire also on when click happens before\n            \/\/ true display is sent as click triggers true display\n            easy.events.once(easy.EVENT_MESSAGE_TRUE_DISPLAY, _TD_handler);\n\n            \/\/ Add click handler\n            easy.domEvents.off(element, 'click');\n            easy.domEvents.on(element, 'click', _CLK_handler);\n        }\n    }\n\n    function _TD_handler(event) {\n        \/\/ Proceed if event was sent from this modification\n        if (event.id === instance.id) {\n            easy.console.log(MODULE, event);\n            \/\/ Send PEGA Impression\n            postPEGA('Impression', 20000)\n                .then(function (data) {\n                    easy.console.log(MODULE, data);\n                })\n                .catch(function (err) {\n                    easy.console.error(err);\n                });\n        }\n    }\n\n    function _CLK_handler(event) {\n        easy.console.log(MODULE, event);\n        event.preventDefault();\n        var ctaUrl = easy.domElements.selector('#frosmo_pega_split_second')[0];\n        if (ctaUrl && ctaUrl.href)\n            postPEGA('Clicked', 5000)\n                .then(function (data) {\n                    easy.console.log(MODULE, data);\n                    window.location.href = ctaUrl.href;\n                })\n                .catch(function (err) {\n                    easy.console.error(err);\n                    window.location.href = ctaUrl.href;\n                });\n    }\n\n    function handleTabletWidth(width) {\n        if (divReplaced) {\n            if (!isTablet(width)) {\n                window.$('#elisa-banner-1 .ea-fluid-container').replaceWith(originalBanner);\n                window.$('#elisa-banner-hero-2').html(thisMsgContent);\n                divReplaced = false;\n            }\n\n            return;\n        }\n\n        if (!isTablet(width)) {\n            return;\n        }\n\n        window.$('#elisa-banner-1 .ea-fluid-container').replaceWith(thisMsgContent);\n\n        divReplaced = true;\n    }\n\n    function init() {\n        \/\/ frosmo.easy.events.trigger(frosmo.site.EVENT_LAST_VIEWED_ITEM_SEEN);\n\n        addSplitClasses();\n        headingText();\n        var width = window.$(window).width();\n        initTracking();\n\n        function _waitForElement() {\n            handleTabletWidth(width);\n\n            window.$(window).resize(function () {\n                width = window.$(window).width();\n                handleTabletWidth(width);\n            });\n        }\n\n        frosmo.easy.utils.waitFor(200, 10000, function () {\n            if (window.$('#elisa-banner-1 .ea-fluid-container').length) {\n\n                thisMsgContent = window.$('#frosmo_pega_split_second').clone();\n                originalBanner = window.$('#elisa-banner-1 .ea-fluid-container').clone();\n\n                _waitForElement();\n                return true;\n            }\n        });\n    }\n})();\n<\/script>\n<style>\n    \/* Hide native banner \n    #fiveg-sales-widget{\n        display: none;\n    }\n    #fiveg-sales-widget+.ea-fgrid__item {\n        display: block;\n    }*\/\n\n    .fr-pega-banner {\n        position: absolute;\n        cursor: pointer;\n        top: 0;\n        height: 100%;\n        width: 100%;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-evenly;\n        text-align: center;\n    }\n    \n    .fr-pega-banner .fr-banner-text {\n        color: #404041;    \n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        min-height: 155px;\n        padding-left: 10px;\n        padding-right: 10px;\n    }\n    \n    .fr-pega-banner .fr-banner-text p {\n        margin: 0;\n        padding: 10px 0;\n    }\n    \n    .fr-pega-banner .fr-banner-image {\n        height: 50%;\n    }\n    \n    .fr-pega-banner .fr-banner-image img {\n        height: 100%;\n        padding: 10px;\n    }\n    .fr-pega-banner p.fr-cta {\n        opacity: 1;\n        font-weight: 600;\n        color: #fff;\n        background: #0019af;\n        display: inline-block;\n        position: relative;\n        text-transform: uppercase;\n        cursor: pointer;\n        border-radius: 2px;\n        text-decoration: none;\n        margin: 0;\n        padding: 9px 29px;\n        border: 3px solid transparent;\n        outline: 0;\n        letter-spacing: 1px;\n    }\n<\/style>","(Elisa-1199) Split Hero  with PEGA API - advanced tracking":"<a href=\"{{ctaUrl}}\" class=\"fr-pega-banner\" id=\"frosmo_pega_split_second\">\n    <div class=\"fr-banner-image\">\n      <img class=\"frosmo_image\" src=\"{{image}}\" alt=\"\">\n    <\/div>\n    <div class=\"fr-banner-text\">\n        <h3 class=\"ea-h3 frosmo_product_name\">{{title}}<\/h3>\n        <p class=\"ea-bodytext ea-bodytext--two-lines ea-pad ea-pad--pad-bottom-1\">{{description}}<\/p>\n        <p class=\"ea-bodytext fr-cta\">{{ctaText}}<\/p>\n    <\/div>\n<\/a>\n\n<script>\n(function () {\n    var MODULE = '[ELISA-1163-PEGA]';\n    var instance = positionData.getMessageInstance();\n    var defaults = instance.getTemplateDefaults();\n    var keyword = '{{propositionId}}';\n\n    init();\n\n    function addSplitClasses() {\n        window.jQuery(\"#elisa-banner-hero-1\").removeClass(\"ea-fgrid__item--laptop-12\");\n        window.jQuery(\"#elisa-banner-hero-1\").addClass(\"ea-fgrid__item--laptop-8\");\n        window.jQuery(\"#elisa-banner-hero-1\").removeClass(\"ea-fgrid__item--desktop-ratio-3-1\");\n        window.jQuery(\"#elisa-banner-hero-1\").addClass(\"ea-fgrid__item--laptop-ratio-2-1\");\n        window.jQuery(\"#elisa-banner-hero-2\").addClass(\"ea-fgrid__item--laptop-ratio-1-1 ea-fgrid__item--laptop-4 ea-color-container ea-color-container--white\");\n\n    }\n\n    function headingText() {\n        var headingTextEl = document.querySelectorAll('#elisa-banner-hero-1 .ea-h1')[0];\n\n        if (headingTextEl) {\n            var hText = headingTextEl.innerText;\n            if (hText && hText.length > 14) {\n                headingTextEl.style.fontSize = \"3.8vw\";\n            }\n            if (hText && hText.length > 24) {\n                headingTextEl.style.fontSize = \"3.2vw\";\n            }\n        }\n    }\n\n    \/\/when screen size is <960px, we replace #elisa-banner-1 \n    \/\/with the contents of this message, and when the screen \n    \/\/is resized back to >960px, we put the original contents \n    \/\/in both places (two copies are created in the process)\n    var divReplaced = false;\n    var thisMsgContent;\/\/ = $('#frosmo_pega_split_second').clone();\n    var originalBanner;\/\/ = $('#elisa-banner-1 .ea-fluid-container').clone();\n\n    function isTablet(width) {\n        return width < 960;\n    }\n\n    \/**\n     * Send POST request to pega API to trigger impression or click\n     * POST data are pre-filled \n     * \n     * @param {string} outcome - Either 'Clicked' or 'Impression'\n     **\/\n\n    function postPEGA(outcome, timeout) {\n        var payload = {\n            'OffersList': [{\n                'Application': 'ElisaWebsite',\n                'Behaviour': 'positive',\n                'Channel': 'ElisaWebsite',\n                'Direction': 'Inbound',\n                'Issue': 'Service',\n                'Group': 'Support',\n                'PropositionID': '{{propositionId}}',\n                'SubjectID': '{{subjectId}}',\n                'InteractionID': '{{interactionId}}',\n                'Outcome': outcome\n            }]\n        };\n\n        return easy.fetch.post('{{pega_post}}', {\n            contentType: 'application\/json;charset=utf-8',\n            dataType: 'json',\n            data: JSON.stringify(payload),\n            headers: {\n                '{{headerkey}}': '{{headervalue}}'\n            },\n            timeout: timeout\n        })\n    }\n\n    function initTracking() {\n        var element = easy.domElements.selector('#frosmo_pega_split_second');\n        var testmode = defaults.layoutTestMode;\n\n        instance.setTrackableElements(element);\n        instance.startTracking();\n\n        \/\/ check for test mode (not related to easy test mode)\n        if (testmode !== 'on') {\n            \/\/ Add true display event listener\n            \/\/ In theory this should fire also on when click happens before\n            \/\/ true display is sent as click triggers true display\n            easy.events.once(easy.EVENT_MESSAGE_TRUE_DISPLAY, _TD_handler);\n\n            \/\/ Add click handler\n            easy.domEvents.off(element, 'click');\n            easy.domEvents.on(element, 'click', _CLK_handler);\n\n            \/\/ Send frosmo Advanced tracking - display\n            instance.trackingEvent(keyword + '_display');\n\n        }\n    }\n\n    function _TD_handler(event) {\n        \/\/ Proceed if event was sent from this modification\n        if (event.id === instance.id) {\n            easy.console.log(MODULE, event);\n\n            \/\/ Send frosmo Advanced tracking - trueDisplay\n            instance.trackingEvent(keyword + '_trueDisplay');\n\n            \/\/ Send PEGA Impression\n            postPEGA('Impression', 20000)\n                .then(function (data) {\n                    easy.console.log(MODULE, data);\n                })\n                .catch(function (err) {\n                    easy.console.error(err);\n                });\n        }\n    }\n\n    function _CLK_handler(event) {\n        easy.console.log(MODULE, event);\n        event.preventDefault();\n        var ctaUrl = easy.domElements.selector('#frosmo_pega_split_second')[0];\n        if (ctaUrl && ctaUrl.href)\n\n            \/\/ Send frosmo Advanced tracking - click\n            instance.trackingEvent(keyword + '_click');\n\n        postPEGA('Clicked', 5000)\n            .then(function (data) {\n                easy.console.log(MODULE, data);\n                window.location.href = ctaUrl.href;\n            })\n            .catch(function (err) {\n                easy.console.error(err);\n                window.location.href = ctaUrl.href;\n            });\n    }\n\n    function handleTabletWidth(width) {\n        if (divReplaced) {\n            if (!isTablet(width)) {\n                window.$('#elisa-banner-1 .ea-fluid-container').replaceWith(originalBanner);\n                window.$('#elisa-banner-hero-2').html(thisMsgContent);\n                divReplaced = false;\n            }\n\n            return;\n        }\n\n        if (!isTablet(width)) {\n            return;\n        }\n\n        window.$('#elisa-banner-1 .ea-fluid-container').replaceWith(thisMsgContent);\n\n        divReplaced = true;\n    }\n\n    function init() {\n        \/\/ frosmo.easy.events.trigger(frosmo.site.EVENT_LAST_VIEWED_ITEM_SEEN);\n\n        addSplitClasses();\n        headingText();\n        var width = window.$(window).width();\n        initTracking();\n\n        function _waitForElement() {\n            handleTabletWidth(width);\n\n            window.$(window).resize(function () {\n                width = window.$(window).width();\n                handleTabletWidth(width);\n            });\n        }\n\n        frosmo.easy.utils.waitFor(200, 10000, function () {\n            if (window.$('#elisa-banner-1 .ea-fluid-container').length) {\n\n                thisMsgContent = window.$('#frosmo_pega_split_second').clone();\n                originalBanner = window.$('#elisa-banner-1 .ea-fluid-container').clone();\n\n                _waitForElement();\n                return true;\n            }\n        });\n    }\n})();\n<\/script>\n<style>\n    \/* Hide native banner \n    #fiveg-sales-widget{\n        display: none;\n    }\n    #fiveg-sales-widget+.ea-fgrid__item {\n        display: block;\n    }*\/\n\n    .fr-pega-banner {\n        position: absolute;\n        cursor: pointer;\n        top: 0;\n        height: 100%;\n        width: 100%;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-evenly;\n        text-align: center;\n    }\n    \n    .fr-pega-banner .fr-banner-text {\n        color: #404041;    \n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        min-height: 155px;\n        padding-left: 10px;\n        padding-right: 10px;\n    }\n    \n    .fr-pega-banner .fr-banner-text p {\n        margin: 0;\n        padding: 10px 0;\n    }\n    \n    .fr-pega-banner .fr-banner-image {\n        height: 50%;\n    }\n    \n    .fr-pega-banner .fr-banner-image img {\n        height: 100%;\n        padding: 10px;\n    }\n    .fr-pega-banner p.fr-cta {\n        opacity: 1;\n        font-weight: 600;\n        color: #fff;\n        background: #0019af;\n        display: inline-block;\n        position: relative;\n        text-transform: uppercase;\n        cursor: pointer;\n        border-radius: 2px;\n        text-decoration: none;\n        margin: 0;\n        padding: 9px 29px;\n        border: 3px solid transparent;\n        outline: 0;\n        letter-spacing: 1px;\n    }\n<\/style>","(ELISA-1199) Split Hero  with PEGA API - advanced tracking - 2022 version":"<a href=\"{{ctaUrl}}\" class=\"fr-pega-banner\" id=\"frosmo_pega_split_second\">\n    <div class=\"fr-banner-image\">\n      <img class=\"frosmo_image\" src=\"{{image}}\" alt=\"\">\n    <\/div>\n    <div class=\"fr-banner-text\">\n        <h3 class=\"ea-h3 frosmo_product_name\">{{title}}<\/h3>\n        <p class=\"ea-bodytext ea-bodytext--two-lines ea-pad ea-pad--pad-bottom-1\">{{description}}<\/p>\n        <p class=\"ea-bodytext fr-cta\">{{ctaText}}<\/p>\n    <\/div>\n<\/a>\n\n<script>\n(function () {\n    if (window.internalPromotionTracker) {\n        window.internalPromotionTracker.refresh();\n    }    \n    \n    var MODULE = '[ELISA-1163-PEGA]';\n    var instance = positionData.getMessageInstance();\n    var defaults = instance.getTemplateDefaults();\n    var keyword = '{{propositionId}}';\n\n    \/\/ init utilities and modification\n    init();\n\n    \/**\n     * Send POST request to pega API to trigger impression or click\n     * POST data are pre-filled \n     * \n     * @param {string} outcome - Either 'Clicked' or 'Impression'\n     **\/\n\n    function postPEGA(outcome, timeout) {\n        var payload = {\n            'OffersList': [{\n                'Application': 'ElisaWebsite',\n                'Behaviour': 'positive',\n                'Channel': 'ElisaWebsite',\n                'Direction': 'Inbound',\n                'Issue': 'Service',\n                'Group': 'Support',\n                'PropositionID': '{{propositionId}}',\n                'SubjectID': '{{subjectId}}',\n                'InteractionID': '{{interactionId}}',\n                'Outcome': outcome\n            }]\n        };\n\n        return easy.fetch.post('{{pega_post}}', {\n            contentType: 'application\/json;charset=utf-8',\n            dataType: 'json',\n            data: JSON.stringify(payload),\n            headers: {\n                '{{headerkey}}': '{{headervalue}}'\n            },\n            timeout: timeout\n        })\n    }\n\n    function initTracking() {\n        var element = easy.domElements.selector('#frosmo_pega_split_second');\n        var testmode = defaults.layoutTestMode;\n\n        instance.setTrackableElements(element);\n        instance.startTracking();\n\n        \/\/ check for layout test mode (not related to easy test mode)\n        if (testmode !== 'on') {\n            \/\/ Add true display event listener\n            \/\/ In theory this should fire also on when click happens before\n            \/\/ true display is sent as click triggers true display\n            easy.events.once(easy.EVENT_MESSAGE_TRUE_DISPLAY, _TD_handler);\n\n            \/\/ Add click handler\n            easy.domEvents.off(element, 'click');\n            easy.domEvents.on(element, 'click', _CLK_handler);\n\n            \/\/ Send frosmo Advanced tracking - display\n            instance.trackingEvent(keyword + '_display');\n        }\n    }\n\n    function _TD_handler(event) {\n        \/\/ Proceed if event was sent from this modification\n        if (event.id === instance.id) {\n            easy.console.log(MODULE, event);\n\n            \/\/ Send frosmo Advanced tracking - trueDisplay\n            instance.trackingEvent(keyword + '_trueDisplay');\n\n            \/\/ Send PEGA Impression\n            postPEGA('Impression', 20000)\n                .then(function (data) {\n                    easy.console.log(MODULE, data);\n                })\n                .catch(function (err) {\n                    easy.console.error(err);\n                });\n        }\n    }\n\n    function _CLK_handler(event) {\n        \/\/ Proceed if event was sent from this modification\n        if (event.id === instance.id) {\n            easy.console.log(MODULE, event);\n            \n            event.preventDefault();\n            var ctaUrl = easy.domElements.selector('#frosmo_pega_split_second')[0];\n            if (ctaUrl && ctaUrl.href) {\n    \n                \/\/ Send frosmo Advanced tracking - click\n                instance.trackingEvent(keyword + '_click');\n    \n                postPEGA('Clicked', 5000)\n                    .then(function (data) {\n                        easy.console.log(MODULE, data);\n                        window.location.href = ctaUrl.href;\n                    })\n                    .catch(function (err) {\n                        easy.console.error(err);\n                        window.location.href = ctaUrl.href;\n                    });\n            }\n        }\n    }\n\n    function init() {\n        frosmo.sharedCode.splitHero.addSplitClasses();\n        frosmo.sharedCode.splitHero.headingText();\n        frosmo.sharedCode.splitHero.revealGridBanner();\n        initTracking();\n    }\n})();\n<\/script>\n<style>\n    .fr-pega-banner {\n        position: absolute;\n        cursor: pointer;\n        top: 0;\n        height: 100%;\n        width: 100%;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-evenly;\n        text-align: center;\n    }\n    \n    .fr-pega-banner .fr-banner-text {\n        color: #404041;    \n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        min-height: 155px;\n        padding-left: 10px;\n        padding-right: 10px;\n    }\n    \n    .fr-pega-banner .fr-banner-text p {\n        margin: 0;\n        padding: 10px 0;\n    }\n    \n    .fr-pega-banner .fr-banner-image {\n        height: 50%;\n    }\n    \n    .fr-pega-banner .fr-banner-image img {\n        height: 100%;\n        padding: 10px;\n    }\n    .fr-pega-banner p.fr-cta {\n        opacity: 1;\n        font-weight: 600;\n        color: #fff;\n        background: #0019af;\n        display: inline-block;\n        position: relative;\n        text-transform: uppercase;\n        cursor: pointer;\n        border-radius: 2px;\n        text-decoration: none;\n        margin: 0;\n        padding: 9px 29px;\n        border: 3px solid transparent;\n        outline: 0;\n        letter-spacing: 1px;\n    }\n<\/style>","(Elisa-1258) MLK offer - Variant 1":"<a href=\"{{ctaUrl}}\"\n    class=\"ea-fluid-container ea-color-container ea-color-container--transparent-dark-text frosmo_product_link fr-mlk\"\n    data-analytics-creative=\"Front page frosmo\"\n    data-analytics-id=\"LLT_TARG_MLK_tarjous_voimassa\">\n    {{#heading}}<h3 class=\"ea-h3 frosmo_product_name\">{{heading}}<\/h3>{{\/heading}}\n\n    <div class=\"ea-fluid-container__content ea-fluid-container__image fr_lv\">\n        <img class=\"svgimg\" src=\"data:image\/svg+xml;base64,{{{svgIcon}}}\">\n    <\/div>\n\n    <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__gridtext fr_lv\">\n        <h3 class=\"ea-h3 frosmo_product_name\">{{title}}<\/h3>\n        <h2 class=\"ea-h2 frosmo_product_desc\">{{description}}<\/h2>\n        <div>\n            <h2 class=\"ea-h2 frosmo_product_price\">{{price}} <span class=\"unit\">\u20ac\/kk<\/span><\/h2>\n            <h2 class=\"ea-h2 frosmo_product_price_offer\">{{price_offer}}<\/h2>\n            <p class=\"frosmo_product_price_desc\">12 kk ajan. Avausmaksu 6,90 \u20ac. Ei sitoutumispakkoa.<\/p>\n        <\/div>\n    <\/div>\n\n    {{#badge}}<div class=\"ea-badge ea-badge--highlight fr_lv\">{{badge}}<\/div>{{\/badge}}\n<\/a>\n\n<style>\na.frosmo_product_link.fr-mlk {\n    background-color: #ff6400;\n}\n\n.fr-mlk h3.frosmo_product_name {\n    color: #404041;\n    font-size: 1.7em;\n}\n\n.fr-mlk .frosmo_product_price {\n    color: #404041;\n}\n\n.fr-mlk .frosmo_product_description {\n    color: #404041;\n}\n\n.fr-mlk.ea-fluid-container > .ea-h3.frosmo_product_name {\n    color: #fff;\n    text-align: center;\n    vertical-align: middle;\n    width: 100%;\n    padding-bottom: 2%;\n    padding-top: 2%;\n    font-weight: 700;\n    font-size: 1.6em;\n}\n\n.fr-mlk .fr_lv .ea-fluid-container__cta {\n    padding: 0px !important;\n    color: #00baf2 !important;\n}\n\n.fr-mlk .ea-fluid-container__image.fr_lv {\n    height: 88%;\n    top: 9%;\n    width: 95%;\n    border-radius: 4px;\n    background-color: #fff;\n    padding-top: 0;\n}\n\n.fr-mlk .ea-fluid-container__image.fr_lv > .svgimg {\n    height: 26.5%;\n    margin-right: auto;\n    width: auto;\n    margin-left: auto;\n    position: relative;\n    display: block;\n    margin-top: -0.5%;\n    padding-top: {{svgPaddingTop}}px;\n    padding-bottom: {{svgPaddingBottom}}px;\n}\n\n.fr-mlk .ea-fluid-container__gridtext.fr_lv {\n    top: 27%;\n    z-index: 999;\n    text-align: center;\n}\n\n.fr-mlk .ea-fluid-container__gridtext.fr_lv>h2.ea-h2.frosmo_product_desc {\n    color: #404041;\n    font-size: 2.38em;\n    padding-top: 1.5%;\n}\n\n.fr-mlk .ea-fluid-container__gridtext.fr_lv .frosmo_product_price {\n    color: #404041;\n    font-size: 3.6em;\n    padding-top: 6%;\n    padding-bottom: 0;\n    display: inline;\n}\n\n.fr-mlk .ea-fluid-container__gridtext.fr_lv > h2.ea-h2.frosmo_product_price .unit {\n    font-size: 0.65em;\n    margin-left: 0.14em;\n}\n\n.fr-mlk .ea-fluid-container__gridtext.fr_lv .frosmo_product_price_offer {\n    color: #ff6400;\n    font-size: 1.78em;\n    margin-top: -1.6%;\n    margin-left: 5px;\n    display: inline;\n}\n\n.fr-mlk div.ea-badge.fr_lv {\n    z-index: 999;\n    bottom: 6%;\n    left: calc(100% - 72%);\n    width: 44%;\n    height: 12%;\n    position: absolute;\n    font-size: 1.7em;\n    font-weight: 600;\n    padding-top: 4%;\n    z-index: 999;\n}\n\n.fr-mlk div.ea-badge.fr_lv:hover {\n    background-color: #ff7b26;\n    -webkit-transition: background .3s ease-in;\n    transition: background .3s ease-in;\n}\n\n.ea-fluid-container.frosmo_product_link.fr-mlk {\n    font-size: calc(100vw \/ 125);\n}\n\n.fr-mlk .ea-fluid-container__content .frosmo_product_price_desc {\n    font-size: 11px;\n}\n\n.fr-mlk .ea-fluid-container__content .frosmo_cta_button {\n    justify-content: center;\n    background-color: #ff6400;\n    width: 100px;\n    height: 30px;\n    display: inline-block;\n    color: #fff;\n    font-size: 15px;\n    line-height: 28px;\n}\n\n@media only screen and (min-width: 640px) and (max-width: 959px) {\n    .ea-fluid-container.frosmo_product_link.fr-mlk {\n        font-size: calc(100vw \/ 80);\n    }\n}\n\n@media only screen and (max-width: 639px) {\n    .ea-fluid-container.frosmo_product_link.fr-mlk {\n        font-size: calc(100vw \/ 40);\n    }\n}\n<\/style>","(Elisa-1258) MLK offer - Variant 2":"<a href=\"{{ctaUrl}}\"\n    class=\"ea-fluid-container ea-color-container ea-color-container--transparent-dark-text frosmo_product_link fr-mlk\"\n    data-analytics-creative=\"Front page frosmo\"\n    data-analytics-id=\"LLT_TARG_MLK_tarjous_voimassa\">\n    {{#heading}}<h3 class=\"ea-h3 frosmo_product_name\">{{heading}}<\/h3>{{\/heading}}\n\n    <div class=\"ea-fluid-container__content ea-fluid-container__image fr_lv\">\n        <img class=\"svgimg\" src=\"data:image\/svg+xml;base64,{{{svgIcon}}}\">\n    <\/div>\n\n    <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__gridtext fr_lv\">\n        <h3 class=\"ea-h3 frosmo_product_name\">{{title}}<\/h3>\n        <h2 class=\"ea-h2 frosmo_product_desc\">{{description}}<\/h2>\n        <div>\n            <h2 class=\"ea-h2 frosmo_product_price frosmo-line-through\">{{price_offer}} <span class=\"unit\">\u20ac\/kk<\/span><\/h2>\n            <h2 class=\"ea-h2 frosmo_product_price frosmo_product_price_offer\">{{price}} <span class=\"unit\">\u20ac\/kk<\/span><\/h2>\n            <p class=\"frosmo_product_price_desc\">12 kk ajan. Avausmaksu 6,90 \u20ac. Ei sitoutumispakkoa.<\/p>\n        <\/div>\n    <\/div>\n\n    {{#badge}}<div class=\"ea-badge ea-badge--highlight fr_lv\">{{badge}}<\/div>{{\/badge}}\n<\/a>\n\n<style>\na.frosmo_product_link.fr.fr-mlk-mlk {\n    background-color: #ff6400;\n}\n\n.fr-mlk h3.frosmo_product_name {\n    color: #404041;\n    font-size: 1.7em;\n}\n\n.fr-mlk .frosmo_product_price {\n    color: #404041;\n}\n\n.fr-mlk .frosmo_product_description{\n    color: #404041;\n}\n\n.ea-fluid-container.fr-mlk > .ea-h3.frosmo_product_name {\n    color: #fff;\n    text-align: center;\n    vertical-align: middle;\n    width: 100%;\n    padding-bottom: 2%;\n    padding-top: 2%;\n    font-weight: 700;\n    font-size: 1.6em;\n}\n\n.fr-mlk .fr_lv .ea-fluid-container__cta {\n    padding: 0px !important;\n    color: #00baf2 !important;\n}\n\n.fr-mlk .ea-fluid-container__image.fr_lv {\n    height: 88%;\n    top: 9%;\n    width: 95%;\n    border-radius: 4px;\n    background-color: #fff;\n    padding-top: 0;\n}\n\n.fr-mlk .ea-fluid-container__image.fr_lv > .svgimg {\n    height: 26.5%;\n    margin-right: auto;\n    width: auto;\n    margin-left: auto;\n    position: relative;\n    display: block;\n    margin-top: -0.5%;\n    padding-top: {{svgPaddingTop}}px;\n    padding-bottom: {{svgPaddingBottom}}px;\n}\n\n.fr-mlk .ea-fluid-container__gridtext.fr_lv {\n    top: 27%;\n    z-index: 999;\n    text-align: center;\n}\n\n.fr-mlk .ea-fluid-container__gridtext.fr_lv > h2.ea-h2.frosmo_product_desc {\n    color: #404041;\n    font-size: 2.38em;\n    padding-top: 1.5%;\n}\n\n.fr-mlk .ea-fluid-container__gridtext.fr_lv .frosmo_product_price {\n    color: #404041;\n    font-size: 3em;\n    padding-top: 6%;\n    padding-bottom: 0;\n    display: inline;\n}\n\n.fr-mlk .ea-fluid-container__gridtext.fr_lv > h2.ea-h2.frosmo_product_price .unit {\n    font-size: 0.65em;\n    margin-left: 0.14em;\n}\n\n.fr-mlk .ea-fluid-container__gridtext.fr_lv .frosmo_product_price_offer {\n    color: #3574e6;\n    margin-left: 10px;\n}\n\n.fr-mlk div.ea-badge.fr_lv {\n    z-index: 999;\n    bottom: 6%;\n    left: calc(100% - 72%);\n    width: 44%;\n    height: 12%;\n    position: absolute;\n    font-size: 1.7em;\n    font-weight: 600;\n    padding-top: 4%;\n    z-index: 999;\n}\n\n.fr-mlk div.ea-badge.fr_lv:hover {\n    background-color: #ff7b26;\n    -webkit-transition: background .3s ease-in;\n    transition: background .3s ease-in;\n}\n\n.ea-fluid-container.frosmo_product_link.fr-mlk {\n    font-size: calc(100vw \/ 125);\n}\n\n.fr-mlk .ea-fluid-container__content .frosmo_product_price_desc {\n    font-size: 11px;\n}\n\n.fr-mlk .ea-fluid-container__content .frosmo_cta_button {\n    justify-content: center;\n    background-color: #ff6400;\n    width: 100px;\n    height: 30px;\n    display: inline-block;\n    color: #fff;\n    font-size: 15px;\n    line-height: 28px;\n}\n\n.fr-mlk .frosmo-line-through {\n    position: relative;\n}\n\n.fr-mlk .frosmo-line-through::after {\n    border-bottom: 0.1em solid #404041;\n    content: \"\";\n    left: 0;\n    margin-top: calc(0.125em \/ 2 * -1);\n    position: absolute;\n    right: 0;\n    top: 70%;\n}\n\n@media only screen and (min-width: 640px) and (max-width: 959px) {\n    .ea-fluid-container.frosmo_product_link.fr-mlk {\n        font-size: calc(100vw \/ 80);\n    }\n}\n\n@media only screen and (max-width: 639px) {\n    .ea-fluid-container.frosmo_product_link.fr-mlk {\n        font-size: calc(100vw \/ 40);\n    }\n}\n<\/style>","Elisa-grid-banner":"<a href=\"{{url}}\" class=\"ea-fluid-container ea-color-container ea-color-container--transparent-light-text ea-fluid-container--animated\" \nid=\"{{title}}\" data-analytics-creative=\"Front page Frosmo\" data-analytics-id=\"{{data-analytics-id}}\">\n            <div class=\"ea-fluid-container__background-image\">\n                <img img=\"\" src=\"{{img}}\" alt=\"{{title}}\">\n            <\/div>\n            <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__gridtext\">\n                <h3 class=\"ea-h3\">{{title}}<\/h3>\n                <div class=\"ea-bodytext ea-bodytext--two-lines ea-pad ea-pad--pad-bottom-1\">{{subtitle}}<\/div>\n                <div class=\"ea-bodytext ea-fluid-container__cta\">{{cta}}<\/div>\n            <\/div>\n         <\/a>\n         \n<script>\n  if (window.internalPromotionTracker) {\n    window.internalPromotionTracker.refresh();\n  }\n<\/script>","Feedback Tooltip":"<div class=\"fr-cart-tooltip\">\n    <div class=\"fr-cart-tooltip-text\">{{text}}\n        <div class=\"fr-thumb-container\">\n            <button class=\"ea-icon ea-icon--thumb-up\" type=\"button\"><\/button>\n            <button class=\"ea-icon ea-icon--thumb-down\" type=\"button\"><\/button>\n        <\/div>\n        <div class=\"fr-cart-tooltip-close\">&#215;<\/div>\n    <\/div>\n<\/div>\n\n<style>\n    \/* Thumb button *\/\n    .fr-cart-tooltip-text button.ea-icon,\n    .aspa .instructions-button-area .fr-cart-tooltip-text button.ea-icon {\n        background: 0 0;\n        border: none;\n        color: #0019af;\n        margin: 0;\n        transition: all .3s ease-in-out;\n        padding: 2px;\n    }\n\n    .aspa .instructions-button-area .fr-cart-tooltip-text button.ea-icon:active,\n    .aspa .instructions-button-area .fr-cart-tooltip-text button.ea-icon:focus,\n    .aspa .instructions-button-area .fr-cart-tooltip-text button.ea-icon:hover {\n        background: 0 0;\n    }\n\n    .fr-thumb-container {\n        margin: 0 10px;\n    }\n\n    .fr-cart-tooltip-text button.ea-icon--thumb-down:hover {\n        text-shadow: 0 0 1px #e44;\n    }\n\n    .fr-cart-tooltip-text button.ea-icon--thumb-down:active {\n        color: #e44;\n    }\n\n    .fr-cart-tooltip-text button.ea-icon--thumb-up:hover {\n        text-shadow: 0 0 1px #00a950;\n    }\n\n    .fr-cart-tooltip-text button.ea-icon--thumb-up:active {\n        color: #00a950;\n    }\n\n    \/* Hide OmaElisa Red dot *\/\n    .ea-navbar__item__icon.ng-scope.ea-icon.ea-icon--user.fr-after-hidden:after {\n        display: none !important;\n    }\n\n    \/* Attention effect for Cart count icon *\/\n    .fr-pulsate-fwd {\n        -webkit-animation: fr-pulsate-fwd 1s ease-in-out infinite both;\n        animation: fr-pulsate-fwd 1s ease-in-out infinite both;\n    }\n\n    @-webkit-keyframes fr-pulsate-fwd {\n        0% {\n            -webkit-transform: scale(1);\n            transform: scale(1);\n            opacity: 0.75;\n        }\n\n        50% {\n            -webkit-transform: scale(1.3);\n            transform: scale(1.3);\n            opacity: 1;\n        }\n\n        100% {\n            -webkit-transform: scale(1);\n            transform: scale(1);\n            opacity: 0.75;\n        }\n    }\n\n    @keyframes fr-pulsate-fwd {\n        0% {\n            -webkit-transform: scale(1);\n            transform: scale(1);\n            opacity: 0.75;\n        }\n\n        50% {\n            -webkit-transform: scale(1.3);\n            transform: scale(1.3);\n            opacity: 1;\n        }\n\n        100% {\n            -webkit-transform: scale(1);\n            transform: scale(1);\n            opacity: 0.75;\n        }\n    }\n\n    \/* \/\/ Effect *\/\n\n    .fr-hidden {\n        display: none;\n    }\n\n    .fr-cart-tooltip-container {\n        position: absolute;\n        right: 85px;\n        transform: translate(47%, 100%);\n        z-index: 10001;\n    }\n\n    .fr-cart-tooltip {\n        position: absolute;\n        top: 10px;\n        width: 225px;\n        height: 60px;\n        border-radius: 2px;\n        text-align: left;\n        font-size: 16px;\n        display: block;\n        box-shadow: 0px 0px 4px grey;\n        background-color: {{bckgColor}};\n    }\n    \n    .fr-feedback-tooltip .fr-cart-tooltip {\n        position: relative;\n        top: unset;\n        box-shadow: none;\n        margin-left: auto;\n        margin-right: auto;\n    }\n    .fr-feedback-tooltip .fr-cart-tooltip:before {\n        content: none;\n    }\n    .fr-feedback-tooltip .fr-cart-tooltip-close {\n        display: none;\n    }\n    \n\n    .fr-cart-tooltip:before,\n    .fr-cart-tooltip:after {\n        content: \"\";\n        position: absolute;\n        margin-top: -16px;\n        background-color: {{bckgColor}};\n    }\n\n    .fr-cart-tooltip:before {\n        transform: rotate(45deg);\n        box-shadow: 0 1px 5px 0 rgba(0, 0, 0, .3);\n        top: 38px;\n        left: -8px;\n        width: 16px;\n        height: 16px;\n    }\n\n    .fr-cart-tooltip:after {\n        top: 30px;\n        width: 15px;\n        height: 30px;\n    }\n\n    .fr-cart-tooltip-text {\n        height: 100%;\n        font-weight: 400;\n        padding: 15px;\n        line-height: 20px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        color: {\n                {\n                textColor\n            }\n        }\n\n        ;\n    }\n\n    .fr-cart-tooltip-close {\n        position: absolute;\n        cursor: pointer;\n        color: lightgray;\n        top: 2px;\n        right: 5px;\n        font-size: 24px;\n    }\n\n    @media only screen and (max-width: 639px) {\n        #fr-feedback-tooltip {\n            height: 50px\n        }\n\n        .fr-cart-tooltip {\n            top: -50px;\n            left: 10px;\n        }\n\n        .fr-cart-tooltip:before {\n            transform: rotate(-45deg);\n            box-shadow: 0 1px 5px 0 rgba(0, 0, 0, .3);\n            bottom: -8px;\n            top: unset;\n            left: 50%;\n            width: 16px;\n            height: 16px;\n        }\n\n\n        .fr-cart-tooltip:after {\n            bottom: 0;\n            top: unset;\n            left: calc(50% - 7px);\n            width: 30px;\n            height: 15px;\n        }\n    }\n<\/style>","Hero-banner-1":"<a class=\"ea-fluid-container ea-center-block frosmo {{#class}}hero-toggle{{\/class}}{{^class}}{{\/class}}\" data-analytics-creative=\"Front page Frosmo\" data-analytics-id=\"{{data-analytics-id}}\" href=\"{{url}}\" target=\"{{target}}\">\n\t<picture class=\"ea-fluid-container__background-image ea-fluid-container__background-image--{{#img_align}}{{img_align}}{{\/img_align}}{{#no_text}} ea-fluid-container__background-image--no-gradient{{\/no_text}}{{^no_text}}{{\/no_text}}\">\n\t\t<source srcset=\"{{img}}\" media=\"(max-width: 639px)\">\n\t\t<img class=\"ea-fluid-hero__image--large\" srcset=\"{{img}}\" src=\"{{img}}\" alt=\"{{image_alt}}\">\n\t<\/picture>\n\t{{^no_text}}\t\n   <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__text\">\n      \n       <h1 class=\"ea-h1 ea-h1--thick\">{{title}}<\/h1>\n       <p class=\"ea-bodytext ea-pad ea-pad--pad-bottom-1\">{{subtitle}}<\/p>\n       <p class=\"ea-bodytext ea-fluid-container__cta\">{{cta}}<\/p>\n       \n   <\/div>\n   {{\/no_text}}\n<\/a>\n\n\n\n<script>\n  if (window.internalPromotionTracker) { \n      window.internalPromotionTracker.refresh(); \n  }\n  \n    function headingText () {\n        var headingTextEl = document.querySelector('#elisa-banner-hero-1 .ea-h1');\n        if (!headingTextEl || !headingTextEl.innerText) {\n            return;\n        }\n        \n        var hText = headingTextEl.innerText;\n        if ( hText.length > 14){\n            headingTextEl.style.fontSize = \"3.8vw\";\n        }\n        if ( hText.length > 24){\n            headingTextEl.style.fontSize = \"3.4vw\";\n        }\n    }\n     function fadeInHero() {\n        easy.utils.setTimeout( function() {\n            var fadeElement = easy.domElements.selector(positionData.elementId)[0];\n            easy.utils.addClassName(fadeElement, 'frosmo-fade-visible');\n        }, 50);\n    }\n    \n    function init () {\n        headingText();\n        fadeInHero();\n    }\n\n    init();\n<\/script>\n<style>\n  @media only screen and (max-width: 640px) {\n    .h1-down {\n        font-size: 4vw;\n    }\n  }\n  \n  .frosmo-fade-container {\n      opacity: 0;\n  }\n  \n  .frosmo-fade-container.frosmo-fade-visible {\n      transition: opacity 0.8s ease;\n      opacity: 1;\n  }\n\n<\/style>","Hero-banner-1 [Boxy CTA]":"<a class=\"ea-fluid-container ea-center-block frosmo {{#class}}hero-toggle{{\/class}}{{^class}}{{\/class}}\" data-analytics-creative=\"Front page Frosmo\" data-analytics-id=\"{{data-analytics-id}}\" href=\"{{url}}\" target=\"{{target}}\">\n\t<picture class=\"ea-fluid-container__background-image ea-fluid-container__background-image--{{#img_align}}{{img_align}}{{\/img_align}}{{#no_text}} ea-fluid-container__background-image--no-gradient{{\/no_text}}{{^no_text}}{{\/no_text}}\">\n\t\t{{#webpImage}}\n\t\t<source srcset=\"{{webpImage}}\" type=\"image\/webp\">\n\t\t{{\/webpImage}}\n\t\t<source srcset=\"{{img}}\" media=\"(max-width: 639px)\">\n\t\t<img class=\"ea-fluid-hero__image--large\" srcset=\"{{img}}\" src=\"{{img}}\" alt=\"{{image_alt}}\">\n\t<\/picture>\n\t{{^no_text}}\t\n   <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__text frosmo\">\n           <h1 class=\"ea-h1 ea-h1--thick\">{{title}}<\/h1>\n           <h4 class=\"ea-h4\">{{subtitle}}<\/h4>\n           <button class=\"ea-button ea-button--transparent ea-fluid-container__cta\">{{cta}}<\/button>\n   <\/div>\n   {{\/no_text}}\n<\/a>\n<script>\n  if (window.internalPromotionTracker) { \n      window.internalPromotionTracker.refresh(); \n  }\n  \n    function headingText () {\n        var headingTextEl = document.querySelector('#elisa-banner-hero-1 .ea-h1');\n        if (!headingTextEl || !headingTextEl.innerText) {\n            return;\n        }\n        \n        var hText = headingTextEl.innerText;\n        if ( hText.length > 14){\n            headingTextEl.style.fontSize = \"3.8vw\";\n        }\n        if ( hText.length > 24){\n            headingTextEl.style.fontSize = \"3.4vw\";\n        }\n    }\n     function fadeInHero() {\n        easy.utils.setTimeout( function() {\n            var fadeElement = easy.domElements.selector(positionData.elementId)[0];\n            easy.utils.addClassName(fadeElement, 'frosmo-fade-visible');\n        }, 50);\n    }\n    \n    function init () {\n        headingText();\n        fadeInHero();\n    }\n\n    init();\n<\/script>\n<style>\n.frosmo button.ea-button.ea-button--transparent.ea-fluid-container__cta {\n    border-color: #fff;\n    }\n    .frosmo h4.ea-h4 {\n    padding-bottom: .5em;\n    }\n    .frosmo button.ea-button.ea-button--transparent.ea-fluid-container__cta {\n    margin-bottom: 2em;\n}\n  @media only screen and (max-width: 640px) {\n    .h1-down {\n        font-size: 4vw;\n    }\n    .frosmo button.ea-button.ea-button--transparent.ea-fluid-container__cta {\n    border-color: #000;\n    color:#000;\n    }\n  }\n  \n  .frosmo-fade-container {\n      opacity: 0;\n  }\n  \n  .frosmo-fade-container.frosmo-fade-visible {\n      transition: opacity 0.8s ease;\n      opacity: 1;\n  }\n\n<\/style>","Hero-banner-split-2":"<a href=\"{{url}}\" data-analytics-id=\"{{data-analytics-id}}\" class=\"ea-fluid-container ea-color-container ea-color-container--transparent-dark-text ea-fluid-container--animated f1069-product-link\">\r\n    <div class=\"{{#overlay}}fr-bg-img-overlay{{\/overlay}}{{^overlay}}{{\/overlay}} ea-fluid-container fr-background\">\r\n        <img class=\"f1069-image\" src=\"{{img}}\" alt=\"{{title}}\" \/>\r\n    <\/div>\r\n\r\n    <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__gridtext\">\r\n        <h3 class=\"ea-h3 f1069-product-name\">{{title}}<\/h3>\r\n        <div class=\"ea-bodytext ea-bodytext--two-lines ea-pad ea-pad--pad-bottom-1 fr_lv f1069-product-description\"\r\n        style=\"font-size: 14px\">\r\n            {{subtitle}}\r\n        <\/div>\r\n        <div class=\"ea-bodytext ea-fluid-container__cta f1069-product-link\">\r\n            {{cta}}\r\n        <\/div>\r\n    <\/div>\r\n<\/a>\r\n\r\n<script>\r\n    (function () {\r\n        function addSplitClasses() {\r\n            var banner1 = jQuery(\"#elisa-banner-hero-1\");\r\n            banner1.removeClass(\"ea-fgrid__item--laptop-12 ea-fgrid__item--desktop-ratio-3-1\").addClass(\"ea-fgrid__item--laptop-8 ea-fgrid__item--laptop-ratio-2-1\");\r\n\r\n            var banner2 = jQuery(\"#elisa-banner-hero-2\");\r\n            banner2.addClass(\"ea-fgrid__item--laptop-ratio-1-1 ea-fgrid__item--laptop-4 ea-color-container ea-color-container--white\");\r\n        }\r\n\r\n        function headingText() {\r\n            var headingTextEl = document.querySelectorAll(\"#elisa-banner-hero-1 .ea-h1\")[0];\r\n            if (!headingTextEl) {\r\n                return;\r\n            }\r\n            var hText = headingTextEl.innerText;\r\n\r\n            if (hText.length > 14) {\r\n                headingTextEl.style.fontSize = \"3.8vw\";\r\n            }\r\n            if (hText.length > 24) {\r\n                headingTextEl.style.fontSize = \"3.2vw\";\r\n            }\r\n        }\r\n\r\n        frosmo.easy.events.trigger(\"FROSMO_SPLIT_MESSAGE_LOADED\", true);\r\n\r\n\r\n        \/\/when screen size is <960px, we replace #elisa-banner-1\r\n        \/\/with the contents of this message, and when the screen\r\n        \/\/is resized back to >960px, we put the original contents\r\n        \/\/in both places (two copies are created in the process)\r\n        var divReplaced = false;\r\n        var thisMsgContent;\r\n        var originalBanner;\r\n\r\n        function isTablet(width) {\r\n            return width < 960;\r\n        }\r\n\r\n        function handleTabletWidth(width) {\r\n            if (divReplaced) {\r\n                if (!isTablet(width)) {\r\n                    $(\"#elisa-banner-1 .ea-fluid-container\").replaceWith(originalBanner);\r\n                    $(\"#elisa-banner-hero-2\").html(thisMsgContent);\r\n                    divReplaced = false;\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            if (!isTablet(width)) {\r\n                return;\r\n            }\r\n\r\n            var container = $(\"#elisa-banner-1 .ea-fluid-container\");\r\n\r\n            if (container) {\r\n                var message = positionData.getMessageInstance();\r\n                container.replaceWith(thisMsgContent);\r\n                message.setTrackableElements(thisMsgContent[0]);\r\n                divReplaced = true;\r\n            }\r\n        }\r\n\r\n        function init() {\r\n            addSplitClasses();\r\n            headingText();\r\n\r\n            \/\/ disabled for mobiles\r\n            if (!easy.utils.isMobile()){\r\n                frosmo.easy.utils.waitFor(200, 10000, function () {\r\n                    if ($(\"#elisa-banner-1 .ea-fluid-container\").length) {\r\n                        thisMsgContent = $(\"a.f1069-product-link:not(.fr-hidden)\").clone();\r\n                        originalBanner = $(\"#elisa-banner-1 .ea-fluid-container\").clone();\r\n\r\n                        var $window = $(window);\r\n                        var width = $window.width();\r\n\r\n                        handleTabletWidth(width);\r\n\r\n                        $window.resize(function () {\r\n                            width = $(window).width();\r\n                            handleTabletWidth(width);\r\n                        });\r\n\r\n                        return true;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        init();\r\n    })();\r\n<\/script>\r\n<style>\r\n    .fr-bg-img-overlay::after {\r\n        content: \"\";\r\n        position: absolute;\r\n        left: 0;\r\n        top: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: linear-gradient(to top, rgba(0, 0, 0, 0.65) 0, transparent 50%);\r\n        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#a6000000', endColorstr='#00000000', GradientType=0);\r\n    }\r\n\r\n    .f1069-product-name, .f1069-product-description, .f1069-product-link{\r\n        color: {{text-color}}!important;\r\n    }\r\n    .f1069-image{\r\n        width: 100%;\r\n        padding: 20px;\r\n    }\r\n    .fr-background{\r\n        background-color: {{background-color}};\r\n    }\r\n    .f1069-product-link{\r\n        padding: 0px !important;\r\n    }\r\n  <\/style>","Hero-banner-split-2  - 2022 version":"<a href=\"{{url}}\" data-analytics-id=\"{{data-analytics-id}}\" class=\"ea-fluid-container ea-color-container ea-color-container--transparent-dark-text ea-fluid-container--animated f1069-product-link\">\r\n    <div class=\"{{#overlay}}fr-bg-img-overlay{{\/overlay}}{{^overlay}}{{\/overlay}} ea-fluid-container fr-background\">\r\n        <img class=\"f1069-image\" src=\"{{img}}\" alt=\"{{title}}\" \/>\r\n    <\/div>\r\n\r\n    <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__gridtext\">\r\n        <h3 class=\"ea-h3 f1069-product-name\">{{title}}<\/h3>\r\n        <div class=\"ea-bodytext ea-bodytext--two-lines ea-pad ea-pad--pad-bottom-1 fr_lv f1069-product-description\"\r\n        style=\"font-size: 14px\">\r\n            {{subtitle}}\r\n        <\/div>\r\n        <div class=\"ea-bodytext ea-fluid-container__cta f1069-product-link\">\r\n            {{cta}}\r\n        <\/div>\r\n    <\/div>\r\n<\/a>\r\n\r\n<script>frosmo.sharedCode.splitHero.init();<\/script>\r\n\r\n<style>\r\n    .fr-bg-img-overlay::after {\r\n        content: \"\";\r\n        position: absolute;\r\n        left: 0;\r\n        top: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: linear-gradient(to top, rgba(0, 0, 0, 0.65) 0, transparent 50%);\r\n        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#a6000000', endColorstr='#00000000', GradientType=0);\r\n    }\r\n\r\n    .f1069-product-name, .f1069-product-description, .f1069-product-link{\r\n        color: {{text-color}}!important;\r\n    }\r\n    .f1069-image{\r\n        width: 100%;\r\n        padding: 20px;\r\n    }\r\n    .fr-background{\r\n        background-color: {{background-color}};\r\n    }\r\n    .f1069-product-link{\r\n        padding: 0px !important;\r\n    }\r\n  <\/style>","Hero-banner-split-2 - BLUE CTA":"<a href=\"{{url}}\" class=\"ea-fluid-container ea-color-container ea-color-container--transparent-dark-text ea-fluid-container--animated f1069-product-link fr-split-hero-tracking\">\n    <div class=\"{{#overlay}}fr-bg-img-overlay{{\/overlay}}{{^overlay}}{{\/overlay}} ea-fluid-container fr-background\">\n        <img class=\"f1069-image\" src=\"{{img}}\" alt=\"{{title}}\">\n    <\/div>\n    \n    <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__gridtext\">\n        {{#orangeCTA}}\n        <div class=\"frosmo-hero-banner-split-2-CTA\">{{cta}}<\/div>\n        {{\/orangeCTA}}\n        <div style=\"height: 30px\"><\/div>\n    <\/div>\n<\/a>\n<style>\n.fr-bg-img-overlay::after {\n    \/*\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(to top,rgba(0,0,0,.65) 0,transparent 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a6000000', endColorstr='#00000000', GradientType=0 );\n    *\/\n}\n<\/style>\n<script>\n(function () {\n    function addSplitClasses () {\n        var banner1 = jQuery(\"#elisa-banner-hero-1\");\n        banner1\n            .removeClass(\"ea-fgrid__item--laptop-12 ea-fgrid__item--desktop-ratio-3-1\")\n            .addClass(\"ea-fgrid__item--laptop-8 ea-fgrid__item--laptop-ratio-2-1\"); \n       \n        var banner2 = jQuery(\"#elisa-banner-hero-2\");\n        banner2.addClass(\"ea-fgrid__item--laptop-ratio-1-1 ea-fgrid__item--laptop-4 ea-color-container ea-color-container--white\");\n    }\n    \n    function headingText () {\n        var headingTextEl = document.querySelectorAll('#elisa-banner-hero-1 .ea-h1')[0];\n        if (!headingTextEl) {\n            return;\n        }\n        var hText = headingTextEl.innerText;\n        \n        if ( hText.length > 14){\n            headingTextEl.style.fontSize = \"3.8vw\";\n        }\n        if ( hText.length > 24){\n            headingTextEl.style.fontSize = \"3.2vw\";\n        }\n    }\n    \n    frosmo.easy.events.trigger('FROSMO_SPLIT_MESSAGE_LOADED', true);\n    \n    \/\/when screen size is <960px, we replace #elisa-banner-1 \n    \/\/with the contents of this message, and when the screen \n    \/\/is resized back to >960px, we put the original contents \n    \/\/in both places (two copies are created in the process)\n    \/*\n    var divReplaced = false;\n    var thisMsgContent;\n    var originalBanner;\n    \n    function isTablet(width) {\n        return width < 960;\n    }\n    \n    function handleTabletWidth (width) {\n        if (divReplaced){\n            if (!isTablet(width)){\n                $('#elisa-banner-1 .ea-fluid-container').replaceWith(originalBanner);\n                $('#elisa-banner-hero-2').html(thisMsgContent);\n                divReplaced = false;\n            }\n            \n            return;\n        }\n            \n        if (!isTablet(width)){\n            return;\n        }\n        \n        var container = $('#elisa-banner-1 .ea-fluid-container');\n        \n        if (container) {\n            var message = positionData.getMessageInstance();\n            container.replaceWith(thisMsgContent);\n            message.setTrackableElements(thisMsgContent[0]);\n            divReplaced = true;    \n        }\n    }\n    *\/\n\n    function init() {\n        addSplitClasses();\n        headingText();\n        frosmo.easy.utils.waitFor(200, 10000, function () {\n            if ($('#elisa-banner-1 .ea-fluid-container').length) {\n                thisMsgContent = $('a.f1069-product-link:not(.fr-hidden)').clone();\n                originalBanner = $('#elisa-banner-1 .ea-fluid-container').clone();\n    \n                var $window = $(window);\n                var width = $window.width();\n    \n                handleTabletWidth(width);\n            \n                $window.resize(function() {\n                    width = $(window).width();\n                    handleTabletWidth(width);\n                });  \n                \n                return true;\n            }\n        });\n    }\n\n    init();\n    \n})();\n<\/script>\n<style>\n    \/*CTA styling*\/\n    .frosmo-hero-banner-split-2-CTA {\n        padding: 10px 30px;\n        background-color: #0068f0;\n        width: 70%;\n        margin: 0 auto;\n        text-align: center;\n        border-radius: 2px;\n        box-shadow: 0 0 5px #0019af;\n    }\n    \n    .f1069-product-name, .f1069-product-description, .f1069-product-link{\n        color: {{text-color}}!important;\n    }\n    .f1069-image{\n        width: 100%;\n        padding: 0;\n    }\n    .fr-background{\n        background-color: {{background-color}};\n    }  \n    .f1069-product-link{\n        padding: 0px !important;\n    }\n<\/style>","Hero-banner-split-2 - BLUE CTA  - 2022 version":"<a href=\"{{url}}\" class=\"ea-fluid-container ea-color-container ea-color-container--transparent-dark-text ea-fluid-container--animated f1069-product-link fr-split-hero-tracking\">\n    <div class=\"{{#overlay}}fr-bg-img-overlay{{\/overlay}}{{^overlay}}{{\/overlay}} ea-fluid-container fr-background\">\n        <img class=\"f1069-image\" src=\"{{img}}\" alt=\"{{title}}\">\n    <\/div>\n    \n    <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__gridtext\">\n        {{#orangeCTA}}\n        <div class=\"frosmo-hero-banner-split-2-CTA\">{{cta}}<\/div>\n        {{\/orangeCTA}}\n        <div style=\"height: 30px\"><\/div>\n    <\/div>\n<\/a>\n<script>frosmo.sharedCode.splitHero.init()<\/script>\n<style>\n    \/*CTA styling*\/\n    .frosmo-hero-banner-split-2-CTA {\n        padding: 10px 30px;\n        background-color: #0068f0;\n        width: 70%;\n        margin: 0 auto;\n        text-align: center;\n        border-radius: 2px;\n        box-shadow: 0 0 5px #0019af;\n    }\n    \n    .f1069-product-name, .f1069-product-description, .f1069-product-link{\n        color: {{text-color}}!important;\n    }\n    .f1069-image{\n        width: 100%;\n        padding: 0;\n    }\n    .fr-background{\n        background-color: {{background-color}};\n    }  \n    .f1069-product-link{\n        padding: 0px !important;\n    }\n<\/style>","Hero-banner-split-2 - Orange CTA":"<a href=\"{{url}}\" class=\"ea-fluid-container ea-color-container ea-color-container--transparent-dark-text ea-fluid-container--animated f1069-product-link fr-split-hero-tracking\">\n    <div class=\"{{#overlay}}fr-bg-img-overlay{{\/overlay}}{{^overlay}}{{\/overlay}} ea-fluid-container fr-background\">\n        <img class=\"f1069-image\" src=\"{{img}}\" alt=\"{{title}}\">\n    <\/div>\n    \n    <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__gridtext\">\n        {{#orangeCTA}}\n        <div class=\"frosmo-hero-banner-split-2-CTA\">{{cta}}<\/div>\n        {{\/orangeCTA}}\n        <div style=\"height: 30px\"><\/div>\n    <\/div>\n<\/a>\n<style>\n.fr-bg-img-overlay::after {\n    \/*\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(to top,rgba(0,0,0,.65) 0,transparent 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a6000000', endColorstr='#00000000', GradientType=0 );\n    *\/\n}\n<\/style>\n<script>\n(function () {\n    function addSplitClasses () {\n        var banner1 = jQuery(\"#elisa-banner-hero-1\");\n        banner1\n            .removeClass(\"ea-fgrid__item--laptop-12 ea-fgrid__item--desktop-ratio-3-1\")\n            .addClass(\"ea-fgrid__item--laptop-8 ea-fgrid__item--laptop-ratio-2-1\"); \n       \n        var banner2 = jQuery(\"#elisa-banner-hero-2\");\n        banner2.addClass(\"ea-fgrid__item--laptop-ratio-1-1 ea-fgrid__item--laptop-4 ea-color-container ea-color-container--white\");\n    }\n    \n    function headingText () {\n        var headingTextEl = document.querySelectorAll('#elisa-banner-hero-1 .ea-h1')[0];\n        if (!headingTextEl) {\n            return;\n        }\n        var hText = headingTextEl.innerText;\n        \n        if ( hText.length > 14){\n            headingTextEl.style.fontSize = \"3.8vw\";\n        }\n        if ( hText.length > 24){\n            headingTextEl.style.fontSize = \"3.2vw\";\n        }\n    }\n    \n    frosmo.easy.events.trigger('FROSMO_SPLIT_MESSAGE_LOADED', true);\n    \n    \/\/when screen size is <960px, we replace #elisa-banner-1 \n    \/\/with the contents of this message, and when the screen \n    \/\/is resized back to >960px, we put the original contents \n    \/\/in both places (two copies are created in the process)\n    \/*\n    var divReplaced = false;\n    var thisMsgContent;\n    var originalBanner;\n    \n    function isTablet(width) {\n        return width < 960;\n    }\n    \n    function handleTabletWidth (width) {\n        if (divReplaced){\n            if (!isTablet(width)){\n                $('#elisa-banner-1 .ea-fluid-container').replaceWith(originalBanner);\n                $('#elisa-banner-hero-2').html(thisMsgContent);\n                divReplaced = false;\n            }\n            \n            return;\n        }\n            \n        if (!isTablet(width)){\n            return;\n        }\n        \n        var container = $('#elisa-banner-1 .ea-fluid-container');\n        \n        if (container) {\n            var message = positionData.getMessageInstance();\n            container.replaceWith(thisMsgContent);\n            message.setTrackableElements(thisMsgContent[0]);\n            divReplaced = true;    \n        }\n    }\n    *\/\n\n    function init() {\n        addSplitClasses();\n        headingText();\n        frosmo.easy.utils.waitFor(200, 10000, function () {\n            if ($('#elisa-banner-1 .ea-fluid-container').length) {\n                thisMsgContent = $('a.f1069-product-link:not(.fr-hidden)').clone();\n                originalBanner = $('#elisa-banner-1 .ea-fluid-container').clone();\n    \n                var $window = $(window);\n                var width = $window.width();\n    \n                handleTabletWidth(width);\n            \n                $window.resize(function() {\n                    width = $(window).width();\n                    handleTabletWidth(width);\n                });  \n                \n                return true;\n            }\n        });\n    }\n\n    init();\n    \n})();\n<\/script>\n<style>\n    \/*CTA styling*\/\n    .frosmo-hero-banner-split-2-CTA {\n        padding: 10px 30px;\n        background-color: #fb6601;\n        width: 70%;\n        margin: 0 auto;\n        text-align: center;\n        border-radius: 3px;\n        box-shadow: 0 0 5px #0019af;\n    }\n    \n    .f1069-product-name, .f1069-product-description, .f1069-product-link{\n        color: {{text-color}}!important;\n    }\n    .f1069-image{\n        width: 100%;\n        padding: 0;\n    }\n    .fr-background{\n        background-color: {{background-color}};\n    }  \n    .f1069-product-link{\n        padding: 0px !important;\n    }\n<\/style>","Hero-banner-split-2 - Orange CTA  - 2022 version":"<a href=\"{{url}}\" class=\"ea-fluid-container ea-color-container ea-color-container--transparent-dark-text ea-fluid-container--animated f1069-product-link fr-split-hero-tracking\">\n    <div class=\"{{#overlay}}fr-bg-img-overlay{{\/overlay}}{{^overlay}}{{\/overlay}} ea-fluid-container fr-background\">\n        <img class=\"f1069-image\" src=\"{{img}}\" alt=\"{{title}}\">\n    <\/div>\n    \n    <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__gridtext\">\n        {{#orangeCTA}}\n        <div class=\"frosmo-hero-banner-split-2-CTA\">{{cta}}<\/div>\n        {{\/orangeCTA}}\n        <div style=\"height: 30px\"><\/div>\n    <\/div>\n<\/a>\n<script>frosmo.sharedCode.splitHero.init();<\/script>\n<style>\n    \/*CTA styling*\/\n    .frosmo-hero-banner-split-2-CTA {\n        padding: 10px 30px;\n        background-color: #fb6601;\n        width: 70%;\n        margin: 0 auto;\n        text-align: center;\n        border-radius: 3px;\n        box-shadow: 0 0 5px #0019af;\n    }\n    \n    .f1069-product-name, .f1069-product-description, .f1069-product-link{\n        color: {{text-color}}!important;\n    }\n    .f1069-image{\n        width: 100%;\n        padding: 0;\n    }\n    .fr-background{\n        background-color: {{background-color}};\n    }  \n    .f1069-product-link{\n        padding: 0px !important;\n    }\n<\/style>","Hy\u00f6tylinkit [split-1]":"<a class=\"frosmo-article\" data-frosmo-article-id=\"{{title}}\" href=\"{{url}}\" data-analytics-id=\"{{data-analytics-id}}\">\n    \t<picture class=\"fr-img-container\">\n    \t\t<source srcset=\"{{img}}\" media=\"(max-width: 639px)\">\n    \t\t<img class=\"fr-article-img\" srcset=\"{{img}}\" src=\"{{img}}\" alt=\"{{img-alt}}\">\n    \t<\/picture>\n       <div class=\"fr-article-text\">\n           <h1 class=\"fr-article-title\" >{{title}}<\/h1>\n           <p class=\"fr-article-cat\">{{subtitle}}<\/p>\n           <p class=\"fr-article-cta\">{{cta}}<\/p>\n       <\/div>\n    <\/a>\n    \n<script>\n    var easy = frosmo.easy;\n    if (window.internalPromotionTracker) { window.internalPromotionTracker.refresh(); }\n  \n    (function () {\n      \n        function headingText () {\n        var headingTextEl = document.querySelectorAll('#fr-split-1 .fr-article-title');\n        frosmo.easy.utils.each(headingTextEl, function (el){\n            var hText = el.innerText;\n            if ( hText.length > 14){\n                el.style.fontSize = \"3.8vw\";\n            }\n            if ( hText.length > 24){\n                el.style.fontSize = \"3.4vw\";\n            }    \n        });\n        \n    }\n     \t\n    function _checkImgZoomLevel() {\n        var imgHeight;\n        var sel = '#fr-split-1 .frosmo-article:visible img';\n        easy.utils.waitFor(100, 6000, function () {\n            imgHeight = easy.domElements.selector(sel)[0].naturalHeight;\n            if (imgHeight > 0 && imgHeight < 1300){\n                $(sel).addClass('frosmo-scale-2');\n                return true;\n            }\n        });\n    }\n    \n    function init () {\n        _checkImgZoomLevel();\n        headingText();\n    }\n\n    init();\n    \n})(); \n<\/script>\n\n<style>\n    .fr-reco-container {\n        margin-top: 5px;\n    }\n    .frosmo-article {\n        display: block;\n    }\n    \n    #fr-split-1 .frosmo-article .fr-article-img {\n        width: 100%;\n        height: 100%;\n    }\n    \n    \n    .frosmo-article .fr-article-text {\n        position: absolute;\n        bottom: 0;\n        padding: 20px;\n        color: #ffffff;\n        text-align: center;\n        width: 100%;\n        text-transform: uppercase;\n    }\n    \n    .fr-article-title {\n        line-height: 1.2em;\n        padding-bottom: 0.1em;\n    }\n    \n    .fr-article-cat {\n        font-size: 16px;\n        line-height: 1.5em;\n        padding-bottom: 12px;\n        \n    }\n    \n    .fr-article-cta {\n        font-size: 16px;\n        line-height: 1.5em;\n        padding: 12px;\n    }\n    \n    .fr-img-container::after {\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background: linear-gradient(to top,rgba(0,0,0,.65) 0,transparent 50%);\n    }\n<\/style>","most viewed EXPORT":"<div id=\"in-document-carousel\">\n    <div class=\"viewport\">\n        <p style=\"padding: 20px 0 10px 30px; color: #666666; font-family: 'verlag bold'; font-size: 15px;\">\n            SUOSITUIMMAT LAITTEET\n        <\/p>\n        <ul class=\"overview\">\n        <span id=\"frosmo-last-viewed\" class=\"overview\"><\/span>\n        \n{{#products}}                \n            <li class=\"carousel-item frosmo-most-viewed-item\" style=\"margin-top: 10px;\">\n            \t<a href=\"{{url}}\" class=\"\">\n            \t    <img src=\"{{image}}\"  style=\"max-width: 200px\"\/>\n                    <div class=\"rich-text-content\">\n                        <h3>{{id}}<\/h3>\n                        <p class=\"frPromoLabel\"><strong>{{ promotionLabel }}<\/strong><\/p>\n                        <p class=\"frTotalPrice\">Kokonaishinta {{price}} &euro;<\/p>\n                        <p><\/p>\n                    <\/div>\n            \t<\/a>            \t\n            <\/li>\n{{\/products}}\n        <\/ul>\n    <\/div>\n<\/div>","puk-koodi ohje page Feedback Tooltip":"<script>\n    \/**\n     * Setup listener on the guide section with id={{guideID}}\n     * When open the guide, a tooltip with feedback (thumb-up\/down) tooltip appear\n     * Advanced tracking on close, thumb-up\/down button\n     **\/\n    var TEXT = '{{title}}';\n    var BACKGROUND_COLOR = '#fff';\n    var TEXT_COLOR = '#404041';\n    \n    var MODULE = '1174-feedback';\n    var DELAY = '1'; \/\/ number of seconds to wait to show the tooltip\n    var GUIDE_ID = '{{guideId}}';\n    \n    var instance = positionData.getMessageInstance();\n    instance.setDisplayed();\n    \/\/ Add class to placement for easy access\n    var el = easy.domElements.selector('#' + GUIDE_ID)[0];\n    if (el) {\n        easy.utils.addClassName(el, 'fr-' + MODULE + '-placement');\n        easy.utils.addClassName(el, 'fr-' + MODULE + '-id-' + GUIDE_ID);\n    }\n    \/\/ listen to click on guides\n    var placements = easy.domElements.selector('.fr-' + MODULE + '-id-' + GUIDE_ID);\n    easy.domEvents.on(placements, 'click', function(event) {\n        var guideName = event.target.id;\n        \/\/ Hide all prev opened tooltip\n        removeTooltip();\n        \n        \/\/ wait and then render and show the tooltip\n        easy.utils.setTimeout(function() {\n            \/\/ check if the guide is open\n            var guideContentEl = easy.domElements.selector('.ea-accordion__content', event.target.parentNode)[0];\n            if (guideContentEl && guideContentEl.clientHeight > 0 ) {\n                var html = easy.template.render(easy.template.get('Feedback Tooltip'), \n                    { \n                        text: TEXT,\n                        bckgColor: BACKGROUND_COLOR,\n                        textColor: TEXT_COLOR \n                    });\n\n                easy.console.log('AAAAAAAAAA', event.target);\n                var newid = event.target.id + '_thumbs';\n                var renderedHtml = '<div id=\"' + newid + '\" class=\"fr-feedback-tooltip\">' + html + '<\/div>';\n                event.target.nextElementSibling.insertAdjacentHTML('beforeend', renderedHtml);\n                var div = easy.domElements.selector('#' + newid);\n                \n                instance.setTrueDisplayed();\n                \n                \/\/ Button function\n                \/\/ Close button\n                var closeButton = easy.domElements.selector('.fr-cart-tooltip-close', div);\n                easy.domEvents.on(closeButton, 'click', function() {\n                    instance.setClicked();\n                    frosmo.easy.tracking.event('close_' + guideName, {\n                        modificationId: instance.id,\n                        variationId: instance.revision\n                    });\n                    removeTooltip();\n                });\n                \/\/ Thumb up button\n                var upButton = easy.domElements.selector('.ea-icon--thumb-up', div);\n                easy.domEvents.on(upButton, 'click', function() {\n                    instance.setClicked();\n                    frosmo.easy.tracking.event('thumb_up_' + guideName , {\n                        modificationId: instance.id,\n                        variationId: instance.revision\n                    });\n                    removeTooltip();\n                });\n                \/\/ Thumb down button\n                var downButton = easy.domElements.selector('.ea-icon--thumb-down', div);\n                easy.domEvents.on(downButton, 'click', function() {\n                    instance.setClicked();\n                    frosmo.easy.tracking.event('thumb_down_' + guideName , {\n                        modificationId: instance.id,\n                        variationId: instance.revision\n                    });\n                    removeTooltip();\n                });\n            }\n        }, DELAY * 1000);\n    });\n    \n    function removeTooltip() {\n        var existingTooltip = easy.domElements.selector('.fr-feedback-tooltip')[0];\n        if (existingTooltip) {\n            existingTooltip.remove();\n        }\n    }\n<\/script>","uutisetRecommendation":"{{#products}}\n<div class=\"ea-fgrid ea-color-container frosmo-container \">\n  <div class=\"ea-fgrid__item ea-fgrid__item--block\">\n    <div class=\"ea-visual-marketing-block {{#inverse}}ea-visual-marketing-block--inverse{{\/inverse}}\">\n      <div class=\"ea-visual-marketing-block__text-wrapper\">\n        <article class=\"ea-visual-marketing-block__text ea-pad ea-pad--pad-h-m-fluid\">\n          <h3 class=\"ea-h3 ea-h3--thick\">{{title}}<\/h3>\n          \n              <div class=\"ea-bodytext ea-bodytext--large\">\n                <p>{{ingressText}}<\/p>\n                <p>{{firstParagraph}}<\/p>\n                <a class=\"js-item-cart-button underline-text ea-button ea-button--transparent\" href=\"{{url}}\">LUE ARTIKKELI<\/a>\n              <\/div>\n        <\/article>\n      <\/div>\n      <aside data-youtube-id=\"\" data-img-link=\"\" class=\"ea-visual-marketing-block__image js-visual-img-container\">\n        <img src=\"{{image}}\">\n      <\/aside>\n    <\/div>\n  <\/div>\n<\/div>\n{{\/products}}\n\n{{#genericLink}}\n<div class=\"ea-philosophy  ea-color-container ea-color-container--white-smoke\">\n  <div class=\"ea-color-container__content ea-snapper-container ea-snapper-container--laptop-compress-2\">\n    <div class=\"ea-pad ea-pad--pad-v-4 ea-ingresstext\">\n      <h2>{{title}}<\/h2> \n         <a class=\"underline-text ea-button ea-button--transparent\" href=\"{{href}}\">LUE ARTIKKELEITA<\/a>\n    <\/div>\n  <\/div>\n<\/div>\n{{\/genericLink}}","[OLD] Hero-banner-1-align-top":"<a class=\"ea-fluid-container ea-center-block frosmo {{class}}\" data-analytics-creative=\"Front page Frosmo\" data-analytics-id=\"{{data-analytics-id}}\" href=\"{{url}}\">\n\t<picture class=\"ea-fluid-container__background-image ea-fluid-container__background-image--{{#img_align}}{{img_align}}{{\/img_align}}{{^img_align}}top{{\/img_align}}\">\n\t\t<source srcset=\"{{img}}\" media=\"(max-width: 639px)\">\n\t\t<img class=\"ea-fluid-hero__image--large\" srcset=\"{{img}}\" src=\"{{img}}\" alt=\"{{data-analytics-id}}\">\n\t<\/picture>\n\t\t\n   <div class=\"ea-fluid-container__content ea-fluid-container__content--bottom ea-fluid-container__text\">\n       <h1 class=\"ea-h1 ea-h1--thick\">{{title}}<\/h1>\n       <p class=\"ea-bodytext ea-pad ea-pad--pad-bottom-1\">{{subtitle}}<\/p>\n       <p class=\"ea-bodytext ea-fluid-container__cta\">{{cta}}<\/p>\n   <\/div>\n<\/a>\n\n\n\n<script>\n  if (window.internalPromotionTracker) { \n      window.internalPromotionTracker.refresh(); \n  }\n  \n    function headingText () {\n        var headingTextEl = document.querySelector('#elisa-banner-hero-1 .ea-h1');\n        if (!headingTextEl || !headingTextEl.innerText) {\n            return;\n        }\n        \n        var hText = headingTextEl.innerText;\n        if ( hText.length > 14){\n            headingTextEl.style.fontSize = \"3.8vw\";\n        }\n        if ( hText.length > 24){\n            headingTextEl.style.fontSize = \"3.4vw\";\n        }\n    }\n  \n    function fadeInHero() {\n        easy.setTimeout( function() {\n            var fadeElement = easy.domElements.selector(positionData.elementId)[0];\n            easy.utils.addClassName(fadeElement, 'frosmo-fade-visible');\n        }, 50);\n    }\n    \n    function init () {\n        headingText();\n        fadeInHero();\n    }\n\n    init();\n<\/script>\n<style>\n  @media only screen and (max-width: 640px) {\n    .h1-down {\n        font-size: 4vw;\n    }\n  }\n  \n  .frosmo-fade-container {\n      opacity: 0;\n  }\n  \n  .frosmo-fade-container.frosmo-fade-visible {\n      transition: opacity 0.8s ease;\n      opacity: 1;\n  }\n\n<\/style>","[OLD] Quick bottom links":"<div class=\"f1070-close ea-icon ea-icon--cross\"><\/div>\n<div class=\"f1070-content\" data-content-id=\"SoitaMeille\">\n    <h3 class=\"ea-h2 ea-pad--pad-left-xl sg\">\n        Asiakaspalvelu\n    <\/h3>\n    <p class=\"ea-bodytext ea-bodytext--large ea-pad--pad-left-xl sg ea-icon ea-icon--phone-number\">\n        &nbsp;<strong>010 190 260<\/strong> (mpm\/pvm)\n    <\/p>\n    <p class=\"ea-bodytext ea-bodytext--large ea-pad--pad-left-xl sg\">\n        Avoinna ma-pe klo 8-19, la klo 10-16.30.\n    <\/p>\n<\/div>\n<div class=\"f1070-content\" data-content-id=\"VaraaAika\">\n    <h3 class=\"ea-h2 ea-pad--pad-left-xl sg\">\n        Varaa soittoaika asiakaspalveluun\n    <\/h3>\n    <p class=\"ea-bodytext ea-bodytext--large ea-pad--pad-left-xl sg\">\n        Valitse aihe, p\u00e4iv\u00e4 ja kellonaika. Soitamme sinulle 30 minuutin sis\u00e4ll\u00e4 varaamastasi ajasta.\n    <\/p>\n    <div>\n        <a class=\"ea-button ea-button--small\" href=\"https:\/\/elisa.fi\/asiakaspalvelu\/yhteystiedot\/#soittoaika\" onClick=\"ga('send', 'event', {\n        eventCategory: 'yhteystietokokeilu',\n        eventAction: 'click',\n        eventLabel: 'soittoaika'\n      });\"  target=\"_blank\">Varaa aika<\/a>\n    <\/div>\n<\/div>\n<div class=\"f1070-content\" data-content-id=\"Chattaa\">\n    <h3 class=\"ea-h2 ea-pad--pad-left-xl sg\">\n        Chat-asiakaspalvelu\n    <\/h3>\n    <p class=\"ea-bodytext ea-bodytext--large ea-pad--pad-left-xl sg\">\n        L\u00f6yd\u00e4t chat asiakaspalvelumme OmaElisasta arkisin 8-18.\n    <\/p>\n    <div>\n        <a class=\"ea-button ea-button--small\" href=\"https:\/\/verkkoasiointi.elisa.fi\/asiakastuki\" onClick=\"ga('send', 'event', {\n        eventCategory: 'yhteystietokokeilu',\n        eventAction: 'click',\n        eventLabel: 'chat'\n      });\" target=\"_blank\">SIIRRY OMAELISAAN<\/a>\n    <\/div>\n<\/div>\n<div class=\"f1070-buttons\">\n    {{#isOmaElisaActive}}\n    <a href=\"https:\/\/verkkoasiointi.elisa.fi\" onClick=\"ga('send', 'event', {\n        eventCategory: 'yhteystietokokeilu',\n        eventAction: 'click',\n        eventLabel: 'omaElisa'\n      });\" data-content-id=\"OmaElisa\" class=\"f1070-buttons-item ea-icon ea-icon--user\">\n        <div class=\"ea-disclaimertext\">OmaElisa<\/div>\n    <\/a>\n    {{\/isOmaElisaActive}}\n    {{#isSoitaMeilleActive}}\n    <a data-content-id=\"SoitaMeille\" onClick=\"ga('send', 'event', {\n        eventCategory: 'yhteystietokokeilu',\n        eventAction: 'click-tab',\n        eventLabel: 'soita-tab'\n      });\" \n      class=\"f1070-buttons-item ea-icon ea-icon--phone-number\">\n        <div class=\"ea-disclaimertext\">Soita meille<\/div>\n    <\/a>\n    {{\/isSoitaMeilleActive}}\n    {{#isVaraaAikaActive}}\n    <a data-content-id=\"VaraaAika\" onClick=\"ga('send', 'event', {\n        eventCategory: 'yhteystietokokeilu',\n        eventAction: 'click-tab',\n        eventLabel: 'callback-tab'});\" \n    class=\"f1070-buttons-item ea-icon ea-icon--calendar\">\n        <div class=\"ea-disclaimertext\">Varaa aika<\/div>\n    <\/a>\n    {{\/isVaraaAikaActive}}\n    {{#isChattaaActive}}\n    <a data-content-id=\"Chattaa\" onClick=\"ga('send', 'event', {\n        eventCategory: 'yhteystietokokeilu',\n        eventAction: 'click-tab',\n        eventLabel: 'chat-tab'\n      });\" class=\"f1070-buttons-item ea-icon ea-icon--bubbles\">\n        <div class=\"ea-disclaimertext\">Chattaa<\/div>\n    <\/a>\n    {{\/isChattaaActive}}\n<\/div>\n\n<script>\n    var wrapper = easy.domElements.selector('.f1070-wrapper');\n    var buttons = easy.domElements.selector('.f1070-buttons-item');\n    var contents = easy.domElements.selector('.f1070-content');\n    var close = easy.domElements.selector('.f1070-close');\n    var message = positionData.getMessageInstance();\n    \n    message.setTrackableElements(buttons);\n    message.startTracking();\n    \n    function closeTab() {\n        easy.utils.removeClassName(contents, \"active\");\n        easy.utils.removeClassName(buttons, \"active\");\n        easy.utils.removeClassName(wrapper, \"active\");\n    }\n    \n    easy.domEvents.on(close, 'click', function() {\n        closeTab();\n    });\n    \n    easy.domEvents.on(buttons, 'click', function(e, element) {\n        var contentId = element.getAttribute('data-content-id');\n        \n        if (!contentId) return;\n        \n        easy.tracking.event('click'+contentId, {\n            modificationId: message.id,\n            variationId: message.revision\n        });\n        console.log('aaa', message)\n        var content = easy.domElements.selector(\".f1070-content[data-content-id='\" + contentId +\"']\");\n        var isActive = easy.utils.hasClassName(element, 'active');\n        \n        closeTab();\n        \n        if (!content || isActive) return;\n        \n        easy.utils.addClassName(element, \"active\");\n        easy.utils.addClassName(content, \"active\");\n        easy.utils.addClassName(wrapper, \"active\");    \n    });\n<\/script>\n\n<style>\n    .f1070-wrapper {\n        display: flex;\n        color: #404041;\n        position: fixed;\n        max-width: 400px;\n        bottom: 80px;\n        right: 0;\n    }\n    .f1070-wrapper .f1070-close {\n        display: none;\n        position: absolute;\n        right: 85px;\n        top: 5px;\n        z-index: 3;\n    }\n    .f1070-wrapper .f1070-close:hover {\n        cursor: pointer;\n    }\n    .f1070-wrapper.active .f1070-close {\n        display: block;\n    }\n    .f1070-wrapper .f1070-content {\n        flex-direction: column;\n        background-color: #fff;\n        border: 1px solid #e0e0e1;\n        border-radius: 5px 0 0 5px;\n        padding: 1.2rem;\n        display: none;\n        right: -1px;\n        position: relative;\n        justify-content: space-around;\n    }\n    .f1070-wrapper .f1070-content h3 {\n        padding-left: 0;\n    }\n    .f1070-wrapper .f1070-content p {\n        padding-left: 0;\n    }\n    .f1070-wrapper .f1070-content.active {\n        display: flex;\n        flex-basis: 320px;\n    }\n    .f1070-wrapper .f1070-buttons {\n        display: flex;\n        justify-content: flex-end;\n        flex-direction: column;\n    }\n    .f1070-wrapper .f1070-buttons .f1070-buttons-item {\n        color: #404041;\n        text-align: center;\n        line-height: 50px;\n        width: 80px;\n        height: 80px;\n        cursor: pointer;\n        background-color: #fff;\n        border-left: 1px solid #e0e0e1;\n        border-right: none;\n        border-top: none;\n        border-bottom: none;\n        padding: 0;\n    }\n    .f1070-wrapper .f1070-buttons .f1070-buttons-item:first-child {\n        border-top: 1px solid #e0e0e1;\n        border-radius: 5px 0 0 0;\n    }\n    .f1070-wrapper .f1070-buttons .f1070-buttons-item:last-child {\n        border-bottom: 1px solid #e0e0e1;\n        border-radius: 0 0 0 5px;\n    }\n    .f1070-wrapper .f1070-buttons .f1070-buttons-item.active {\n        border-top: 1px solid #e0e0e1;\n        border-bottom: 1px solid #e0e0e1;\n        border-left-color: #fff;\n        z-index: 2;\n    }\n    .f1070-wrapper.active .f1070-buttons .f1070-buttons-item {\n        border-radius: 0;\n        border-left-width: 0;\n    }\n<\/style>","[OLD] Viihde products on ideat pages":"<div class=\"ViihdeBanner__2o4vo\">\n    <div class=\"ViihdeBanner__bannerTitle__2kJiu\">Suosittelemme sinulle<\/div>\n    <div class=\"ViihdeBanner__contents__2FMvZ\">\n        <div class=\"ViihdeBanner__image__3iPi-\">\n            <img src=\"{{imageUrl}}\">\n        <\/div>\n        <div class=\"ViihdeBanner__details__gMFAr\">\n            <div class=\"ViihdeBanner__title__16A9z\">{{title}}<\/div>\n            <div class=\"ViihdeBanner__subtitle__16A9z\">{{subtitle}}<\/div>\n            {{#price}}\n            <div class=\"ViihdeBanner__price__36x2F\">\n                <div class=\"ViihdeBanner__priceAlk__36IEc\"><\/div>\n                <div class=\"ViihdeBanner__priceValue__oxjJS\">{{price}}<\/div>\n                <div class=\"ViihdeBanner__priceCurrency__36IEc\"><\/div>\n            <\/div>\n            {{\/price}}\n            <div class=\"ViihdeBanner__buttonContainer__2HT5J\">\n                <a href=\"{{link}}\" class=\"ViihdeBanner__button__33BNI\">{{CTA}}<\/a>\n            <\/div>\n        <\/div>\n    <\/div>\n<\/div>\n\n<style>\n.ViihdeBanner__2o4vo {\n    padding: 30px; \n    width: 75%;\n    margin: 0 auto;\n}\n\n.ViihdeBanner__bannerTitle__2kJiu {\n    font-size: 30px;\n    font-weight: normal;\n    margin: 40px 0;\n}\n\n.ViihdeBanner__contents__2FMvZ {\n  display: flex;\n  justify-content: center; }\n\n.ViihdeBanner__details__gMFAr {\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  padding: 0 30px; \n  width: 100%;    \n}\n\n.ViihdeBanner__image__3iPi- {\n    margin: auto 0;\n}\n\n.ViihdeBanner__image__3iPi- img {\n    width: 200px;\n    margin: 0 auto;\n    display: block; \n}\n\n.ViihdeBanner__title__16A9z {\n    font-size: 34px;\n    color: #404041; \n    margin-bottom: 20px;\n}\n\n.ViihdeBanner__subtitle__16A9z {\n    font-size: 18px;    \n    font-weight: 400;\n    margin-bottom: 20px;\n}\n.ViihdeBanner__price__36x2F {\n    \/*display: flex;*\/\n    align-items: baseline; \n    margin-bottom: 20px;\n}\n\n.ViihdeBanner__priceValue__oxjJS {\n  font-size: 24px;\n  font-weight: 400; }\n\n.ViihdeBanner__priceCurrency__36IEc {\n  font-size: 24px;\n  font-weight: 400;\n  margin: 0 10px; }\n  \n  .ViihdeBanner__priceAlk__36IEc {\n  font-size: 24px;\n  font-weight: 400;\n  margin: 0 10px; }\n\n.ViihdeBanner__buttonContainer__2HT5J {\n  margin-bottom: 20px; }\n\n.ViihdeBanner__button__33BNI {\n  background-color: #ff6400;\n  color: #ffffff;\n  padding: 9px 29px;\n  border-radius: 2px;\n  cursor: pointer;\n  text-transform: uppercase;\n  text-decoration: none;\n  display: inline-block; }\n\n.ViihdeBanner__button__33BNI:hover {\n  background-color: #ff7b26; }\n  \n@media (max-width: 600px) {\n    .ViihdeBanner__contents__2FMvZ {\n        flex-direction: column;\n    }\n    .ViihdeBanner__2o4vo {\n        width: 100%;\n        padding: 0;\n    }\n    .ViihdeBanner__image__3iPi- {\n        width: 100%;\n    }\n    .ViihdeBanner__image__3iPi- img {\n        width: 100%;\n    }\n    .ViihdeBanner__details__gMFAr {\n        padding: 10px;\n    }\n}\n<\/style>","[RECO] B2B_5g_recommendations_template":"<div class=\"frosmo-grid\">\n  {{#products}}\n  <div class=\"frosmo-article\">\n    <a class=\"frosmo-article__link\" href=\"{{ url }}\">\n      <div class=\"frosmo-article__image\">\n        <img src=\"{{ image }}\" \/>\n      <\/div>\n      <div class=\"frosmo-article__content\">\n        <div class=\"frosmo-article__title\">{{ title }}<\/div>\n        <div class=\"frosmo-article__cta\"><span>LUE ARTIKKELI<\/span><\/div>\n      <\/div>\n    <\/a>\n  <\/div>\n  {{\/products}}\n<\/div>\n<style>\n  .productgrid .ea-fgrid {\n    display: none;\n  }\ndiv.frosmo-grid{\n    display: flex;\n    flex-wrap: wrap;\n}\n\ndiv.frosmo-article{\n    flex: 1 0 33.33%;\n    max-width: 33.33%;\n    position: relative;\n    overflow: hidden;\n}\n\ndiv.frosmo-article::before{\n    display: block;\n    content: \"\";\n    height: 0;\n    padding-top: 100%;\n    box-sizing: inherit;\n}\n\n.frosmo-article__link{\n    background-color: rgba(64, 64, 65, 0);\n    color: #ffffff;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    box-sizing: border-box;\n}\n\n.frosmo-article__image{\n    width: 100%;\n    transform: scale(1.03);\n    transition: transform 0.5s;\n    will-change: transform;\n    background-size: cover;\n    -webkit-backface-visibility: hidden;\n    image-rendering: crisp-edges;\n    display: block;\n    position: absolute;\n    margin: auto 0;\n    top: 0;\n    bottom: 0;\n}\n\n.frosmo-article__image img{\n    position: relative;\n    left: 100%;\n    margin-left: -132%;\n    max-height: 100%;\n}\n\n.frosmo-article__image::after{\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(to top, rgba(0, 0, 0, 0.65) 0%, rgba(0, 0, 0, 0) 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a6000000', endColorstr='#00000000',GradientType=0 );\n}\n\n.frosmo-article__content{\n    will-change: transform;\n    transition: -webkit-transform 0.5s ease 0.3s;\n    transition: transform 0.5s ease 0.3s;\n    transition: transform 0.5s ease 0.3s, -webkit-transform 0.5s ease 0.3s;\n    -webkit-transform: translate3d(0, 1.01em, 0);\n    transform: translate3d(0, 1.01em, 0);\n    \n    padding: 4% 5% 2%;\n    position: absolute;\n    bottom: 0;\n    overflow: hidden;\n    width: 100%;\n}\n\n.frosmo-article__title{\n    height: 3.25em;\n    line-height: 1.5em;\n    margin: 0;\n    padding-bottom: 0.25em;\n    font-family: \"Open Sans\", Arial, sans-serif;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    text-transform: uppercase;\n    transition: transform 0.8s;\n    letter-spacing: -1px;\n}\n.frosmo-article__cta{\n    color: #ffffff;\n    opacity: 0;\n    transition: all 0.4s ease 0.4s;\n    text-transform: uppercase;\n    line-height: 1.5em;\n    margin: 0;\n    padding-bottom: 0.25em;\n    font-family: \"Open Sans\", Arial, sans-serif;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n}\n.frosmo-article__link:hover .frosmo-article__image{\n    transform: scale(1.02);\n    transform: translateZ(0);\n        -webkit-backface-visibility: hidden;\n    -webkit-transform: translateZ(0) scale(1.0, 1.0);\n}\n.frosmo-article__link:hover .frosmo-article__content{\n    transform: translateY(-1px);\n}\n.frosmo-article__link:hover .frosmo-article__cta{\n    opacity:1;\n    transform: translateY(0px);\n}\n\n@media only screen and (min-width: 960px){\n    div.frosmo-article {\n        flex: 1 0 33.33%;\n        max-width: 33.33%;\n  }\n}\n\n@media only screen and (min-width: 640px) and (max-width:959px){\n    div.frosmo-article {\n        flex: 1 0 50%;\n        max-width: 50%;\n  }\n}\n\n@media only screen and (max-width: 639px){\n    div.frosmo-article {\n        flex: 1 0 100%;\n        max-width: 100%;\n  }\n}\n\n<\/style>"},"templatePreRenderers":{"(Elisa-1163) Split Hero  with PEGA API":"\/* global templateInstance *\/\r\nvar MODULE = '[ELISA-1163-PEGA]';\r\neasy.console.log(MODULE, 'pre-renderer');\r\n\r\n\/\/ check for test mode\r\nvar testmode = templateInstance.options.layoutTestMode;\r\n\r\n\/\/ read Cookie\r\nvar trackingEvent = easy.utils.find(window.dataLayer, function (item) {\r\n    return item.event === 'trackingId';\r\n});\r\neasy.console.log(MODULE, trackingEvent);\r\n\r\n\/\/ production mode\r\nif (trackingEvent && trackingEvent.trackingId && testmode !== 'on') {\r\n    \/\/ Pega query\r\n    easy.fetch.get('{{pega_get}}', {\r\n        params: { \/\/ query parameters\r\n            trackingId: trackingEvent.trackingId,\r\n            channel: 'ElisaWebsite'\r\n        },\r\n        headers: {\r\n            '{{headerkey}}': '{{headervalue}}'\r\n        }\r\n    })\r\n        .then(function (data) {\r\n            easy.console.log(MODULE + ': PEGA API GET: ', data);\r\n            if (data.containerList.length > 0 && data.containerList[0].promptList.length > 0) {\r\n                var prompt = data.containerList[0].promptList[0];\r\n                var propositionId = prompt.propositionId;\r\n\r\n                \/\/ Matching keyword (propositionId) with banner\r\n                if (templateInstance.options.bannerArray.length > 1 && propositionId) {\r\n                    var matchingBanner = easy.utils.find(templateInstance.options.bannerArray, function (banner) {\r\n                        return banner.keyword === propositionId;\r\n                    });\r\n\r\n                    if (matchingBanner) {\r\n                        easy.console.log(MODULE + 'matched keywords with bannerConfig:', JSON.stringify(matchingBanner));\r\n                        \/\/ add banner config\r\n                        Object.assign(templateInstance.options, matchingBanner);\r\n                        \/\/ add pega data (for POST request)\r\n                        var pegaData = {\r\n                            subjectId: prompt.subjectId,\r\n                            interactionId: prompt.interactionId,\r\n                            propositionId: prompt.propositionId\r\n                        };\r\n                        Object.assign(templateInstance.options, pegaData);\r\n                        \/\/ Return matched template\r\n                        easy.console.log(MODULE + ': matched banner:', templateInstance.options);\r\n                        templateInstance.render(templateInstance.options);\r\n                    } else {\r\n                        easy.console.log(MODULE, \"No banner with given keyword: \" + propositionId);\r\n                    }\r\n                } else {\r\n                    easy.console.log(MODULE, \"No banner configs or PEGA API return no propositionID\");\r\n                }\r\n            } else {\r\n                easy.console.log(MODULE, data.Status);\r\n            }\r\n        })\r\n        .catch(function (err) {\r\n            easy.console.error(MODULE, err);\r\n        });\r\n\r\n    \/\/ layout test mode        \r\n} else if (testmode === 'on') {\r\n    \/\/ get proposionid from template defaults\r\n    var propositionId = templateInstance.options.previewPropositionId;\r\n    if (templateInstance.options.bannerArray.length > 1 && propositionId) {\r\n        var matchingBanner = easy.utils.find(templateInstance.options.bannerArray, function (banner) {\r\n            return banner.keyword === propositionId;\r\n        });\r\n        if (matchingBanner) {\r\n            easy.console.log(MODULE + 'matched keywords with bannerConfig:', JSON.stringify(matchingBanner));\r\n            \/\/ add banner config\r\n            Object.assign(templateInstance.options, matchingBanner);\r\n            \/\/ Return matched template\r\n            easy.console.log(MODULE + ': matched banner:', templateInstance.options);\r\n            templateInstance.render(templateInstance.options);\r\n        } else {\r\n            easy.console.log(MODULE, \"No banner with given keyword: \" + propositionId);\r\n        }\r\n    }\r\n}","(Elisa-1199) Split Hero  with PEGA API - advanced tracking":"\/* global templateInstance *\/\r\nvar MODULE = '[ELISA-1163-PEGA]';\r\n\r\neasy.console.log(MODULE, 'pre-renderer');\r\n\r\n\/\/ check for test mode\r\nvar testmode = templateInstance.options.layoutTestMode;\r\nvar purl = templateInstance.options.pega_get;\r\nvar hkey = templateInstance.options.headerkey;\r\nvar hvalue = templateInstance.options.headervalue;\r\n\r\nvar authTypeLoggedIn;\r\nvar trackingEvent;\r\n\r\nfunction checkTrackingId() {\r\n    return easy.utils.find(window.dataLayer, function (item) {\r\n        return item.event === 'trackingId';\r\n    });\r\n}\r\n\r\nfunction checkAuth() {\r\n    return easy.utils.find(window.dataLayer, function (item) {\r\n        return item.authType === 'LOGGED_IN' || item.authType === 'ELISA_ID_COOKIE';\r\n    });\r\n}\r\n\r\n\/\/ LAYOUT TEST MODE ON\r\nif (testmode === 'on') {\r\n    \/\/ get proposionid from template defaults\r\n    var propositionId = templateInstance.options.previewPropositionId;\r\n    if (templateInstance.options.bannerArray.length > 1 && propositionId) {\r\n        var matchingBanner = easy.utils.find(templateInstance.options.bannerArray, function (banner) {\r\n            return banner.keyword === propositionId;\r\n        });\r\n        if (matchingBanner) {\r\n            easy.console.log(MODULE + 'matched keywords with bannerConfig:', JSON.stringify(matchingBanner));\r\n            \/\/ add banner config\r\n            Object.assign(templateInstance.options, matchingBanner);\r\n            \/\/ Return matched template\r\n            easy.console.log(MODULE + ': matched banner:', templateInstance.options);\r\n            templateInstance.render(templateInstance.options);\r\n        } else {\r\n            easy.console.log(MODULE, \"No banner with given keyword: \" + propositionId);\r\n        }\r\n    }\r\n\r\n    \/\/ NORMAL OPERATION (LAYOUT TESTMODE OFF)\r\n} else {\r\n    easy.utils.waitFor(500, 20000, function () {\r\n        authTypeLoggedIn = checkAuth();\r\n        trackingEvent = checkTrackingId();\r\n        easy.console.log(MODULE, 'authType:', authTypeLoggedIn, 'trackingEvent:', trackingEvent);\r\n\r\n        if (!authTypeLoggedIn || !trackingEvent || !trackingEvent.trackingId) {\r\n            return false;\r\n        }\r\n        return true;\r\n\r\n        \/\/ ALL DETAILS FOUND DO API QUERY\r\n    }).then(function () {\r\n        \/\/ PEGA API query\r\n\r\n        \/\/ build headers\r\n        var headers = {};\r\n        headers[hkey] = hvalue;\r\n\r\n        easy.fetch.get(purl, {\r\n            params: { \/\/ query parameters\r\n                trackingId: trackingEvent.trackingId,\r\n                channel: 'ElisaWebsite'\r\n            },\r\n            headers: headers\r\n        })\r\n            .then(function (data) {\r\n                easy.console.log(MODULE + ': PEGA API GET: ', data);\r\n                if (data.containerList.length > 0 && data.containerList[0].promptList.length > 0) {\r\n                    var prompt = data.containerList[0].promptList[0];\r\n                    var propositionId = prompt.propositionId;\r\n\r\n                    \/\/ Matching keyword (propositionId) with banner\r\n                    if (templateInstance.options.bannerArray.length > 1 && propositionId) {\r\n                        var matchingBanner = easy.utils.find(templateInstance.options.bannerArray, function (banner) {\r\n                            return banner.keyword === propositionId;\r\n                        });\r\n\r\n                        if (matchingBanner) {\r\n                            easy.console.log(MODULE + 'matched keywords with bannerConfig:', JSON.stringify(matchingBanner));\r\n                            \/\/ add banner config\r\n                            Object.assign(templateInstance.options, matchingBanner);\r\n                            \/\/ add pega data (for POST request)\r\n                            var pegaData = {\r\n                                subjectId: prompt.subjectId,\r\n                                interactionId: prompt.interactionId,\r\n                                propositionId: prompt.propositionId\r\n                            };\r\n                            Object.assign(templateInstance.options, pegaData);\r\n                            \/\/ Return matched template\r\n                            easy.console.log(MODULE + ': matched banner:', templateInstance.options);\r\n                            templateInstance.render(templateInstance.options);\r\n                        } else {\r\n                            easy.console.log(MODULE, \"No banner with given keyword: \" + propositionId);\r\n                        }\r\n                    } else {\r\n                        easy.console.log(MODULE, \"No banner configs or PEGA API return no propositionID\");\r\n                    }\r\n                } else {\r\n                    easy.console.log(MODULE, data.Status);\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                easy.console.error(MODULE, err);\r\n            });\r\n    });\r\n}","(ELISA-1199) Split Hero  with PEGA API - advanced tracking - 2022 version":"\/* global templateInstance *\/\r\nvar MODULE = '[ELISA-1163-PEGA]';\r\n\r\neasy.console.log(MODULE, 'pre-renderer');\r\n\r\n\/\/ check for test mode\r\nvar testmode = templateInstance.options.layoutTestMode;\r\nvar purl = templateInstance.options.pega_get;\r\nvar hkey = templateInstance.options.headerkey;\r\nvar hvalue = templateInstance.options.headervalue;\r\n\r\nvar authTypeLoggedIn;\r\nvar trackingEvent;\r\n\r\nfunction checkTrackingId() {\r\n    return easy.utils.find(window.dataLayer, function (item) {\r\n        return item.event === 'trackingId';\r\n    });\r\n}\r\n\r\nfunction checkAuth() {\r\n    return easy.utils.find(window.dataLayer, function (item) {\r\n        return item.authType === 'LOGGED_IN' || item.authType === 'ELISA_ID_COOKIE';\r\n    });\r\n}\r\n\r\n\/\/ LAYOUT TEST MODE ON\r\nif (testmode === 'on') {\r\n    \/\/ get proposionid from template defaults\r\n    var propositionId = templateInstance.options.previewPropositionId;\r\n    if (templateInstance.options.bannerArray.length > 1 && propositionId) {\r\n        var matchingBanner = easy.utils.find(templateInstance.options.bannerArray, function (banner) {\r\n            return banner.keyword === propositionId;\r\n        });\r\n        if (matchingBanner) {\r\n            easy.console.log(MODULE + 'matched keywords with bannerConfig:', JSON.stringify(matchingBanner));\r\n            \/\/ add banner config\r\n            Object.assign(templateInstance.options, matchingBanner);\r\n            \/\/ Return matched template\r\n            easy.console.log(MODULE + ': matched banner:', templateInstance.options);\r\n            templateInstance.render(templateInstance.options);\r\n        } else {\r\n            easy.console.log(MODULE, \"No banner with given keyword: \" + propositionId);\r\n        }\r\n    }\r\n\r\n    \/\/ NORMAL OPERATION (LAYOUT TESTMODE OFF)\r\n} else {\r\n    easy.utils.waitFor(500, 20000, function () {\r\n        authTypeLoggedIn = checkAuth();\r\n        trackingEvent = checkTrackingId();\r\n        easy.console.log(MODULE, 'authType:', authTypeLoggedIn, 'trackingEvent:', trackingEvent);\r\n\r\n        if (!authTypeLoggedIn || !trackingEvent || !trackingEvent.trackingId) {\r\n            return false;\r\n        }\r\n        return true;\r\n\r\n        \/\/ ALL DETAILS FOUND DO API QUERY\r\n    }).then(function () {\r\n        \/\/ PEGA API query\r\n\r\n        \/\/ build headers\r\n        var headers = {};\r\n        headers[hkey] = hvalue;\r\n\r\n        easy.fetch.get(purl, {\r\n            params: { \/\/ query parameters\r\n                trackingId: trackingEvent.trackingId,\r\n                channel: 'ElisaWebsite'\r\n            },\r\n            headers: headers\r\n        })\r\n            .then(function (data) {\r\n                easy.console.log(MODULE + ': PEGA API GET: ', data);\r\n                if (data.containerList.length > 0 && data.containerList[0].promptList.length > 0) {\r\n                    var prompt = data.containerList[0].promptList[0];\r\n                    var propositionId = prompt.propositionId;\r\n\r\n                    \/\/ Matching keyword (propositionId) with banner\r\n                    if (templateInstance.options.bannerArray.length > 1 && propositionId) {\r\n                        var matchingBanner = easy.utils.find(templateInstance.options.bannerArray, function (banner) {\r\n                            return banner.keyword === propositionId;\r\n                        });\r\n\r\n                        if (matchingBanner) {\r\n                            easy.console.log(MODULE + 'matched keywords with bannerConfig:', JSON.stringify(matchingBanner));\r\n                            \/\/ add banner config\r\n                            Object.assign(templateInstance.options, matchingBanner);\r\n                            \/\/ add pega data (for POST request)\r\n                            var pegaData = {\r\n                                subjectId: prompt.subjectId,\r\n                                interactionId: prompt.interactionId,\r\n                                propositionId: prompt.propositionId\r\n                            };\r\n                            Object.assign(templateInstance.options, pegaData);\r\n                            \/\/ Return matched template\r\n                            easy.console.log(MODULE + ': matched banner:', templateInstance.options);\r\n                            templateInstance.render(templateInstance.options);\r\n                        } else {\r\n                            easy.console.log(MODULE, \"No banner with given keyword: \" + propositionId);\r\n                        }\r\n                    } else {\r\n                        easy.console.log(MODULE, \"No banner configs or PEGA API return no propositionID\");\r\n                    }\r\n                } else {\r\n                    easy.console.log(MODULE, data.Status);\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                easy.console.error(MODULE, err);\r\n            });\r\n    });\r\n}","(Elisa-1258) MLK offer - Variant 1":"\/* global templateInstance *\/\r\nvar MODULE = '[ELISA-1258-MLK]';\r\neasy.console.log(MODULE, 'pre-renderer');\r\n\r\n\/\/ check for test mode\r\nvar testmode = templateInstance.options.layoutTestMode;\r\n\r\n\/\/ get authId\r\nvar authEvent = easy.utils.find(window.dataLayer, function (item) {\r\n    return item.event === 'userAuth';\r\n});\r\neasy.console.log(MODULE, authEvent);\r\n\r\n\/\/ production mode\r\nif (authEvent && authEvent.authId && !testmode) {\r\n    \/\/ \r\n    easy.fetch.get(templateInstance.options.datalake_get + authEvent.authId)\r\n        .then(function (data) {\r\n            easy.console.log(MODULE + ': DATALAKE API GET: ', data);\r\n            if (data.offer_mlk) {\r\n                easy.console.log(MODULE + ': offer available:', templateInstance.options);\r\n                templateInstance.render();\r\n            } else {\r\n                easy.console.log(MODULE, \"No offers available\");\r\n            }\r\n        })\r\n        .catch(function (err) {\r\n            easy.console.error(MODULE, err);\r\n        });\r\n\r\n    \/\/ layout test mode        \r\n} else if (testmode) {\r\n    easy.console.log(MODULE + ': layout testmode is ON always displaying content');\r\n    templateInstance.render();\r\n}","(Elisa-1258) MLK offer - Variant 2":"\/* global templateInstance *\/\r\nvar MODULE = '[ELISA-1258-MLK]';\r\neasy.console.log(MODULE, 'pre-renderer');\r\n\r\n\/\/ check for test mode\r\nvar testmode = templateInstance.options.layoutTestMode;\r\n\r\n\/\/ get authId\r\nvar authEvent = easy.utils.find(window.dataLayer, function (item) {\r\n    return item.event === 'userAuth';\r\n});\r\neasy.console.log(MODULE, authEvent);\r\n\r\n\/\/ production mode\r\nif (authEvent && authEvent.authId && !testmode) {\r\n    \/\/ \r\n    easy.fetch.get(templateInstance.options.datalake_get + authEvent.authId)\r\n        .then(function (data) {\r\n            easy.console.log(MODULE + ': DATALAKE API GET: ', data);\r\n            if (data.offer_mlk) {\r\n                easy.console.log(MODULE + ': offer available:', templateInstance.options);\r\n                templateInstance.render();\r\n            } else {\r\n                easy.console.log(MODULE, \"No offers available\");\r\n            }\r\n        })\r\n        .catch(function (err) {\r\n            easy.console.error(MODULE, err);\r\n        });\r\n\r\n    \/\/ layout test mode        \r\n} else if (testmode) {\r\n    easy.console.log(MODULE + ': layout testmode is ON always displaying content');\r\n    templateInstance.render();\r\n}","Elisa-grid-banner":null,"Feedback Tooltip":null,"Hero-banner-1":null,"Hero-banner-1 [Boxy CTA]":null,"Hero-banner-split-2":null,"Hero-banner-split-2  - 2022 version":null,"Hero-banner-split-2 - BLUE CTA":null,"Hero-banner-split-2 - BLUE CTA  - 2022 version":null,"Hero-banner-split-2 - Orange CTA":null,"Hero-banner-split-2 - Orange CTA  - 2022 version":null,"Hy\u00f6tylinkit [split-1]":null,"most viewed EXPORT":null,"puk-koodi ohje page Feedback Tooltip":null,"uutisetRecommendation":null,"[OLD] Hero-banner-1-align-top":null,"[OLD] Quick bottom links":null,"[OLD] Viihde products on ideat pages":null,"[RECO] B2B_5g_recommendations_template":null},"quickMessages":[{"id":53877,"startTime":1514468654000,"endTime":0,"decils":[6,7,8,9,10,1,2,3,4,5],"segmentRules":[],"priority":2,"gaTracking":false,"positions":[14474],"revisionsLock":true,"states":{"_device":["desktop","mobile","tablet"]},"revisions":[{"id":1,"type":"html","title":"","content":"<div class=\"fr-container\">\n    <div id=\"fr-split-1\"><\/div>\n    <div id=\"fr-split-2\"><\/div>\n<\/div>\n\n<style>\n    .parallax-mirror {\n        display: none;\n    }\n    \n    .fr-container {\n        position: relative;\n        width: 100%;\n        height: calc(100vw * 0.33);\n        margin-bottom: 50px;\n        display: block;\n        background-color: #fff;\n    }\n    \n    #fr-split-1 {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        width: 66.67%;\n        height: 100%;\n        background-color: #fff;\n    }\n    \n    #fr-split-2 {\n        position: absolute;\n        width: 33.33%;\n        height: 100%;\n        background-color: #fff;\n        right: 0;\n    }\n    \n    @media only screen and (max-width: 967px) {\n        #fr-split-2 {\n            display: none;\n        }\n        #fr-split-1 {\n            width: 100%;\n        }\n    }\n<\/style>\n<script>\n    jQuery('article.single-post').hide();\n    \/\/ jQuery('div.parallax-mirror').remove();\n    jQuery('.controls .return-home').hide();\n<\/script>"}]},{"id":55371,"startTime":1522141161000,"endTime":0,"decils":[1,2,3,4,5,6,7,8,9,10],"segmentRules":[],"priority":4,"gaTracking":false,"positions":[8288],"revisionsLock":true,"states":{},"revisions":[{"id":1,"type":"html","title":"","content":"<script>\nvar EXPIRY_DAYS = 7;\n\nvar day_in_ms = 86400000;\nvar expiry_ms = EXPIRY_DAYS * day_in_ms;\n\nfunction setStates() {\n    var timestampNow = Date.now();\n    var cart = easy.context.site.cart;\n    var cartTimestamp = cart && cart.timestamp;\n    var cartAge = cartTimestamp && (timestampNow - cartTimestamp);\n    \n    window.dataLayer = window.dataLayer || [];\n    \n    \/\/ context.site.cart\n    if (!cartTimestamp || cartAge >= expiry_ms) {\n        easy.context.site.cart = undefined;\n        easy.context.save();\n    }\n    window.dataLayer.push({\n        frosmoEvent: 'hasCart',\n        frosmoValue: easy.context.site.cart ? 'true' : 'false'\n    });\n\n\n    \/\/ context.site.lastViewedDevices\n    if (easy.context.site.lastViewedDevices) {\n        easy.context.site.lastViewedDevices = easy.context.site.lastViewedDevices.filter(function (item) {\n            return item.timestamp && (timestampNow - item.timestamp) < expiry_ms;\n        });\n        easy.context.save();\n        easy.events.trigger(frosmo.site.EVENT_LAST_VIEWED_DEVICE_ADDED);\n    }\n    window.dataLayer.push({\n        frosmoEvent: 'hasViewedDevices',\n        frosmoValue: easy.context.site.lastViewedDevices && easy.context.site.lastViewedDevices.length ? 'true' : 'false'\n    });\n\n\n    \/\/ context.site.lastViewedItems\n    if (easy.context.site.lastViewedItems) {\n        easy.context.site.lastViewedItems = easy.context.site.lastViewedItems.filter(function (item) {\n            return item.timestamp && (timestampNow - item.timestamp) < expiry_ms;\n        });\n        easy.context.save();\n        easy.events.trigger(frosmo.site.EVENT_LAST_VIEWED_ITEM_ADDED);\n    }\n\n    window.dataLayer.push({\n        frosmoEvent: 'hasViewedItems',\n        frosmoValue: easy.context.site.lastViewedItems && easy.context.site.lastViewedItems.length ? 'true' : 'false'\n    });\n\n\n    \/\/ context.site.hasPurchasedDevice\n    \/\/ Please check the ticket ELISA-1044\n    if (easy.context.site.hasPurchasedDevice) {\n        var EXPIRY_DAYS_hasPurchasedDevice = 30;\n        var isValid = (timestampNow - easy.context.site.hasPurchasedDevice.timestamp) < (day_in_ms * EXPIRY_DAYS_hasPurchasedDevice);\n\n        if (!isValid) {\n            delete easy.context.site.hasPurchasedDevice;\n            easy.context.save();\n        }\n    }\n\n    window.dataLayer.push({\n        frosmoEvent: 'hasPurchasedDevice',\n        frosmoValue: easy.context.site.hasPurchasedDevice ? 'true' : 'false'\n    });\n}\n\n\/\/ easy.events.once(easy.EVENT_INIT_CONTEXT, easy.addExceptionHandling(setStates));\neasy.events.once(easy.EVENT_INIT_CONTEXT, easy.guard(setStates));\n<\/script>","template":{"active":false,"defaults":"","variable":""}}]},{"id":60346,"startTime":1543172400000,"endTime":0,"decils":[1,2,3,4,5,6,7,8,9,10],"segmentRules":[],"priority":4,"gaTracking":false,"positions":[17221],"revisionsLock":true,"states":{},"revisions":[{"id":1,"type":"html","title":"","content":"<div class=\"frosmo-hero-1-reco elisanet\">\n    \n<\/div>"}]},{"id":84957,"startTime":1646858575000,"endTime":0,"decils":[1,2,3,4,5,6,7,8,9,10],"segmentRules":[],"priority":2,"gaTracking":false,"positions":[28933],"revisionsLock":true,"states":{"_device":["mobile","tablet"]},"revisions":[{"id":1,"type":"html","title":"","content":"<script>\n    if (window.innerWidth < 960) {\n        var domCheck = easy.domElements.selector('#frosmo-grid-banner')[0];\n        if (!domCheck) {\n            var banner = '<div id=\"frosmo-grid-banner\" class=\"fr-hidden ea-fgrid__item ea-fgrid__item--laptop-4 ea-fgrid__item--tablet-6 ea-fgrid__item--phone-6 ea-fgrid__item--ratio-1-1\"><\/div>';\n            easy.domElements.waitFor({\n                selector: '#elisa-banner-1',\n                timeout: 20000\n            }).then(function(){\n                var sibling = easy.domElements.selector('#elisa-banner-1')[0];\n                sibling.insertAdjacentHTML(\"beforebegin\", banner);\n            });\n        }\n    }\n<\/script>\n<style>\n    #frosmo-grid-banner.fr-hidden {\n        display: none !important;\n    }\n<\/style>","template":{"active":false,"defaults":"","variable":""}}]}],"triggers":[{"id":529,"rules":["and",["begins",["location","path"],"\/"],["contains",["cookie","frosmo_keywords"],"tggp_2776"],["not",["eq?",["location","query","wm"],"logout"]],["not",["contains",["cookie","frosmo_keywords"],"tggp_2758"]],["eq?",["js","(function () {\n   var hr = (new Date()).getHours();\n   return String(hr > 6 && hr < 18);\n}());"],"true"],["eq?",["js","(function () {\n    \/\/ check if today's date is a weekday\n    var day = (new Date()).getDay();\n    \/\/ 0=sun, 1=mon, 2=tue, 3=wed, 4=thu, 5=fri, 6=sat\n    return String(day >= 1 && day <= 5);\n})();"],"true"]],"on_event":{"type":"domReady"},"alias":null},{"id":580,"rules":["and",["regex?",["location","href"],".*"]],"on_event":{"type":"scriptLoad"},"alias":null},{"id":622,"rules":["and",["not",["contains",["cookie","frosmo_keywords"],"tggp_2776"]]],"on_event":{"type":"scriptLoad"},"alias":null},{"id":905,"rules":["and",["eq?",["js","(function () {\n    var articleMeta = document.querySelectorAll('meta[property=\"article:section\"]');\n    if (articleMeta && articleMeta.length) {\n\t\treturn articleMeta[0].getAttribute('content');\n\t}\n})();"],"Vinkit"],["contains",["location","host"],"yksityisille.hub.elisa.fi"]],"on_event":{"type":"domReady"},"alias":null},{"id":906,"rules":["and",["eq?",["js","(function () {\n    var articleMeta = document.querySelectorAll('meta[property=\"article:section\"]');\n    if (articleMeta && articleMeta.length) {\n\t\treturn articleMeta[0].getAttribute('content');\n\t}\n})();"],"Omaguru"],["contains",["location","host"],"yksityisille.hub.elisa.fi"]],"on_event":{"type":"domReady"},"alias":null},{"id":907,"rules":["and",["eq?",["js","(function () {\n    var articleMeta = document.querySelectorAll('meta[property=\"article:section\"]');\n    if (articleMeta && articleMeta.length) {\n\t\treturn articleMeta[0].getAttribute('content');\n\t}\n})();"],"Ilmi\u00f6t"],["contains",["location","host"],"yksityisille.hub.elisa.fi"]],"on_event":{"type":"domReady"},"alias":null},{"id":908,"rules":["and",["eq?",["js","(function () {\n    var articleMeta = document.querySelectorAll('meta[property=\"article:section\"]');\n    if (articleMeta && articleMeta.length) {\n\t\treturn articleMeta[0].getAttribute('content');\n\t}\n})();"],"Puheenaiheet"],["contains",["location","host"],"yksityisille.hub.elisa.fi"]],"on_event":{"type":"domReady"},"alias":null},{"id":909,"rules":["and",["eq?",["js","(function () {\n    var articleMeta = document.querySelectorAll('meta[property=\"article:section\"]');\n    if (articleMeta && articleMeta.length) {\n\t\treturn articleMeta[0].getAttribute('content');\n\t}\n})();"],"Ty\u00f6"],["contains",["location","host"],"yksityisille.hub.elisa.fi"]],"on_event":{"type":"domReady"},"alias":null},{"id":910,"rules":["and",["eq?",["js","(function () {\n    var articleMeta = document.querySelectorAll('meta[property=\"article:section\"]');\n    if (articleMeta && articleMeta.length) {\n\t\treturn articleMeta[0].getAttribute('content');\n\t}\n})();"],"Perhe"],["contains",["location","host"],"yksityisille.hub.elisa.fi"]],"on_event":{"type":"domReady"},"alias":null},{"id":1110,"rules":["and",["eq?",["js","(function () {\n    var date = new Date();\n    var hour = date.getHours();\n\tvar day = date.getDay();\n\tvar isWeekday = day > 0 && day < 6;\n\t\n    return String((hour > 17 && isWeekday) || !isWeekday);\n}());"],"true"],["not",["contains",["cookie","frosmo_keywords"],"tggp_4145"]]],"on_event":{"type":"easy.ready"},"alias":null},{"id":1391,"rules":["and",["contains",["domelem","body","class"],"single-post"],["not",["contains",["location","href"],"hyotylinkit"]]],"on_event":{"type":"domReady"},"alias":null},{"id":1425,"rules":["and",["or",["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=\u00e4lypuhelin]');\nreturn tag.length;\n}());"],"1"],["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=K\u00e4nnykk\u00e4]');\nreturn tag.length;\n}());"],"1"]]],"on_event":{"type":"domReady"},"alias":null},{"id":1576,"rules":["and",["eq?",["js","(function getMobileOperatingSystem() {\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n\n      \/\/ Windows Phone must come first because its UA also contains \"Android\"\n    if (\/windows phone\/i.test(userAgent)) {\n        return \"Windows Phone\";\n    }\n\n    if (\/android\/i.test(userAgent)) {\n        return \"Android\";\n    }\n\n    \/\/ iOS detection from: http:\/\/stackoverflow.com\/a\/9039885\/177710\n    if (\/iPad|iPhone|iPod\/.test(userAgent) && !window.MSStream) {\n        return \"iOS\";\n    }\n\n    return \"unknown\";\n}());"],"iOS"]],"on_event":{"type":"domReady"},"alias":null},{"id":1577,"rules":["and",["eq?",["js","(function getMobileOperatingSystem() {\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n\n      \/\/ Windows Phone must come first because its UA also contains \"Android\"\n    if (\/windows phone\/i.test(userAgent)) {\n        return \"Windows Phone\";\n    }\n\n    if (\/android\/i.test(userAgent)) {\n        return \"Android\";\n    }\n\n    \/\/ iOS detection from: http:\/\/stackoverflow.com\/a\/9039885\/177710\n    if (\/iPad|iPhone|iPod\/.test(userAgent) && !window.MSStream) {\n        return \"iOS\";\n    }\n\n    return \"unknown\";\n}());"],"Android"]],"on_event":{"type":"domReady"},"alias":null},{"id":1598,"rules":["and",["or",["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=\"Tietokoneen k\u00e4ytt\u00f6\"]');\nreturn tag.length;\n}());"],"1"],["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=\"tietokone\"][property=\"article:tag\"]');\nreturn tag.length;\n}());"],"1"]],["and",["not",["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=\"Windows\"][property=\"article:tag\"]');\nreturn tag.length;\n}());"],"1"]],["not",["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=\"K\u00e4nnykk\u00e4\"]');\nreturn tag.length;\n}());"],"1"]],["not",["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=\"\u00e4lypuhelin\"]');\nreturn tag.length;\n}());"],"1"]],["not",["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=\"\u00c4lypuhelin\"]');\nreturn tag.length;\n}());"],"1"]]]],"on_event":{"type":"domReady"},"alias":null},{"id":1640,"rules":["and",["or",["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=\"Windows\"][property=\"article:tag\"]');\nreturn tag.length;\n}());"],"1"],["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=\"Windows 10\"][property=\"article:tag\"]');\nreturn tag.length;\n}());"],"1"]],["and",["not",["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=\"K\u00e4nnykk\u00e4\"]');\nreturn tag.length;\n}());"],"1"]],["not",["eq?",["js","(function () {\nvar tag = frosmo.easy.domElements.selector('meta[content=\"K\u00e4nnykk\u00e4\"]');\nreturn tag.length;\n}());"],"1"]]]],"on_event":{"type":"domReady"},"alias":null},{"id":1762,"rules":["and",["or",["eq?",["js","(function () {\n\tvar displayCount = frosmo.easy.store.get('53291_displayCount') || 0;\n\treturn displayCount;\n})();"],"2"],["eq?",["js","(function () {\n\tvar displayCount = frosmo.easy.store.get('54741_displayCount') || 0;\n\treturn displayCount;\n})();"],"2"]]],"on_event":{"type":"domReady"},"alias":null},{"id":1763,"rules":["and",["eq?",["js","(function () {\n\tvar displayCount = frosmo.easy.store.get('53292_displayCount') || 0;\n\treturn displayCount;\n})();"],"2"]],"on_event":{"type":"domReady"},"alias":null},{"id":1771,"rules":["and",["eq?",["var","id"],"52392"]],"on_event":{"type":"easyEvent","eventName":"message.showMessage"},"alias":null},{"id":1772,"rules":["and",["eq?",["var","id"],"52391"]],"on_event":{"type":"easyEvent","eventName":"message.showMessage"},"alias":null},{"id":1881,"rules":["and",["eq?",["js","(function () {\n\tvar tags = frosmo.easy.domElements.selector('meta[property=\"article:tag\"]');\n\tvar tagsExcluded = frosmo.easy.utils.filter(tags, function(tag) {\n        return tag.content === '\u00c4\u00e4nikirja';\n    });\n\n\treturn tagsExcluded.length;\n}());"],"1"]],"on_event":{"type":"domReady"},"alias":null},{"id":1882,"rules":["and",[">",["js","(function () {\n\tvar tags = frosmo.easy.domElements.selector('meta[property=\"article:tag\"]');\n\tvar tagsExcluded = frosmo.easy.utils.filter(tags, function(tag) {\n        return tag.content === '\u00c4\u00e4nikirja';\n    });\n\t\n\tif (tagsExcluded.length) {\n    \treturn 0;\n\t}\n\t\n\tvar check = frosmo.easy.utils.filter(tags, function(tag) {\n        return tag.content === 'E-kirja' || tag.content === 'lukeminen' || \ntag.content === 'e-kirjat' || \ntag.content === 'E-kirjat' || \ntag.content === 'e-kirja' || tag.content === 'Elisa Kirja';\n    });\n\n\n    return check.length;\n\n}());"],"0"]],"on_event":{"type":"domReady"},"alias":null},{"id":2080,"rules":[],"on_event":{"type":"easyEvent","eventName":"frosmo_datalayer_item_overriden"},"alias":null},{"id":2100,"rules":["and",[">",["js","(function () {\n\tvar tags = frosmo.easy.domElements.selector('meta[property=\"article:tag\"]');\n\tvar tagsExcluded = frosmo.easy.utils.filter(tags, function(tag) {\n        return tag.content === '\u00c4\u00e4nikirja';\n    });\n\t\n\tif (tagsExcluded.length) {\n    \treturn 0;\n\t}\n\t\n\tvar check = frosmo.easy.utils.filter(tags, function(tag) {\n        return tag.content === 'leffat' || tag.content === 'vuokraamo' || \ntag.content === 'Sarjat' || \ntag.content === 'Leffat' || \ntag.content === 'Elokuvat' || tag.content === 'Elisa viihde';\n    });\n\n\n    return check.length;\n\n}());"],"0"]],"on_event":{"type":"domReady"},"alias":null},{"id":2156,"rules":["and",[">",["js","(function () {\n\tvar tags = frosmo.easy.domElements.selector('meta[property=\"article:tag\"]');\n\tvar tagsExcluded = frosmo.easy.utils.filter(tags, function(tag) {\n        return tag.content === '\u00c4\u00e4nikirja';\n    });\n\t\n\tif (tagsExcluded.length) {\n    \treturn 0;\n\t}\n\t\n\tvar check = frosmo.easy.utils.filter(tags, function(tag) {\n        return tag.content === '5G' || tag.content === 'mobiiliverkko' || \ntag.content === '5G-verkko' || \ntag.content === 'Mobiililaajakaista' || tag.content === '5G Ready';\n    });\n\n\n    return check.length;\n\n}());"],"0"]],"on_event":{"type":"domReady"},"alias":null},{"id":2158,"rules":["and",["not",["contains",["pluck",["var","element"],["array","className"]],"hero-toggle"]]],"on_event":{"type":"domWait","selector":"#elisa-banner-hero-1.frosmo_inline a.frosmo"},"alias":"FCP_TRIGGER_ALIAS_hero_toggle_not_exist"},{"id":2208,"rules":["and",["<",["js","function _daysDifference(timestamp2, timestamp1) {\n        var difference = timestamp2 - timestamp1;\n        var daysDifference = Math.floor(difference\/1000\/60\/60\/24);\n    \n        return String(daysDifference);\n    }\nvar e  =  Date.now();\n_daysDifference(e,frosmo.easy.context.site.kuituAlue.timeStamp);"],"14"]],"on_event":{"type":"jsvarWait","js_var":"frosmo.easy.context.site.kuituAlue.url"},"alias":"dynamicUrl"},{"id":2211,"rules":["and",["eq?",["var","id"],"56756"]],"on_event":{"type":"easyEvent","eventName":"message.showMessage"},"alias":""},{"id":2294,"rules":["and",["or",["eq?",["var","id"],"57502"],["eq?",["var","id"],"57707"]]],"on_event":{"type":"easyEvent","eventName":"message.clickMessage"},"alias":null},{"id":2552,"rules":["and",["eq?",["var","id"],"60347"]],"on_event":{"type":"easyEvent","eventName":"message.clickMessage"},"alias":null},{"id":2583,"rules":["and",["eq?",["js","(function () {\n\tvar element = frosmo.easy.domElements.selector(\".react-feature-container .selected input\")[0];\n\treturn element ? element.value : '';\n})();"],"fi"]],"on_event":{"type":"easy.ready"},"alias":null},{"id":2694,"rules":["and",["eq?",["var","id"],"61593"]],"on_event":{"type":"easyEvent","eventName":"message.showMessage"},"alias":null},{"id":2772,"rules":["and",["regex?",["var","authType"],"LOGGED_IN"]],"on_event":{"type":"easyEvent","eventName":"dataLayer"},"alias":"LOGIN_OMAELISA_SUCCESS"},{"id":2894,"rules":["and",["begins",["location","href"],"https:\/\/elisa.fi\/viihde\/"]],"on_event":{"type":"domEvent","eventName":"click","selector":"[data-id=\"WITH_BROADBAND\"]"},"alias":null},{"id":2895,"rules":["and",["begins",["location","href"],"https:\/\/elisa.fi\/viihde\/"]],"on_event":{"type":"domEvent","eventName":"click","selector":"[data-id=\"APPLICATION_AITIO\"]"},"alias":null},{"id":2896,"rules":["and",["begins",["location","href"],"https:\/\/elisa.fi\/viihde\/"]],"on_event":{"type":"domEvent","eventName":"click","selector":"[data-id=\"WITHOUT_BROADBAND\"]"},"alias":null},{"id":3129,"rules":[],"on_event":{"type":"domWait","selector":"#front-page-quick-links"},"alias":null},{"id":3130,"rules":["and",["eq?",["js_var","window.popup"],"1"]],"on_event":{"type":"jsvarWait","js_var":"window.popup"},"alias":""},{"id":3209,"rules":[],"on_event":{"type":"domWait","selector":".frosmo-hero-1-reco","timeout":4},"alias":null},{"id":3344,"rules":["or",[">",["js","(function () {\n\treturn document.cookie.search('lastViewedYaDevice');\n} \n());"],"0"]],"on_event":{"type":"domReady"},"alias":"Has lastViewedYaDevice in cookie"},{"id":3382,"rules":["and",["and",["eq?",["var","event"],"Experiments"],["eq?",["var","ipa-event-action"],"Customer email marketing permission"],["eq?",["var","ipa-event-label"],"DENIED"]]],"on_event":{"type":"dataLayer"},"alias":null},{"id":3385,"rules":["and",["and",["eq?",["var","event"],"Experiments"],["eq?",["var","ipa-event-action"],"Customer email marketing permission"],["eq?",["var","ipa-event-label"],"ALLOWED_CONTRACT"]]],"on_event":{"type":"dataLayer"},"alias":null},{"id":3395,"rules":["and",["and",["eq?",["var","event"],"Experiments"],["eq?",["var","ipa-event-action"],"Customer email marketing permission"],["eq?",["var","ipa-event-label"],"UNKNOWN"]]],"on_event":{"type":"dataLayer"},"alias":null},{"id":3399,"rules":["and",[">",["js","(function () {\n\treturn document.cookie.search('lastAddedToCartYaDevice');\n} \n());"],"0"]],"on_event":{"type":"domReady"},"alias":"Last added to cart YA device in cookie"},{"id":3400,"rules":["and",["<=",["js","(function () {\n\treturn document.cookie.search('lastAddedToCartYaDevice');\n} \n());"],"0"]],"on_event":{"type":"domReady"},"alias":"Last added to cart YA device does not exist"},{"id":3402,"rules":["or",["<=",["js","(function () {\n\treturn document.cookie.search('lastViewedYaDevice');\n} \n());"],"0"]],"on_event":{"type":"domReady"},"alias":"Has lastViewedYaDevice in cookie"},{"id":3403,"rules":["and",["and",["eq?",["var","event"],"Experiments"],["eq?",["var","ipa-event-action"],"Customer sms marketing permission"],["eq?",["var","ipa-event-label"],"DENIED"]]],"on_event":{"type":"dataLayer"},"alias":null},{"id":3404,"rules":["and",["and",["eq?",["var","event"],"Experiments"],["eq?",["var","ipa-event-action"],"Customer sms marketing permission"],["eq?",["var","ipa-event-label"],"UNKNOWN"]]],"on_event":{"type":"dataLayer"},"alias":null},{"id":3405,"rules":["and",["and",["eq?",["var","event"],"Experiments"],["eq?",["var","ipa-event-action"],"Customer sms marketing permission"],["eq?",["var","ipa-event-label"],"ALLOWED_CONTRACT"]]],"on_event":{"type":"dataLayer"},"alias":null},{"id":3558,"rules":["and",["regex?",["var","authId"],".+","i"],["eq?",["location","href"],"https:\/\/elisa.fi\/"]],"on_event":{"type":"easyEvent","eventName":"dataLayer"},"alias":"AUTHID_EXIST_IN_DATALAYER"},{"id":3559,"rules":["and",["eq?",["js","(function() {\n  easy = frosmo.easy;\n  var e = easy.utils.find(dataLayer, function(event) {\n    return event.event === \"userAuth\" && event.authId;\n  });\n  if (!e.authId) {\n    return \"false\";\n  }\n\n  \/\/ check that we are in correct domain and url before making any queries\n  var url = easy.utils.parseUri(document.location.href);\n  if (url.path !== '\/' || url.host !== 'elisa.fi'){\n\treturn 'false'\n  }\n\n  return easy.fetch\n    .get(\n      \"https:\/\/address-subscribed-api-rest-dataops.dc1.elisa.fi\/dataops-api\/v1\/offer_mlk\/\" +\n        e.authId\n    )\n    .then(function(result) {\n      easy.console.log(\"offer_mlk api result:\", result);\n      if (result.offer_mlk === true) {\n        easy.events.trigger('MLK_OFFER_API_CHECK_RESULT', { offer_mlk: \"true\" });\n      } else {\n        easy.events.trigger('MLK_OFFER_API_CHECK_RESULT', { offer_mlk: \"false\" });\n      }\n    })\n    .catch(function(error) {\n      easy.console.error(error);\n      easy.log.error(error);\n      easy.events.trigger('MLK_OFFER_API_CHECK_FAILURE', { offer_mlk: \"false\" });\n      return \"false\";\n    });\n})();"],"true"],["eq?",["location","href"],"https:\/\/elisa.fi\/"]],"on_event":{"type":"easyEvent","eventName":"AUTHID_EXIST_IN_DATALAYER"},"alias":"MLK_OFFER_API_CHECK"},{"id":3560,"rules":["and",["eq?",["var","offer_mlk"],"true"],["eq?",["location","href"],"https:\/\/elisa.fi\/"]],"on_event":{"type":"easyEvent","eventName":"MLK_OFFER_API_CHECK_RESULT"},"alias":"MLK_OFFER_AVAILABLE"},{"id":3962,"rules":["or",["regex?",["var","authType"],"ANONYMOUS"],["and",["eq?",["var","event"],"gtm.click"],["eq?",["var","gtm.elementClasses"],"logout"]]],"on_event":{"type":"easyEvent","eventName":"dataLayer"},"alias":"NOT_LOGGEDIN_OMAELISA"},{"id":4053,"rules":[],"on_event":{"type":"easyEvent","eventName":"location"},"alias":"locationChange"},{"id":4056,"rules":["and",["and",["eq?",["location","host"],"yksityisille.hub.elisa.fi"],["contains",["domelem","article","className"],"single-post"]]],"on_event":{"type":"easyEvent","eventName":"easy.ready"},"alias":"isHubArticlePage"},{"id":5612,"rules":[],"on_event":{"type":"jsvarWait","js_var":"window.dataLayer"},"alias":"FCP_TRIGGER_ALIAS_dataLayer_ready"},{"id":5613,"rules":[],"on_event":{"type":"easy.ready"},"alias":"FCP_TRIGGER_ALIAS_easy_ready"},{"id":5735,"rules":["and",["eq?",["location","path"],"\/"]],"on_event":{"type":"domWait","selector":"nav.ea-category-menu.ea-pad.ea-pad--pad-v-1 ul li a span"},"alias":null},{"id":5984,"rules":[],"on_event":{"type":"domWait","selector":"#Nuance-chat-anchored"},"alias":"FCP_TRIGGER_ALIAS_chatbot_display"},{"id":6077,"rules":["and",["eq?",["var","event"],"trackingId"]],"on_event":{"type":"dataLayer"},"alias":"FCP_TRIGGER_ALIAS_has_tracking_id"},{"id":6604,"rules":["and",["eq?",["location","path"],"\/"]],"on_event":{"type":"domEvent","eventName":"click","selector":".fr-split-hero-tracking"},"alias":"CLICKED_SPLIT_HERO"},{"id":6686,"rules":[],"on_event":{"type":"domWait","selector":".react-navi-ea-mainheader-profilebutton-name","timeout":20},"alias":"LOGIN_OMAELISA_SUCCESS"},{"id":6706,"rules":["or",["and",["not",["eq?",["var","authType"],"ANONYMOUS"]],["not",["eq?",["js_var","authId"],"undefined"]]],["regex?",["var","authType"],"LOGGED_IN"]],"on_event":{"type":"easyEvent","eventName":"dataLayer"},"alias":"LOGIN_OMAELISA_SUCCESS"},{"id":6733,"rules":["and",["or",["not",["regex?",["js_var","navigator.language"],"en-nz","i"]],["not",["eq?",["js_var","navigator.language"],"en"]],["not",["regex?",["js_var","navigator.language"],"en-gb","i"]],["not",["regex?",["js_var","navigator.language"],"fi-fi","i"]],["not",["eq?",["js_var","navigator.language"],"fi"]],["not",["regex?",["js_var","navigator.language"],"sv-fi"]]]],"on_event":{"type":"jsvarWait","js_var":"navigator.language","timeout":5},"alias":"LANGUAGE_NOT_EN_OR_FI"},{"id":6735,"rules":["and",["eq?",["js","function checkLanguageIsEnOrFi() {\n  var language = navigator.language;\n\n  return language.indexOf(\"en\") !== -1 || language.indexOf(\"fi\") !== -1 || language.indexOf(\"sv\") !== -1;\n}\n\ncheckLanguageIsEnOrFi();"],"false"]],"on_event":{"type":"scriptLoad"},"alias":"BROWSER_LANGUAGE_NOT_EN_FI_SV"},{"id":6754,"rules":["and",["regex?",["var","authType"],"LOGGED_IN"],["eq?",["var","event"],"trackingId"]],"on_event":{"type":"dataLayer"},"alias":"DATALAYER_TRACKING_ID_AND_LOGGED_IN"},{"id":6758,"rules":["and",["eq?",["var","event"],"trackingId"]],"on_event":{"type":"dataLayer"},"alias":"USER_AUTHTYPE_LOGGED_IN_TRUE"},{"id":7662,"rules":["and",["and",["contains",["domelem","body","class"],"single-post"],["not",["contains",["location","path"],"hyotylinkit"]]]],"on_event":{"type":"easy.ready"},"alias":"FCP_TRIGGER_ALIAS_article_page_article_recommendation"},{"id":8074,"rules":["and",["eq?",["js","(function() {\nreturn document.getElementsByClassName('fr-network-assistant').length\n})()"],"0"]],"on_event":{"type":"domReady"},"alias":null},{"id":8362,"rules":[],"on_event":{"type":"easyEvent","eventName":"frosmo_product_view"},"alias":null},{"id":8478,"rules":["and",["eq?",["location","path"],"\/"]],"on_event":{"type":"scriptLoad"},"alias":null}],"hiddenMessageClickTracking":true,"sharedCode":[{"id":100,"content":"\/* global easy, site, triggerEventData *\/\n\n\/* The code below is just a placeholder *\/\nvar isp_data = triggerEventData.isp;\nfrosmo.easy.console.log(isp_data);\n\nwindow.localStorage.setItem('frosmoIspName', isp_data);\n\nfrosmo.easy.customAction.trigger('ISP', isp_data);","triggerId":4053},{"id":103,"content":"var tagList = frosmo.easy.domElements.selector('.tag-list li');\nif (typeof tagList !== 'undefined'){\n    frosmo.easy.utils.each(tagList, function(tag){\n        var articleTag = tag.innerText;\n        frosmo.easy.customAction.trigger('articleTag', articleTag);\n        console.log(articleTag);\n    }); \n} else {\n  return;\n}","triggerId":4056},{"id":547,"content":"var MODULE = '[Tracking] Tracking module';\n\neasy.console.log(MODULE, 'init');\n\nwindow.dataLayer = window.dataLayer || [];\nfrosmo.site = frosmo.site || {};\n\nif (frosmo.site.userInterest) {\n    easy.console.log(MODULE, 'init aborted, module already initialised');\n    return;\n}\n\/**\n * Affinity configuration: these help currently in deriving the user's affinity\n * Configuation:   At setup time set these correctly\n *\/\nvar productCount = 10;   \/\/ number of different products per category (approx)\nvar categoryCount = 5;  \/\/ number of different categories (approx)\nvar brandCount = 3;      \/\/ number of different available brands per category (approx)\nvar affinityLimit = 2;   \/\/ what we need the weight to be to hit \"affinity\"\n\n\n\n\/**\n * \n * User interest tracking\n * \n *\/\n\n\n\/**\n * Configuration\n *\/\nvar EVENT_USERINTEREST_READY = 'frosmo_userInterest_ready';\nvar EVENT_USERINTEREST_WEIGHT = 'frosmo_userInterest_weight';\nvar EVENT_USERINTEREST_LASTTIMESTAMP = 'frosmo_userInterest_lastTimestamp';\nvar interest_key = 'userInterest';\n\nvar maxEventsPerInterest = 100; \/\/ Number of events per interest type\nvar week = 60 * 60 * 24 * 7; \/\/ 604800 (one week)\nvar defaultResetAfter = week * 2; \/\/ two weeks\n\nvar config = {\n    product_view: {\n        resetAfter: week\n    },\n    product_purchase: {\n        resetAfter: week\n    },\n    category_view: {\n        resetAfter: week\n    },\n    category_purchase: {\n        resetAfter: week\n    }\n};\n\n\n\nvar attributeWeights = {\n   \/* 'product_view': 1,\n    'category_view': categoryCount \/ productCount,\n    'brand_view': brandCount \/ productCount,*\/\n    'product_view': 1,\n    'category_view': 0.8,\n    'brand_view': 0.9,\n}\n\n\n\/**\n * frosmo.site.userInterest module\n *\/\n\n\/\/ Initialise userInterest module\nfrosmo.site = frosmo.site || {};\nsite = frosmo.site;\nsite.userInterest = site.userInterest || {\n    config: config,\n    events: {\n        ready: EVENT_USERINTEREST_READY,\n        weight: EVENT_USERINTEREST_WEIGHT,\n        lastTimestamp: EVENT_USERINTEREST_LASTTIMESTAMP\n    },\n\n    \/**\n     * Get user interest by type\n     * \n     * @param {string} dataType any data type string (group of data)\n     * @param {string} sortBy   sort by key (defaults to weight, biggest number first)\n     * @returns {array}         ordered array of interest keys\n     *\/\n    getByType: function (dataType, sortBy) {\n        var sortByAttribute = sortBy || 'weight';\n        var interests = _getInterestsWithWeights(dataType)\n            .sort(function (a, b) {\n                return b[sortByAttribute] - a[sortByAttribute];\n            });\n        return interests;\n    },\n\n    \/**\n     * Get affinity of user interest\n     * Affinity means detecting of user interested in a specific game\/category\/brand\n     * \n     * @returns {object}  attribute and value  (eg: {attribute: 'id', value: 8829} \n     * OR {attribute: 'category', value: 'slots'} \n     * OR {attribute: 'brand', value: 'acme_brand'}\n     **\/\n    getAffinity: function () {\n        return easy.utils.reduce(['product_view', 'category_view', 'brand_view'], function (affinity, dataType) {\n            var interests = site.userInterest.getByType(dataType, 'weight');\n            var attribute = '';\n            switch (dataType) {\n                case 'product_view':\n                    attribute = 'id';\n                    \/\/paramKey = 'id';\n                    break;\n                case 'category_view':\n                    attribute = 'category';\n                    \/\/paramKey = 'id';\n                    break;\n                case 'brand_view':\n                    attribute = 'brand';\n                    \/\/paramKey = 'brand';\n                    break;\n                default:\n                    attribute = 'id';\n                    break;\n            }\n            var multiplier = attributeWeights[dataType];\n\n            if (interests.length > 0) {\n                var interestWeight = interests[0].weight * multiplier;\n                if ((!affinity || !affinity.hasOwnProperty('weight') || interestWeight > affinity.weight) && interestWeight >= affinityLimit) {\n                    affinity = {\n                        attribute: attribute,\n                        value: interests[0].id,\n                        weight: interestWeight,\n                        originalWeight: interests[0].weight\n                    }\n                }\n            }\n            return affinity;\n        }, {});\n    }\n};\n\nsite.recentProducts = site.userInterest.getByType.bind(null, 'product_view', 'lastTimestamp');\nsite.topViewedProducts = site.userInterest.getByType.bind(null, 'product_view', 'weight');\nsite.recentCategories = site.userInterest.getByType.bind(null, 'category_view', 'lastTimestamp');\nsite.topViewedCategories = site.userInterest.getByType.bind(null, 'category_view', 'weight');\nsite.lastBoughtProducts = site.userInterest.getByType.bind(null, 'product_purchase', 'lastTimestamp');\nsite.lastBoughtCategories = site.userInterest.getByType.bind(null, 'category_purchase', 'lastTimestamp');\nsite.recentBrands = site.userInterest.getByType.bind(null, 'brand_view', 'lastTimestamp');\nsite.topViewedBrands = site.userInterest.getByType.bind(null, 'brand_view', 'weight');\nsite.getAffinity = site.userInterest.getAffinity.bind();\n\n\n\/\/ Initialise context\neasy.context.site[interest_key] = easy.context.site[interest_key] || {};\n\n\/\/ Clear expired interests\n_clearExpiredInterests();\n\n\n\n\n\n\n\n\/**\n * Get array of interest ids with weight\n * \n * @param {string} dataType any data type string (group of data)\n * @returns {array}         array of id-weight pairs\n *\/\nfunction _getInterestsWithWeights(dataType) {\n    var data = easy.context.site[interest_key][dataType] || [];\n\n    \/\/ Reduce array of interests to id-weight pairs\n    return easy.utils.reduce(data, function (reduction, item) {\n        if (!item.id) {\n            easy.log.error('User interest has no id: ' + JSON.stringify(item), 'userInterest.getByType')\n            return reduction;\n        }\n\n        \/\/ Find existing item in reduction\n        var existingItem = easy.utils.find(reduction, function (reductionItem) {\n            return reductionItem.id === item.id;\n        });\n\n        if (existingItem) {\n            existingItem.weight = existingItem.weight + 1;\n            existingItem.firstTimestamp = Math.min(existingItem.firstTimestamp, item.timestamp);\n            existingItem.lastTimestamp = Math.max(existingItem.lastTimestamp, item.timestamp);\n            return reduction;\n        }\n\n        reduction.push({\n            id: item.id,\n            weight: 1,\n            firstTimestamp: item.timestamp,\n            lastTimestamp: item.timestamp\n        });\n\n        return reduction;\n    }, []);\n}\n\n\n\/**\n * User interest storage - frosmo.easy.context.site \n *\/\n\n\/**\n * Save an interest\n * \n * @param {string} dataType any data type string (group of data)\n * @param {string} id       identifier of data item\n * @returns\n *\/\nfunction _saveInterest(dataType, id) {\n    easy.context.site[interest_key][dataType] = easy.context.site[interest_key][dataType] || [];\n\n    easy.context.site[interest_key][dataType].unshift({\n        id: id,\n        timestamp: easy.utils.getTimestamp()\n    });\n    easy.context.save();\n}\n\n\/**\n * Remove interests that have expired\n *\/\nfunction _clearExpiredInterests() {\n    var interests = easy.context.site[interest_key];\n    easy.utils.each(easy.utils.keys(interests), function (dataType) {\n        var threshold = (config[dataType] && config[dataType].resetAfter) || defaultResetAfter;\n        easy.context.site[interest_key][dataType] = easy.utils.filter(easy.context.site[interest_key][dataType], function (item) {\n                if (!item.timestamp || !item.id) {\n                    easy.log.error('User interest has no id or tiemstamp: ' + JSON.stringify(item), 'userInterest._clearExpiredInterests');\n                    return false;\n                }\n                return item.timestamp > threshold;\n            })\n            .slice(0, maxEventsPerInterest - 1);\n    });\n    easy.context.save();\n}\n\n\/**\n * Send dataLayer event with data sorted\n * \n * @param {string} event    Event name to send\n * @param {string} sortBy   Sort resultset by attribute\n *\/\nfunction _sendDataLayerEvent(event, sortBy) {\n    var interestDataTypes = easy.utils.keys(easy.context.site[interest_key]);\n\n    var interestData = easy.utils.map(interestDataTypes, function (dataType) {\n        return {\n            type: dataType,\n            data: site.userInterest.getByType(dataType, sortBy)\n        }\n    });\n\n    window.dataLayer.push({\n        event: event,\n        data: interestData\n    });\n}\n\n\n\n\n\n\/**\n * \n * Product view\/conversion tracking\n * \n *\/\n\n\/**\n * Get text from DOM element or return empty string\n * \n * @param {selector} DOM selector for element\n * @returns {string} Element textContent or ''\n *\/\nfunction _getValueFromElement(selector) {\n    var els = easy.domElements.selector(selector);\n    return els.length ? els[0].textContent : '';\n}\n\n\/**\n * Get attribute value from DOM element or return empty string\n * \n * @param {selector}  DOM selector for element\n * @param {attribute} Attribute to read\n * @returns {string}  Element textContent or ''\n *\/\nfunction _getAttributeValueFromElement(selector, attribute) {\n    var els = easy.domElements.selector(selector);\n    return els.length ? els[0].getAttribute(attribute) : '';\n}\n\/**\n * \n * Mapping Product view\/conversion for Product\n * \n *\/\n\/**\n * Map event frosmo_product_view event objects\n * to Frosmo dataLayer products\n * \n * https:\/\/docs.frosmo.com\/display\/dev\/Tracking+products+with+the+data+layer\n * \n * @param {product} Product data from event frosmo_product_view\n *\/\nfunction _mapProductDetailToFrosmoProduct(product) {\n    \/\/ Category not defined - do not send category\n    var category = product.category && product.category.length > 0 ? 'product\/' + product.category : '';\n    return {\n        frosmoProductId: product.id,\n        frosmoProductName: product.name,\n        frosmoProductCategory: category,\n        frosmoProductManufacturer: product.brand,\n        frosmoProductUrl: product.url,\n        frosmoProductImage: product.image,\n        \/\/frosmoProductPrice: product.price,\n        frosmoProductData: product.data,\n        frosmoProductConversion: 1\n    };\n}\n\n\/**\n * Map event frosmo_product_transaction product object\n * to Frosmo dataLayer products\n * \n * https:\/\/docs.frosmo.com\/display\/ui\/Tracking+products+and+transactions#Trackingproductsandtransactions-Trackingtransactions\n * \n * @param {product} Product data from event frosmo_product_transaction\n *\/\nfunction _mapProductPurchaseToFrosmoProduct(product) {\n    return {\n        id: product.id,\n        name: product.name,\n        price: product.price,\n        quantity: product.quantity\n    };\n}\n\n\/**\n * \n * Mapping Product view\/conversion for Product Category\n * \n *\/\n\/**\n * Map event frosmo_product_transaction product object\n * to Frosmo dataLayer products. Sends categories as products.\n * \n * https:\/\/docs.frosmo.com\/display\/dev\/Tracking+products+with+the+data+layer\n * \n * @param {product} Product data from event frosmo_product_transaction\n *\/\nfunction _mapProductDetailToFrosmoProductCategoryProduct(product) {\n    return {\n        frosmoProductId: product.category,\n        frosmoProductName: 'category ' + product.category,\n        frosmoProductCategory: 'category',\n        frosmoProductPrice: '',\n        frosmoProductUrl: '',\n        frosmoProductImage: '',\n    }\n}\n\n\n\/**\n * Map event frosmo_product_transaction product objects\n * to Frosmo dataLayer conversions. Sends brands as products.\n * \n * https:\/\/docs.frosmo.com\/display\/dev\/Tracking+products+with+the+data+layer\n * \n * @param {product} Product data from event frosmo_product_transaction\n *\/\nfunction _mapProductPurchaseFrosmoProductBrandProduct(product) {\n    return {\n        id: product.brand,\n        name: 'brand ' + product.brand,\n        price: 0,\n        quantity: product.quantity\n    };\n}\n\n\/**\n * Map event frosmo_product_transaction product objects\n * to Frosmo dataLayer conversions. Sends categories as products.\n * \n * https:\/\/docs.frosmo.com\/display\/dev\/Tracking+products+with+the+data+layer\n * \n * @param {product} Product data from event frosmo_product_transaction\n *\/\nfunction _mapProductPurchaseToFrosmoCategoryProduct(product) {\n    return {\n        id: product.category,\n        name: 'category ' + product.category,\n        price: 0,\n        quantity: product.quantity\n    };\n}\n\/**\n * \n * Mapping Product view for Product Brand (Manufacturer)\n * \n *\/\n\/**\n * Map event frosmo_product_view event objects\n * to Frosmo dataLayer products\n * \n * https:\/\/docs.frosmo.com\/display\/dev\/Tracking+products+with+the+data+layer\n * \n * @param {product} Product data from event frosmo_product_view\n *\/\nfunction _mapProductDetailToFrosmoProductBrandProduct(product) {\n    return {\n        frosmoProductId: product.brand,\n        frosmoProductName: 'brand ' + product.brand,\n        frosmoProductCategory: 'brand',\n        frosmoProductPrice: '',\n        frosmoProductUrl: '',\n        frosmoProductImage: '',\n    }\n}\n\n\/**\n * Handle event frosmo_product_view product data\n * Expects eventData.products to contain an array of products viewed\n * \n * @param {eventData}   Event data\n *\/\nfunction _handleProductView(eventData) {\n\n    var products = eventData.products;\n    if (!products) {\n        easy.log.error('No products in eventData', 'tracking.productview');\n        return;\n    }\n\n    var frosmoProducts = easy.utils.map(products, _mapProductDetailToFrosmoProduct);\n    var frosmoCategoryProducts = easy.utils.map(products, _mapProductDetailToFrosmoProductCategoryProduct);\n    var frosmoBrandProducts = easy.utils.map(products, _mapProductDetailToFrosmoProductBrandProduct);\n\n    easy.utils.each(products, function (product) {\n        _sendFrosmoCustomAction(\"View Product\", product.name);\n        _sendFrosmoCustomAction(\"View Category\", product.category);\n        _sendFrosmoCustomAction(\"View Brand\", product.brand);\n    });\n\n    easy.utils.each(frosmoProducts, function (product) {\n        window.dataLayer.push(product);\n        _saveInterest('product_view', product.frosmoProductId);\n    });\n    easy.utils.each(frosmoCategoryProducts, function (product) {\n        \/\/ Ignore categories without an identifier (ie. product type not set)\n        if (!product.frosmoProductId || product.frosmoProductId.length === 0) {\n            easy.console.warn('No category identifier in eventData', 'tracking.productview');\n            return;\n        }\n        window.dataLayer.push(product);\n        _saveInterest('category_view', product.frosmoProductId);\n    });\n    easy.utils.each(frosmoBrandProducts, function (product) {\n        \/\/ Ignore brands without an identifier (ie. product type not set)\n        if (!product.frosmoProductId || product.frosmoProductId.length === 0) {\n            easy.console.warn('No brand identifier in eventData', 'tracking.productview');\n            return;\n        }\n        \/\/ NOTE: Comment out for now to avoid polluting the dataLayer\n        \/\/ window.dataLayer.push(product);\n        _saveInterest('brand_view', product.frosmoProductId);\n    });\n\n    \/\/ Extra attributes\n    easy.utils.each(products, function (product) {\n        if (product.data && product.data.model) {\n            _saveInterest('model_view', product.data.model);\n        }\n        if (product.data && product.data.variant) {\n            _saveInterest('variant_view', product.data.variant);\n        }\n        if (product.data && product.data.operating_system) {\n            _saveInterest('operating_system_view', product.data.operating_system);\n        }\n    });\n}\n\n\/**\n * Handle event frosmo_product_transaction\n * Expects eventData.transaction to contain a transaction ID and array of products purchased\n * \n * @param {eventData}   Event data\n *\/\nfunction _handleProductTransaction(eventData) {\n    var products = eventData.products;\n    if (!products) {\n        easy.log.error('No products in eventData', 'tracking.productpurchase');\n        return;\n    }\n    var frosmoProducts = easy.utils.map(products, _mapProductPurchaseToFrosmoProduct);\n    var frosmoTransaction = {\n        transactionId: eventData.id,\n        transactionTotal: eventData.revenue,\n        transactionProducts: frosmoProducts\n    };\n\n    var frosmoCategoryProducts = easy.utils.map(products, _mapProductPurchaseToFrosmoCategoryProduct);\n    var frosmoCategoryTransaction = {\n        transactionId: eventData.id + '-category',\n        transactionTotal: 0,\n        transactionProducts: frosmoCategoryProducts\n    }\n\n    var frosmoBrandProducts = easy.utils.map(products, _mapProductPurchaseFrosmoProductBrandProduct);\n\n    window.dataLayer.push(frosmoTransaction);\n    \/\/ NOTE: Disable to avoid double transactions\n    window.dataLayer.push(frosmoCategoryTransaction);\n\n    easy.utils.each(products, function (product) {\n        _sendFrosmoCustomAction(\"Buy Product\", product.name);\n        _sendFrosmoCustomAction(\"Buy Category\", product.category);\n        _sendFrosmoCustomAction(\"Buy Brand\", product.brand);\n        \n    });\n    easy.utils.each(frosmoProducts, function (product) {\n        _saveInterest('product_purchase', product.id);\n        \n    });\n    easy.utils.each(frosmoCategoryProducts, function (product) {\n        _saveInterest('category_purchase', product.id);\n        \n    });\n    easy.utils.each(frosmoBrandProducts, function (product) {\n        _saveInterest('brand_purchase', product.id);\n        \n    });\n\n    \/\/ Extra attributes\n    easy.utils.each(products, function (product) {\n        if (product.data && product.data.model) {\n            _saveInterest('model_purchase', product.data.model);\n        }\n        if (product.data && product.data.variant) {\n            _saveInterest('variant_purchase', product.data.variant);\n        }\n        if (product.data && product.data.operating_system) {\n            _saveInterest('operating_system_purchase', product.data.operating_system);\n        }\n    });\n\n}\n\n\/**\n * Handle event frosmo_product_addtocart\n * Expects eventData.products to contain an array of products added to cart\n * \n * @param {eventData}   Event data from trigger - event data that was pushed\n *\/\nfunction _handleProductAddToCart(eventData) {\n\n    var products = eventData.products;\n    if (!products) {\n        easy.log.error('No products in eventData', 'tracking.productadd');\n        return;\n    }\n\n    var frosmoProducts = easy.utils.map(products, _mapProductDetailToFrosmoProduct);\n    var frosmoCategoryProducts = easy.utils.map(products, _mapProductDetailToFrosmoProductCategoryProduct);\n    var frosmoBrandProducts = easy.utils.map(products, _mapProductDetailToFrosmoProductBrandProduct);\n\n    easy.utils.each(products, function (product) {\n        _sendFrosmoCustomAction(\"Add-to-cart Product\", product.name);\n        _sendFrosmoCustomAction(\"Add-to-cart Category\", product.category);\n        _sendFrosmoCustomAction(\"Add-to-cart Brand\", product.brand);\n    });\n\n    easy.utils.each(frosmoProducts, function (product) {\n        _saveInterest('product_addtocart', product.frosmoProductId);\n    });\n    easy.utils.each(frosmoCategoryProducts, function (product) {\n        _saveInterest('category_addtocart', product.frosmoProductId);\n    });\n    easy.utils.each(frosmoBrandProducts, function (product) {\n        _saveInterest('brand_addtocart', product.frosmoProductId);    \n    });\n\n    \/\/ Extra attributes\n    easy.utils.each(products, function (product) {\n        if (product.data && product.data.model) {\n            _saveInterest('model_addtocart', product.data.model);\n        }\n        if (product.data && product.data.variant) {\n            _saveInterest('variant_addtocart', product.data.variant);\n        }\n        if (product.data && product.data.operating_system) {\n            _saveInterest('operating_system_addtocart', product.data.operating_system);\n        }\n    });\n\n}\n\n\/**\n * Route frosmo events to correct handlers\n * @param {eventData}   dataLayer event data\n *\/\nfunction _handleDataLayer(eventData) {\n        \n    if (eventData.event === 'frosmo_product_view') {\n        _handleProductView(eventData);\n        easy.events.trigger(eventData.event, eventData.products);\n    }\n\n\/*    \n    if (eventData.event === 'item_details_view') {\n        _handleProductView(eventData);\n        easy.events.trigger(eventData.event, eventData.products);\n    }\n*\/\n        \n    if (eventData.event === 'frosmo_product_transaction') {\n        _handleProductTransaction(eventData);\n        easy.events.trigger(eventData.event, eventData.transaction);\n    }\n    \n    if (eventData.event === 'frosmo_product_addtocart') {\n        _handleProductAddToCart(eventData);\n        easy.events.trigger(eventData.event, eventData.products);    \n    }\n}\n\nfunction _sendUserInterestReadyEvents() {\n    \/\/ Send userInterests events\n    if (window.dataLayer) {\n        easy.events.trigger(site.userInterest.events.ready, site.userInterest);\n        _sendDataLayerEvent(site.userInterest.events.weight, 'weight');\n        _sendDataLayerEvent(site.userInterest.events.lastTimestamp, 'lastTimestamp');\n    } else {\n        easy.log.error('dataLayer not found', 'tracking.dataLayer')\n    }\n}\n\nfunction _sendFrosmoCustomAction(name, value) {\n    \/*\n   if (!value || value.length === 0) {\n       console.warn('No value for custom action: ' + name);\n       return;\n   }\n   \n   window.dataLayer.push({\n        frosmoEvent: name,\n        frosmoValue: value\n    });\n    *\/\n}\n\n\neasy.events.on(easy.EVENT_DATALAYER, _handleDataLayer);\n\n _sendUserInterestReadyEvents();","triggerId":5613},{"id":548,"content":"var MODULE = '[Tracking] Tracking adapter - Elisa';\n\neasy.console.log(MODULE, 'init');\n\n\/\/ Initialise tracking adapter module\nfrosmo.site = frosmo.site || {};\nsite = frosmo.site;\n\nif (frosmo.site.trackingAdapterActive) {\n    easy.console.log(MODULE, 'init aborted, tracking adapter already initialised');\n    return;\n}\n\n\nfrosmo.site.trackingAdapterActive = true;\n\n\/**\n * Get og: tag content\n * \n * @param {*} tag\n *\/\nfunction _getOgContent(tag) {\n    var metaTag = easy.domElements.selector('meta[property=\"og:'+tag+'\"]')[0];\n    if (!metaTag) {\n        return null\n    }\n    return metaTag.getAttribute('content');\n}\n\n\/**\n * Convert to d decimals\n *\/\nfunction toFixed(n, d) {\n    return parseFloat(n).toFixed(d);\n}\n\n\/**\n * Get data for product from dataLayer and\/or og:tags\n * @param {*} dataLayerProduct \n *\/\nfunction _getProductViewProductData(dataLayerProduct) {\n\n    var product = easy.utils.extend({}, dataLayerProduct);\n\n    var productCategories = product.productCategories;\n    var vendor = easy.utils.find(productCategories, function(category) {\n        return category.label === 'vendor';\n    });\n    var model = easy.utils.find(productCategories, function(category) {\n        return category.label === 'model';\n    });\n    var variant = easy.utils.find(productCategories, function(category) {\n        return category.label === 'variant';\n    });\n    var operating_system = easy.utils.find(productCategories, function(category) {\n        return category.label === 'operating_system';\n    });\n\n    var result = {\n        id: product.productId,\n        name: product.name,\n        category: product.type,\n        url: product.url,\n        image: product.imageUrl,\n        price: '', \/\/ NOTE: price comes from feed\n        brand: vendor ? vendor.value : '',\n        data: {\n            smallImageUrl: product.smallImageUrl,\n            lifecycleCharge: product.lifecycleCharge,\n            totalCharge: product.totalCharge,\n            isSubscription: product.isSubscription,\n            monthlyTotalCharge: toFixed(product.lifecycleCharge, 2),\n            hasMonthlyCharge: false,\n            hasDiscount: false,\n            model: model ? model.value : '',\n            variant: variant ? variant.value : '',\n            operating_system: operating_system ? operating_system.value : '',\n            main_categories: product.categories || []\n        }\n    };\n    \n    var monthlyCharge = {};\n    if (!easy.utils.isEmpty(product.monthlyCharge)) {\n        var hasMonthlyCharge = product.monthlyCharge.current > 0;\n        var hasDiscount = hasMonthlyCharge && product.monthlyCharge.lowest > product.monthlyCharge.current;\n        monthlyCharge = {\n            hasMonthlyCharge: hasMonthlyCharge,\n            hasDiscount: hasDiscount,\n            monthlyCharge: hasMonthlyCharge ? toFixed(product.monthlyCharge.current, 2) : NaN,\n            monthlyChargeDuration: hasMonthlyCharge ? Math.floor(product.lifecycleCharge \/ product.monthlyCharge.current) : NaN,\n            lowestMonthlyCharge: hasDiscount ? toFixed(product.monthlyCharge.current, 2) : toFixed(product.monthlyCharge.lowest, 2)\n        };\n    }\n\n    easy.utils.extend(result.data, monthlyCharge);\n\n    return result;\n}\n\n\/**\n * Get frosmoDataLayer transaction product data\n *\/\nfunction _getTransactionProductData(product) {\n    return {\n        id: product.id,\n        name: product.name,\n        price: product.price,\n        quantity: product.quantity\n    };\n}\n\n\/**\n * https:\/\/developers.google.com\/tag-manager\/enhanced-ecommerce#cart\n * \n * @param {*} eventData dataLayer object pushed\n *\/\nfunction _handleProductAddToCart(eventData) {\n\n    var products = eventData.items;\n    if (!products) {\n        easy.log.error('No products in eventData', 'tracking.addtocart');\n        return;\n    }\n\n    var frosmoProducts = easy.utils.map(products, _getProductViewProductData);\n\n    window.dataLayer.push({\n        event: 'frosmo_product_addtocart',\n        products: frosmoProducts\n    })\n}\n\n\/**\n * https:\/\/developers.google.com\/tag-manager\/enhanced-ecommerce#purchases\n * \n * @param {*} eventData dataLayer object pushed\n *\/\nfunction _handleProductPurchase(eventData) {\n    var products = eventData.transactionProducts;\n    if (!products) {\n        easy.log.error('No products in eventData', 'tracking.productpurchase');\n        return;\n    }\n\n    var frosmoProducts = easy.utils.map(products, _getTransactionProductData);\n    \n    var revenue = frosmoProducts.reduce( function(acc, curr) {\n        return acc + curr.price*curr.quantity;\n    }, 0);\n    var transaction = {\n        id: eventData.transactionId,\n        revenue: revenue\n    };\n\n    window.dataLayer.push({\n        event: 'frosmo_product_transaction',\n        id: transaction.id,\n        revenue: transaction.revenue,\n        products: frosmoProducts\n    });\n}\n\n\/**\n * https:\/\/developers.google.com\/tag-manager\/enhanced-ecommerce#details\n * \n * @param {*} eventData dataLayer object pushed\n *\/\nfunction _handleDetailProducts(eventData) {\n    var frosmoProducts = easy.utils.map([eventData], _getProductViewProductData);\n\n    window.dataLayer.push({\n        event: 'frosmo_product_view',\n        products: frosmoProducts\n    });\n}\n\n\n\/**\n * Only handle events that are part of Google Enhanced Ecommerce (UA) standard\n * \n * @param {event}   dataLayer event data\n *\/\nfunction _handleDataLayerEvents(eventData) {\n    window.dataLayer = window.dataLayer || [];\n\n    \/\/ https:\/\/developers.google.com\/tag-manager\/enhanced-ecommerce#details\n    if (eventData.frosmoEvent === 'Product View') {\n        _handleDetailProducts(eventData.frosmoValue);\n    }\n\n    \/\/ https:\/\/developers.google.com\/tag-manager\/enhanced-ecommerce#purchases\n    if (eventData.transactionId) {\n        _handleProductPurchase(eventData);\n    }\n\n    \/\/ https:\/\/developers.google.com\/tag-manager\/enhanced-ecommerce#cart\n    if (eventData.frosmoEvent === 'Cart change') {\n        _handleProductAddToCart(eventData.frosmoValue);\n    }\n}\n\nvar frosmoDataLayerEvent = site.EVENT_DATALAYER_ITEM_PUSHED;\n\neasy.events.on(frosmoDataLayerEvent, _handleDataLayerEvents);","triggerId":5613},{"id":549,"content":"\"fffe1f579a80608f6f00a4e8b83a77c586bde2da\";\n\/\/ Based on above release, includes custom strategies and logic\n(function () {\n    'use strict';\n\n    function initializeTemplateDefaults(templateDefaults) {\n        var initializedTemplateDefaults = easy.utils.clone(templateDefaults);\n        initializedTemplateDefaults.useShuffle = initializedTemplateDefaults.hasOwnProperty('useShuffle') ? Boolean(initializedTemplateDefaults.useShuffle) : true;\n        initializedTemplateDefaults.useCount = initializedTemplateDefaults.useCount || 8;\n        initializedTemplateDefaults.fixedIds = initializedTemplateDefaults.fixedIds || [];\n        initializedTemplateDefaults.excludeIds = initializedTemplateDefaults.excludeIds || [];\n        initializedTemplateDefaults.excludeShownProducts = initializedTemplateDefaults.hasOwnProperty('excludeShownProducts') ? Boolean(initializedTemplateDefaults.excludeShownProducts) : true;\n\n        \/\/ Custom inits\n        initializedTemplateDefaults.uniqByName = initializedTemplateDefaults.hasOwnProperty('uniqByName') ? Boolean(initializedTemplateDefaults.uniqByName) : false;\n        initializedTemplateDefaults.keyword_tag_filtering = initializedTemplateDefaults.hasOwnProperty('keyword_tag_filtering') ? Boolean(initializedTemplateDefaults.keyword_tag_filtering) : false;\n        initializedTemplateDefaults.includeTypesByTags = initializedTemplateDefaults.includeTypesByTags || [];\n        initializedTemplateDefaults.minCount = initializedTemplateDefaults.hasOwnProperty('minCount') ? initializedTemplateDefaults.minCount : 4;\n        initializedTemplateDefaults.articleRecommendation = initializedTemplateDefaults.hasOwnProperty('articleRecommendation') ? Boolean(initializedTemplateDefaults.articleRecommendationds) : false;\n\n        \/\/ return initialized defaults\n        return initializedTemplateDefaults;\n    };\n\n    \/**\n     * Returns ID property of RecommendationProduct\n     *\n     * @param product RecommendationProduct\n     *\/\n    function getProductId(product) {\n        return product.id;\n    };\n\n    \/**\n     * Get unique categories from impressions\n     *\n     * @returns {Promise}     Promise resolves with Array of unique categories\n     *\/\n    function getUniqueCategoriesFromImpressions() {\n        return promiseFromEvent('frosmo_product_impression', 'once').then(function (eventData) {\n            var products = eventData[0];\n            var uniqueCategoryCounts = getArrayUniqueWithCounts(products, 'category');\n            return uniqueCategoryCounts.map(function (category) {\n                return category.id;\n            });\n        });\n    };\n\n    \/**\n     * Shuffle an array with the Fisher-Yates shuffle algorithm\n     * http:\/\/sedition.com\/perl\/javascript-fy.html\n     * Implementation from: https:\/\/github.com\/Daplie\/knuth-shuffle\/blob\/master\/index.js\n     *\n     * @param   {array} array   Array to shuffle\n     * @returns {array}         Shuffled array\n     *\/\n    function shuffle(array) {\n        var currentIndex = array.length;\n        var temporaryValue;\n        var randomIndex;\n\n        \/\/ While there remain elements to shuffle...\n        while (currentIndex !== 0) {\n            \/\/ Pick a remaining element...\n            randomIndex = Math.floor(Math.random() * currentIndex);\n            currentIndex -= 1;\n\n            \/\/ And swap it with the current element.\n            temporaryValue = array[currentIndex];\n            array[currentIndex] = array[randomIndex];\n            array[randomIndex] = temporaryValue;\n        }\n        return array;\n    };\n\n    \/**\n     * Create a promise from an easy.event\n     * TODO: add timeout for reject\n     * @param {string}  event   Event name\n     * @param {type}    type    Type of event (on \/ once), defaults to once\n     *\/\n    function promiseFromEvent(event, type) {\n        if (type === void 0) {\n            type = 'once';\n        }\n\n        return new easy.Promise(function (resolve) {\n            easy.events[type](event, function () {\n                var args = [];\n\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n\n                resolve(args);\n            });\n        });\n    };\n\n    \/**\n     *\n     * @param {array}   arr     array of objects\n     * @param {string}  attr    attribute of object to get unique by\n     * @returns {array}         array of unique objects in input array\n     *\/\n    function getArrayUniqueByAttribute(arr, attr) {\n        return arr.filter(function (item, index) {\n            return !arr.some(function (otherItem, otherIndex) {\n                \/\/ Check similarity by attribute. Filter only items with larger index\n                var isTheSame = otherItem[attr] === item[attr] && otherIndex !== index && index > otherIndex;\n                return isTheSame;\n            });\n        });\n    };\n\n    \/**\n     * Get attribute-weight pairs from a source array based on array object attribute\n     *\n     * @param {array} sourceArray   array of objects\n     * @param {string} attribute    attribute of object to get unique by\n     * @returns {array}             array of objects, attributs: id, weight\n     *\/\n    function getArrayUniqueWithCounts(sourceArray, attribute) {\n        \/\/ Reduce array to attribute-weight pairs\n        return easy.utils.reduce(sourceArray, function (reduction, item) {\n            if (!item[attribute]) {\n                return reduction;\n            }\n\n            \/\/ Find existing item in reduction\n            var existingItem = easy.utils.find(reduction, function (reductionItem) {\n                return reductionItem.id === item[attribute];\n            });\n\n            if (existingItem) {\n                existingItem.weight = existingItem.weight + 1;\n                return reduction;\n            }\n\n            reduction.push({\n                id: item[attribute],\n                weight: 1\n            });\n            return reduction;\n        }, []).sort(function (a, b) {\n            return b.weight - a.weight;\n        });\n    };\n\n\n    \/**\n     * Get product data for an array of products\n     * @param {array} arrayOfProducts Array of product IDs\n     *\/\n    function getProductApiData(arrayOfProducts) {\n        if (arrayOfProducts.length === 0) {\n            return easy.Promise.resolve([]);\n        }\n        \/\/ Make sure product IDs are in string format for API\n        var productIds = arrayOfProducts.map(function (productId) {\n            return String(productId);\n        });\n        var stringIds = JSON.stringify(productIds);\n        \/\/ Get product data for last viewed products\n        return easy.fetch.get(productApiURL + '&ids=' + stringIds).then(function (results) {\n            return results.data;\n        });\n    }\n\n    \/*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n  \n    Permission to use, copy, modify, and\/or distribute this software for any\n    purpose with or without fee is hereby granted.\n  \n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** *\/\n    function __spreadArray(to, from, pack) {\n        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n            if (ar || !(i in from)) {\n                if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n                ar[i] = from[i];\n            }\n        }\n        return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    function _getRecommendationRequest(request, trackFn) {\n        var recoApiQueryObject = request.configurations.map(function (configurationName) {\n            return {\n                name: configurationName,\n                params: request.parameters.reduce(function (reduction, parameter) {\n                    reduction[parameter.key] = parameter.values;\n                    return reduction;\n                }, {})\n            };\n        });\n        var apiParams = '&recos=' + encodeURIComponent(JSON.stringify(recoApiQueryObject));\n        trackFn('fetch', {\n            params: apiParams\n        });\n        return easy.fetch.get(\"\" + recoApiURL + apiParams);\n    }\n\n    \/**\n     * Get multiple recommendations and return resulting products\n     *\/\n    function getRecommendations(recommendations, templateDefaults, trackFn) {\n        templateDefaults = initializeTemplateDefaults(templateDefaults);\n        var recoApiPromises = easy.utils.map(recommendations, function (recommendationRequest) {\n            return _getRecommendationRequest(recommendationRequest, trackFn);\n        });\n        return easy.Promise.all(recoApiPromises).then(function (recoApiResponses) {\n            var flattenedRecoApiPromises = recoApiResponses.reduce(function (reduction, result) {\n                reduction.push.apply(reduction, result.data);\n                return reduction;\n            }, []);\n            return _flattenRecoApiResponse(flattenedRecoApiPromises, templateDefaults, trackFn);\n        });\n    }\n\n    function _isValidProduct(product, templateDefaults, namesInArray) {\n        var excludeIds = templateDefaults && templateDefaults.excludeIds || [];\n        frosmo.site.recommendations.recommendedProducts = frosmo.site.recommendations.recommendedProducts || [];\n\n        if (templateDefaults && templateDefaults.excludeShownProducts) {\n            excludeIds = __spreadArray(__spreadArray([], excludeIds), frosmo.site.recommendations.recommendedProducts);\n        }\n\n        \/\/ CUSTOM - var inits\n        var includeTags = [''];\n        var lastUpdateInHours = (Date.now() - Date.parse(product.updated_at)) \/ 1000 \/ 60 \/ 60;\n\n        \/\/ CUSTOM - grab tags from DOM and filter them\n        if (templateDefaults.keyword_tag_filtering) {\n            includeTags = easy.domElements.selector(templateDefaults.keyword_tag_selector);\n            includeTags = easy.utils.map(includeTags, function (el) { return el.innerText; });\n\n            \/\/ we care just about 5G for the time being and need to plan the logic for\n            \/\/ other types with the client.\n            includeTags = easy.utils.filter(includeTags, function (tag) {\n                return tag === '5G'\n            });\n        }\n\n        \/\/ CUSTOM - if there's no results from tags --> disable filtering\n        if (includeTags.length === 0) {\n            templateDefaults.keyword_tag_filtering = false;\n        }\n\n        \/\/ CUSTOM - remove color variants by filtering by product name\n        if (templateDefaults.uniqByName) {\n            if (namesInArray.length > 0 && easy.utils.inArray(namesInArray, product.name)) {\n                return false;\n            }\n            namesInArray.push(product.name);\n        }\n\n        easy.console.debug('_isValidProduct templateDefaults:', templateDefaults);\n\n        \/* ORIGINAL RETURN\n        return product.type && product.type !== 'category' && product.name && product.attributes && product.attributes.image && !easy.utils.some(excludeIds, function (excludeId) {\n          return excludeId === product.id;\n        });\n        *\/\n\n        \/\/ CUSTOM RETURN\n        \/\/ availablityStatus is present only on product data fetched from clients\n        \/\/ api on custom \"_external_tarjoukset strategy\".\n\n        if (!templateDefaults.articleRecommendation) {\n            return product.type &&\n                product.type !== 'category' &&\n                product.type !== 'Article' &&\n                product.type !== 'product\/mobileSubscription' &&\n                product.type !== 'product\/fixedBroadband' &&\n                product.type !== 'product\/securityProduct' &&\n                product.type !== 'product\/privacyProduct' &&\n                product.type !== 'product\/viihdeProduct' &&\n                product.type !== 'product\/internetServicePackage' &&\n                product.id !== 'product-2412' &&\n                lastUpdateInHours < 4 &&\n                product.name &&\n                (product.availabilityStatus === 'SELLABLE' ||\n                    product.attributes &&\n                    product.attributes.url &&\n                    product.attributes.image &&\n                    product.attributes.price) &&\n                !easy.utils.some(excludeIds, function (excludeId) {\n                    return excludeId === product.id;\n                }) &&\n                (templateDefaults.keyword_tag_filtering !== true ||\n                    easy.utils.some(includeTags, function (tag) {\n                        easy.console.debug('Strategy includeTags comparison:', product.name, tag);\n                        return product.name.indexOf(tag) > -1;\n                    }));\n\n            \/\/ Rules for article recommendations\n        } else {\n            return product.type &&\n                product.type == 'Article' &&\n                product.attributes &&\n                product.attributes.url &&\n                product.attributes.image &&\n                product.attributes.firstParagraph &&\n                product.attributes.ingressText &&\n                !easy.utils.some(excludeIds, function (excludeId) {\n                    return excludeId === product.id;\n                });\n        }\n    }\n\n    function prepareRecommendationProducts(products, templateDefaults) {\n        \/\/ Remove invalid products\n        var namesInArray = [];\n        var recommendationProducts = easy.utils.filter(products, function (product) {\n            \/\/ CUSTOM - _isValidProduct has extra parameter namesInArray\n            return _isValidProduct(product, templateDefaults, namesInArray);\n        });\n\n        \/\/ Shuffle products\n        if (templateDefaults && templateDefaults.useShuffle) {\n            recommendationProducts = shuffle(recommendationProducts);\n        }\n\n        \/\/ Remove duplicates\n        recommendationProducts = getArrayUniqueByAttribute(recommendationProducts, 'id');\n\n        \/\/ Take only useCount products\n        if (templateDefaults && templateDefaults.useCount) {\n            recommendationProducts = recommendationProducts.slice(0, templateDefaults.useCount);\n        }\n\n        \/\/ Store shown productIds for duplicate removal\n        var recommendationProductIds = easy.utils.map(recommendationProducts, getProductId);\n\n        \/\/ CUSTOM - Add fixed product ids\n        if (templateDefaults && templateDefaults.fixedIds) {\n            recommendationProductIds = __spreadArray(templateDefaults.fixedIds, recommendationProductIds);\n        }\n\n        frosmo.site.recommendations.recommendedProducts = frosmo.site.recommendations.recommendedProducts || [];\n        frosmo.site.recommendations.recommendedProducts = __spreadArray(__spreadArray([], recommendationProductIds), frosmo.site.recommendations.recommendedProducts);\n        return recommendationProducts;\n    }\n    \/**\n     * Flatten array of responses from recoApi\n     * @param {array}       response            Array of responses from recoApi\n     * @param {Object}      templateDefaults    Parameters passed from template\n     * @param {Function}    trackFn             Tracking function to call\n     * @returns {array}                         Array of product ids (string)\n     *\/\n\n    function _flattenRecoApiResponse(response, templateDefaults, trackFn) {\n        \/\/ Flatten response to array\n        var recommendationProducts = response.reduce(function (reduction, result) {\n            reduction.push.apply(reduction, result);\n            return reduction;\n        }, []);\n        var products = prepareRecommendationProducts(recommendationProducts, templateDefaults);\n        var productIds = easy.utils.map(products, getProductId);\n        trackFn('ready', productIds);\n        return products;\n    }\n\n\n    \/**\n     * Send additional recommendation strategy data\n     *\n     * @param   {string}    module      Module name\n     * @param   {string}    action      Action taken\n     * @param   {object}    data        Additional data\n     *\/\n    function sendTrackingData(module, action, data) {\n        if (!easy.tracking) {\n            easy.console.info('Advanced tracking not enabled, strategy data not sent');\n            return;\n        }\n\n        easy.tracking.data('reco.retail', {\n            module: module,\n            action: action,\n            uid: easy.uid.get(),\n            url: window.location.href,\n            ua: window.navigator.userAgent,\n            ts: Date.now(),\n            data: data\n        });\n    }\n\n    function isValidAffinity(affinity) {\n        if (!affinity) return false;\n        if (!Object.prototype.hasOwnProperty.call(affinity, 'attribute')) return false;\n        if (!Object.prototype.hasOwnProperty.call(affinity, 'value')) return false;\n        return true;\n    }\n\n    \/**\n     * Bundle view from user affinity (most significant user favourite among: category, game, vendor)\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function userAffinity(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'userAffinity');\n        trackFn('init', {\n            param: templateDefaults\n        });\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function () {\n            var affinity = frosmo.site.getAffinity();\n\n            if (!isValidAffinity(affinity)) {\n                var description = 'User has no affinity';\n                trackFn('ready', description);\n                easy.console.log('userAffinity: ' + description);\n                throw new Error('No affinity');\n            }\n\n            var recoName = '';\n            var paramKey = '';\n\n            switch (affinity.attribute) {\n                case 'id':\n                    recoName = 'bundle_viewed-60d';\n                    paramKey = 'id';\n                    break;\n\n                case 'category':\n                    recoName = 'bundle_viewed_with_category-30d';\n                    paramKey = 'category';\n                    break;\n\n                case 'brand':\n                    recoName = 'most_viewed_by_brand-60d';\n                    paramKey = 'brand';\n                    break;\n\n                default:\n                    recoName = 'bundle_viewed-60d';\n                    break;\n            }\n\n            return getRecommendations([{\n                configurations: [recoName],\n                parameters: [{\n                    key: paramKey,\n                    values: [affinity.value]\n                }]\n            }], templateDefaults, trackFn);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return easy.Promise.resolve([]);\n            } \/\/ Rethrow for real error\n\n\n            throw new Error(err);\n        });\n    }\n\n    \/\/ VARIABLE AND EVENT STRING INITS\n    var configApi = easy.config.api;\n    frosmo.site = frosmo.site || {};\n    var site = frosmo.site;\n    var recoApiURL = easy.api.getApiUrl('reco') + '\/v2?method=multifetch&origin=' + configApi.origin;\n    var productApiURL = easy.api.getApiUrl('product') + '?method=fetch&origin=' + configApi.origin;\n\n    var MODULE = '[Recommendations] Retail strategies';\n    var EVENT_PRODUCT_VIEW = 'frosmo_product_view';\n    var EVENT_PRODUCT_CART_ADD = 'frosmo_product_addtocart';\n    var EVENT_PRODUCT_IMPRESSION = 'frosmo_product_impression';\n    var EVENT_USERINTEREST_READY = 'frosmo_userInterest_ready';\n    var EVENT_PAGETYPE_PRODUCT = 'FCP_TRIGGER_ALIAS_pagetype_product';\n    var EVENT_PAGETYPE_CATEGORY = 'FCP_TRIGGER_ALIAS_pagetype_category';\n    var EVENT_PAGETYPE_CART = 'FCP_TRIGGER_ALIAS_pagetype_cart';\n    var EVENT_PAGETYPE_SEARCH = 'FCP_TRIGGER_ALIAS_pagetype_search';\n\n    \/\/ FUNCTION EXPORTS \n    site.recommendations = site.recommendations || {};\n    site.recommendations.getProductApiData = getProductApiData;\n    site.recommendations.prepareRecommendationProducts = prepareRecommendationProducts;\n    site.recommendations.prepareRecommendationProductIds = prepareRecommendationProducts;\n    var recommendations = site.recommendations;\n\n    if (frosmo.site.strategiesLoaded) {\n        easy.console.log(MODULE, 'Init aborted, strategies already loaded'); \/\/ SPA change - clear recommendedProducts\n\n        window.frosmo.site.recommendations.recommendedProducts = [];\n    } else {\n        frosmo.site.strategiesLoaded = true;\n        easy.console.log(MODULE, 'Init');\n\n        \/**\n         * Set category page context\n         *\/\n        easy.events.on(EVENT_PAGETYPE_CATEGORY, function () {\n            getUniqueCategoriesFromImpressions().then(function (categories) {\n                if (categories.length === 0) {\n                    return;\n                }\n\n                easy.strategies.setPageCategoryContext(categories.slice(0, 20));\n            });\n        });\n\n        \/**\n         * Set search page context\n         *\/\n        easy.events.on(EVENT_PAGETYPE_SEARCH, function () {\n            easy.events.once(EVENT_PRODUCT_IMPRESSION, function (products) {\n                \/\/ Take 20 unique IDs. EEC guidelines states impressions should list first visible products, not the full list\n                \/\/ Recommendation API only processes top 3 at this time\n                var productsById = getArrayUniqueWithCounts(products, 'id').slice(0, 20);\n                var ids = easy.utils.map(productsById, function (product) {\n                    return product.id;\n                }); \/\/ Take 20 unique categories. EEC guidelines states impressions should list first visible products, not the full list\n                \/\/ Recommendation API only processes top 3 at this time\n\n                var productsByCategory = getArrayUniqueWithCounts(products, 'category').slice(0, 20);\n                var categories = easy.utils.map(productsByCategory, function (product) {\n                    return product.id;\n                });\n                easy.strategies.setPageSearchContext(ids, categories);\n            });\n        });\n\n        \/**\n         * Set cart page context\n         *\/\n        easy.events.on(EVENT_PAGETYPE_CART, function () {\n            easy.events.once(EVENT_USERINTEREST_READY, function (userInterest) {\n                var interests = userInterest.getByType('product_addtocart', 'lastTimestamp');\n\n                if (interests.length === 0) {\n                    return;\n                }\n\n                easy.strategies.setPageCartContext([interests[0].id]);\n            });\n        });\n        easy.events.on(EVENT_PRODUCT_CART_ADD, function (product) {\n            easy.strategies.setPageCartContext([product[0].id]);\n        });\n\n        \/**\n         * Set product page context\n         *\/\n        easy.events.on(EVENT_PAGETYPE_PRODUCT, function () {\n            easy.events.once(EVENT_PRODUCT_VIEW, function (product) {\n                easy.strategies.setPageProductContext({\n                    id: product.id,\n                    category: product.category\n                });\n            });\n        });\n\n        \/**\n         * Legacy: remove when possible to implement in UI\n         *\/\n        recommendations.retail = {\n            userAffinity: userAffinity,\n            externalDiscounts: externalDiscounts,\n            _external_tarjoukset: externalDiscounts,\n            _general__mostBought: mostBought,\n            _general__mostBought7d: mostBought7d,\n            _general__trending: trending,\n            _general__popular: popular,\n            _personalized__userMostViewed: userMostViewed,\n            _personalized__userRecentViewed: userRecentViewed,\n            _personalized__mostPopularInCategory: mostPopularInCategory,\n            _personalized__mostBoughtInCategory: mostBoughtInCategory,\n            _personalized__mostViewedInCategory: mostViewedInCategory,\n            _personalized__userAffinity: userAffinity,\n            _personalized__similarToRecentlyViewed: similarToRecentlyViewed,\n            _frontPage__popularAtTheMoment: frontPage__popularAtTheMoment,\n            _frontPage__lastViewed: frontPage__lastViewed,\n            _categoryPage__trendingInCategory: categoryPage__trendingInCategory,\n            _categoryPage__mostPopularInCategory: categoryPage__mostPopularInCategory,\n            _categoryPage__recommendedForYou: categoryPage__recommendedForYou,\n            _productPage__othersAlsoViewed: productPage__othersAlsoViewed,\n            _productPage__popularForYou: productPage__popularForYou,\n            _productPage__mostPopularInCategory: productPage__mostPopularInCategory,\n            _addToCartPage__boughtTogether: addToCartPage__boughtTogether,\n            _searchPage__viewedTogether: searchPage__viewedTogether\n        };\n    }\n\n    \/\/ CUSTOM STRATEGY -- External discounts\n    \/\/ This likely can't be built in Strategy UI at all\n\n    \/**\n     * Fetch product IDs from elisa discount api\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function externalDiscounts(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'externalDiscounts');\n        trackFn('init', { param: templateDefaults });\n        templateDefaults = initializeTemplateDefaults(templateDefaults);\n        return easy.fetch.get('https:\/\/dcm.dc1.elisa.fi\/promotions\/resolve?page=tarjoukset')\n            .then(function (response) {\n                var formattedProducts = easy.utils.map(response.products, function (product) {\n                    product.id = product.uid;\n                    if (product.visible && product.availabilityStatus === 'SELLABLE') {\n                        product.updated_at = (new Date()).toISOString();\n                    }\n                    return product;\n                });\n                return formattedProducts;\n            })\n            .then(function (formattedProducts) {\n                \/\/ remove duplicates by product name\n                var namesInArray = [];\n                var unique = easy.utils.filter(formattedProducts, function (product) {\n                    \/\/ easy.console.log('namesInArray:', namesInArray, product.name);\n                    if (namesInArray.length > 0 && easy.utils.inArray(namesInArray, product.name)) {\n                        return false;\n                    }\n                    namesInArray.push(product.name);\n                    return true;\n                })\n                return unique;\n            })\n            .then(function (filteredProducts) {\n                \/\/ _flattenRecoApiReponse expects array of arrays\n                return _flattenRecoApiResponse([filteredProducts], templateDefaults, trackFn);\n            });\n    }\n\n\n    \/\/ LEGACY STRATEGIES -- TO BE REMOVED AFTER MIGRATION\n    \/\/ Most of these are direct copies of old default strategies and\n    \/\/ should be easy to replace with Strategy UI\n\n    \/**\n     * Based on user last viewed 3 categories\n     * recommendation config most_viewed-24h\n     * recommendation config most_converted-24h\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function frontPage__popularAtTheMoment(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'frontPage__popularAtTheMoment');\n        trackFn('init', { param: templateDefaults });\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function (results) {\n            var userInterest = results[0];\n            var interests = userInterest.getByType('category_view', 'lastTimestamp');\n            var types = [];\n\n            if (interests.length === 0) {\n                \/\/ Default to all product types\n                types.push('');\n            } else {\n                types = easy.utils.map(interests.slice(0, 3), function (interest) {\n                    return interest.id;\n                });\n            }\n\n            return getRecommendations([{\n                configurations: ['most_viewed-24h', 'most_converted-24h'],\n                parameters: [{\n                    key: 'type',\n                    values: types\n                }]\n            }], templateDefaults, trackFn);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return frosmo.easy.Promise.resolve([]);\n            }\n            \/\/ Rethrow for real error\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * Based on currently viewed category\n     * recommendation config most_viewed-24h\n     * recommendation config most_converted-24h\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function categoryPage__trendingInCategory(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'categoryPage__trendingInCategory');\n        trackFn('init', { param: templateDefaults });\n        return promiseFromEvent('FCP_TRIGGER_ALIAS_pagetype_category').then(function () {\n            return getUniqueCategoriesFromImpressions();\n        }).then(function (categories) {\n            return getRecommendations([{\n                configurations: ['most_viewed-24h', 'most_converted-24h'],\n                parameters: [{\n                    key: 'type',\n                    values: categories\n                }]\n            }], templateDefaults, trackFn);\n        });\n    };\n\n    \/**\n     * Based on currently viewed category\n     * recommendation config most_viewed-7d\n     * recommendation config most_converted-7d\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function categoryPage__mostPopularInCategory(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'categoryPage__mostPopularInCategory');\n        trackFn('init', { param: templateDefaults });\n        return promiseFromEvent('FCP_TRIGGER_ALIAS_pagetype_category').then(function () {\n            return getUniqueCategoriesFromImpressions();\n        }).then(function (categories) {\n            return getRecommendations([{\n                configurations: ['most_viewed-7d', 'most_converted-7d'],\n                parameters: [{\n                    key: 'type',\n                    values: categories\n                }]\n            }], templateDefaults, trackFn);\n        });\n    };\n\n\n    \/**\n     * Based on currently last viewed product from current category\n     * recommendation config bundle_viewed-30d\n     * recommendation config bundle_converted-60d\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function categoryPage__recommendedForYou(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'categoryPage__recommendedForYou');\n        trackFn('init', { param: templateDefaults });\n        var currentCategories = null;\n        var categoryPromise = promiseFromEvent('FCP_TRIGGER_ALIAS_pagetype_category');\n        var userInterestPromise = promiseFromEvent(EVENT_USERINTEREST_READY);\n        var uniqueCategoryPromise = getUniqueCategoriesFromImpressions();\n        return easy.Promise.all([categoryPromise, userInterestPromise, uniqueCategoryPromise]).then(function (results) {\n            currentCategories = results[2];\n            var userInterest = results[1][0];\n            var interests = userInterest.getByType('product_view', 'lastTimestamp');\n\n            if (interests.length === 0) {\n                var description = 'No user product views available, breaking out';\n                trackFn('ready', description);\n                easy.console.log('categoryPage__recommendedForYou: ' + description);\n                throw new Error('No interests');\n            }\n\n            var ids = easy.utils.map(interests, function (interest) {\n                return String(interest.id);\n            });\n\n            \/\/ Get product data for last viewed products\n            return getProductApiData(ids);\n        }).then(function (results) {\n            \/\/ Find products from current categories\n            var matchingProducts = easy.utils.filter(results, function (product) {\n                return easy.utils.inArray(currentCategories, product.type);\n            }); \/\/ No matches, return\n\n            if (matchingProducts.length === 0) {\n                var description = 'No user product views available from this category, breaking out';\n                trackFn('ready', description);\n                easy.console.log('categoryPage__recommendedForYou: ' + description);\n                throw new Error('No interests');\n            }\n\n            \/\/ Only take first matching product ID\n            \/\/ Map to only attribute ID\n            var useProducts = matchingProducts.slice(0, 1);\n            var ids = easy.utils.map(useProducts, getProductId);\n            return getRecommendations([{\n                configurations: ['bundle_viewed-30d', 'bundle_converted-60d'],\n                parameters: [{\n                    key: 'id',\n                    values: ids\n                }]\n            }], templateDefaults, trackFn);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return easy.Promise.resolve([]);\n            }\n            \/\/ Rethrow for real error\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * Based on last 3 most viewed products with current page product, people who viewed also viewed\n     * recommendation config bundle_viewed-30d\n     * recommendation config bundle_converted-60d\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function productPage__popularForYou(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'productPage__popularForYou');\n        trackFn('init', { param: templateDefaults });\n        \/\/ returns (triggerData, eventData)\n        var productPromise = promiseFromEvent(EVENT_PRODUCT_VIEW);\n        var userInterestPromise = promiseFromEvent(EVENT_USERINTEREST_READY);\n        return easy.Promise.all([productPromise, userInterestPromise]).then(function (results) {\n            var currentProduct = results[0][0];\n            var userInterest = results[1][0];\n            var interests = userInterest.getByType('category_view', 'lastTimestamp');\n            var description;\n\n            if (interests.length === 0) {\n                description = 'No user category views, breaking out';\n                trackFn('ready', description);\n                easy.console.log('productPage__popularForYou: ' + description);\n                throw new Error('No interests');\n            }\n\n            var categories = easy.utils.map(interests, function (interest) {\n                return interest.id;\n            });\n\n            \/\/ Filter current page category from last viewed categories\n            categories = easy.utils.filter(categories, function (id) {\n                return currentProduct.category !== id;\n            });\n\n            if (categories.length === 0) {\n                description = 'No user category views that are not current category, breaking out';\n                trackFn('ready', description);\n                easy.console.log('productPage__popularForYou: ' + description);\n                throw new Error('No interests');\n            }\n\n            \/\/ Take last 3\n            categories = categories.slice(0, 3);\n            return getRecommendations([{\n                configurations: ['bundle_viewed_with_category-30d', 'bundle_converted_with_category-60d'],\n                parameters: [{\n                    key: 'category',\n                    values: categories\n                }]\n            }], templateDefaults, trackFn);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return easy.Promise.resolve([]);\n            }\n            \/\/ Rethrow for real error\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * Based on current page product, people who viewed also viewed\n     * recommendation config bundle_viewed-30d\n     * recommendation config bundle_converted-60d\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function productPage__othersAlsoViewed(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'productPage__othersAlsoViewed');\n        trackFn('init', { param: templateDefaults });\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function (results) {\n            var userInterest = results[0];\n            var interests = userInterest.getByType('product_view', 'lastTimestamp');\n\n            if (interests.length === 0) {\n                var description = 'No user product views, breaking out';\n                trackFn('ready', description);\n                easy.console.log('productPage__othersAlsoViewed: ' + description);\n                throw new Error('No interests');\n            }\n\n            \/\/ Only take first product\n            \/\/ Map to only attribute ID\n            var useProducts = interests.slice(0, 1);\n            var ids = easy.utils.map(useProducts, function (product) {\n                return product.id;\n            });\n            return getRecommendations([{\n                configurations: ['bundle_viewed-30d', 'bundle_converted-60d'],\n                parameters: [{\n                    key: 'id',\n                    values: ids\n                }]\n            }], templateDefaults, trackFn);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return easy.Promise.resolve([]);\n            } \/\/ Rethrow for real error\n\n\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * Based on last viewed category\n     * Excludes currently viewed product\n     *\n     * recommendation config most_viewed-7d\n     * recommendation config most_converted-7d\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function productPage__mostPopularInCategory(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'mostPopularInCategory');\n        trackFn('init', { param: templateDefaults });\n        templateDefaults = initializeTemplateDefaults(templateDefaults);\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function (results) {\n            var _a;\n\n            var userInterest = results[0];\n            var interests = userInterest.getByType('product_view', 'lastTimestamp');\n            \/\/ Only take first product (current page product)\n            \/\/ Map to only attribute ID\n            var useProducts = interests.slice(0, 1);\n            var ids = easy.utils.map(useProducts, function (product) {\n                return product.id;\n            });\n\n            \/\/ Push current page product to exclusion list\n            (_a = templateDefaults.excludeIds).push.apply(_a, ids);\n\n            \/\/ Get last viewed category\n            var category = _getLastCategory();\n\n            return getRecommendations([{\n                configurations: ['most_viewed-7d', 'most_converted-7d'],\n                parameters: [{\n                    key: 'type',\n                    values: [category]\n                }]\n            }], templateDefaults, trackFn);\n        });\n    };\n\n    \/**\n     * Based on bought together with product added to cart\n     * recommendation config bundle_converted-60d\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function addToCartPage__boughtTogether(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'addToCartPage__boughtTogether');\n        trackFn('init', {\n            param: templateDefaults\n        });\n\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function (results) {\n            var userInterest = results[0];\n            var interests = userInterest.getByType('product_addtocart', 'lastTimestamp');\n\n            if (interests.length === 0) {\n                var description = 'No user products added to cart, breaking out';\n                trackFn('ready', description);\n                easy.console.log('addToCartPage__boughtTogether: ' + description);\n                throw new Error('No interests');\n            }\n\n            var ids = easy.utils.map(interests, function (interest) {\n                return interest.id;\n            });\n\n            \/\/ Take last 1\n            ids = ids.slice(0, 1);\n            return getRecommendations([{\n                configurations: ['bundle_converted-60d'],\n                parameters: [{\n                    key: 'id',\n                    values: ids\n                }]\n            }], templateDefaults, trackFn);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return easy.Promise.resolve([]);\n            }\n            \/\/ Rethrow for real error\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * Based on viewed together with search result products (trigger product impression)\n     * recommendation config bundle_viewed-30d\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function searchPage__viewedTogether(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'searchPage__viewedTogether');\n        trackFn('init', {\n            param: templateDefaults\n        });\n\n        return promiseFromEvent(EVENT_PRODUCT_IMPRESSION).then(function (results) {\n            var products = results[0];\n\n            if (products.length === 0) {\n                var description = 'No search results available';\n                trackFn('ready', description);\n                easy.console.log('searchPage__viewedTogether: ' + description);\n                throw new Error('No interests');\n            }\n\n            var productsById = getArrayUniqueWithCounts(products, 'id').slice(0, 3);\n            var ids = easy.utils.map(productsById, function (product) {\n                return product.id;\n            });\n            var productsByCategory = getArrayUniqueWithCounts(products, 'category').slice(0, 3);\n            var categories = easy.utils.map(productsByCategory, function (product) {\n                return product.id;\n            });\n            return getRecommendations([{\n                configurations: ['bundle_viewed-30d'],\n                parameters: [{\n                    key: 'id',\n                    values: ids\n                }]\n            }, {\n                configurations: ['bundle_viewed_with_category-30d'],\n                parameters: [{\n                    key: 'category',\n                    values: categories\n                }]\n            }], templateDefaults, trackFn);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return easy.Promise.resolve([]);\n            }\n            \/\/ Rethrow for real error\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * most_bought-24h\n     * \n     * @param   templateDefaults {Object}   Options passed from template defaults* \n     * @returns {Promise}   Promise to return array of product IDs\n     *\/\n    function mostBought(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'mostBought');\n        trackFn('init', { param: templateDefaults });\n        return getRecommendations([{\n            configurations: ['most_converted-24h'],\n            parameters: [{\n                key: 'type',\n                values: ['']\n            }]\n        }], templateDefaults, trackFn);\n    };\n\n    \/**\n     * most_bought-7d\n     * \n     * @param   templateDefaults {Object}   Options passed from template defaults* \n     * @returns {Promise}   Promise to return array of product IDs\n     *\/\n    function mostBought7d(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'mostBought7d');\n        trackFn('init', { param: templateDefaults });\n        return getRecommendations([{\n            configurations: ['most_converted-7d'],\n            parameters: [{\n                key: 'type',\n                values: ['']\n            }]\n        }], templateDefaults, trackFn);\n    };\n\n    \/**\n     * Based on last viewed category\n     * recommendation config most_converted-7d\n     * \n    * @param   templateDefaults {Object}   Options passed from template defaults* \n     * @returns {Promise}   Promise to return array of product IDs\n     *\/\n    function mostBoughtInCategory(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'mostBoughtInCategory');\n        trackFn('init', { param: templateDefaults });\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function () {\n            var category = _getLastCategory();\n\n            return getRecommendations([{\n                configurations: ['most_converted-7d'],\n                parameters: [{\n                    key: 'type',\n                    values: ['product\/' + category]\n                }]\n            }], templateDefaults, trackFn);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return easy.Promise.resolve([]);\n            } \/\/ Rethrow for real error\n\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * Based on last viewed category\n     * recommendation config most_viewed-7d\n     * \n     * @param   templateDefaults {Object}   Options passed from template defaults** \n     * @returns {Promise}   Promise to return array of product IDs\n     *\/\n    function mostViewedInCategory(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'mostViewedInCategory');\n        trackFn('init', { param: templateDefaults });\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function () {\n            var category = _getLastCategory();\n\n            return getRecommendations([{\n                configurations: ['most_viewed-7d'],\n                parameters: [{\n                    key: 'type',\n                    values: ['product\/' + category]\n                }]\n            }], templateDefaults, trackFn);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return easy.Promise.resolve([]);\n            } \/\/ Rethrow for real error\n\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * Bundle view from User 3 recently viewed(site.recentProducts)\n     * \n     * @param   templateDefaults {Object}   Options passed from template defaults** * \n     * @returns {Promise}   Promise to return array of product IDs\n     *\/\n    function similarToRecentlyViewed(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'similarToRecentlyViewed');\n        trackFn('init', { param: templateDefaults });\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function () {\n            var products = site.recentProducts().slice(0, 3);\n            var ids = easy.utils.map(products, function (product) {\n                return product.id;\n            });\n\n            return getRecommendations([{\n                configurations: ['bundle_viewed-30d'],\n                parameters: [{\n                    key: 'id',\n                    values: [ids]\n                }]\n            }], templateDefaults, trackFn);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return easy.Promise.resolve([]);\n            } \/\/ Rethrow for real error\n\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * Based on user last viewed products - 7 days\n     * userInterest module\n     * \n     * @param   templateDefaults {Object}   Options passed from template defaults** * * \n     * @returns {Promise}   Promise to return array of product IDs\n     *\/\n    function frontPage__lastViewed(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, '_frontPage__lastViewed');\n        trackFn('init', { param: templateDefaults });\n        templateDefaults = initializeTemplateDefaults(templateDefaults);\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function (results) {\n            var userInterest = results[0];\n            var interests = userInterest.getByType('product_view', 'lastTimestamp');\n\n            if (interests.length === 0) {\n                easy.console.log('_frontPage__lastViewed: No user product views, breaking out');\n                return [];\n            }\n\n            interests = easy.utils.map(interests, function (interest) {\n                return interest.id;\n            });\n\n            if (templateDefaults.useShuffle) {\n                interests = shuffle(interests);\n            }\n            return interests;\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return easy.Promise.resolve([]);\n            }\n            \/\/ Rethrow for real error\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * most_viewed-24h\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function trending(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'trending');\n        trackFn('init', { param: templateDefaults });\n        return getRecommendations([{\n            configurations: ['most_viewed-24h'],\n            parameters: [{\n                key: 'type',\n                values: ['']\n            }]\n        }], templateDefaults, trackFn);\n    };\n\n    \/**\n     * most_viewed-60d\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function popular(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'popular');\n        trackFn('init', { param: templateDefaults });\n        return getRecommendations([{\n            configurations: ['most_viewed-60d'],\n            parameters: [{\n                key: 'type',\n                values: ['']\n            }]\n        }], templateDefaults, trackFn);\n    };\n\n    \/**\n     * User most Viewed (site.topViewedProducts)\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function userMostViewed(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'userMostViewed');\n        trackFn('init', { param: templateDefaults });\n        templateDefaults = initializeTemplateDefaults(templateDefaults);\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function () {\n            var products = frosmo.site.topViewedProducts();\n            var productIds = frosmo.easy.utils.map(products, function (product) {\n                return product.id;\n            });\n            return getProductApiData(productIds);\n        }).then(function (products) {\n            return prepareRecommendationProducts(products, templateDefaults);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return frosmo.easy.Promise.resolve([]);\n            }\n            \/\/ Rethrow for real error\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * User recently Viewed (site.recentProducts\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function userRecentViewed(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'userRecentViewed');\n        trackFn('init', { param: templateDefaults });\n        templateDefaults = initializeTemplateDefaults(templateDefaults);\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function () {\n            var products = frosmo.site.recentProducts();\n            var productIds = frosmo.easy.utils.map(products, function (product) {\n                return product.id;\n            });\n            return getProductApiData(productIds);\n        }).then(function (products) {\n            return prepareRecommendationProducts(products, templateDefaults);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return frosmo.easy.Promise.resolve([]);\n            }\n            \/\/ Rethrow for real error\n            throw new Error(err);\n        });\n    };\n\n    \/**\n     * Get last viewed category\n     *\/\n\n    function _getLastCategory() {\n        return frosmo.site.recentCategories()[0] ? frosmo.site.recentCategories()[0].id : '';\n    }\n\n    \/**\n     * Based on last viewed category\n     * recommendation config most_viewed-7d\n     * recommendation config most_converted-7d\n     *\n     * @param   templateDefaults {Object}   Options passed from template defaults\n     * @returns                  {Promise}  Promise to return array of product IDs\n     *\/\n    function mostPopularInCategory(templateDefaults) {\n        var trackFn = sendTrackingData.bind(null, 'mostPopularInCategory');\n        trackFn('init', { param: templateDefaults });\n        return promiseFromEvent(EVENT_USERINTEREST_READY).then(function () {\n            var category = _getLastCategory();\n\n            return getRecommendations([{\n                configurations: ['most_viewed-7d', 'most_converted-7d'],\n                parameters: [{\n                    key: 'type',\n                    values: [category]\n                }]\n            }], templateDefaults, trackFn);\n        })[\"catch\"](function (err) {\n            \/\/ Catch break-out errors and resolve with empty array\n            if (err.message === 'No interests') {\n                return frosmo.easy.Promise.resolve([]);\n            }\n            \/\/ Rethrow for real error\n            throw new Error(err);\n        });\n    };\n\n}());","triggerId":5613},{"id":760,"content":"function _genericRendererHidden(positionData) {\n    var instance = positionData.getMessageInstance();\n    instance.startTracking();\n}\n\nfunction _genericRenderer(positionData) {\n    var instance = positionData.getMessageInstance();\n    instance.insertHtml();\n}\n\nif (!easy.message.getCustomRenderer('genericRenderer')) {\n    easy.message.addCustomRenderer('genericRenderer', _genericRenderer);\n    easy.message.addCustomRenderer('genericRenderer.hidden', _genericRendererHidden);\n}","triggerId":null},{"id":1378,"content":"\/* global easy *\/\n\nfunction _isGoogleTranslated() {\n    return \/translate.google.com\/.test(window.location.href);\n}\n\nfunction _isArticlePage() {\n    return \/elisa.fi\\\/ideat\/.test(window.location.href) && _getType() === 'article';\n}\n\nfunction _getType() {\n    return document.querySelector(\"meta[property='og:type']\").getAttribute('content');\n}\n\nfunction _getId() {\n    return window.location.pathname.replace(\/\\\/\/g, '');\n}\n\nfunction _getArticleName() {\n    var articleEl = document.querySelectorAll('.entry-body h1 a');\n    if (articleEl && articleEl.length) {\n        return articleEl[0].innerHTML;\n    }\n    \/\/ Update selector, ticket sauna-184\n    articleEl = easy.domElements.selector('.entry-body h1');\n    if (articleEl && articleEl.length) {\n        return articleEl[0].innerHTML;\n    }\n    return false;\n}\n\nfunction _getAttribute(selector, attribute) {\n    var el = easy.domElements.selector(selector);\n    if (el.length) {\n        return el[0].getAttribute(attribute);\n    }\n    return false;\n}\n\nfunction _getImage() {\n    return _getAttribute('#image-mirror', 'src');\n}\n\nfunction _getArticleTags() {\n    var tags = easy.domElements.selector('.tag-list li a');\n    var tagValues = easy.utils.map(tags, function (tag) {\n        return tag.innerText;\n    });\n    return tagValues;\n}\n\nfunction _getReleaseDate() {\n    var releaseDate = easy.domElements.selector('.author-description p.date');\n    if (releaseDate && releaseDate.length) {\n        return releaseDate[0].innerHTML.match(\/[0-9]{0,2}\\.[0-9]{0,2}\\.[0-9]{2,4}\/)[0];\n    }\n    return false;\n}\n\nfunction _getReleaseTimestamp() {\n    var date = _getReleaseDate();\n    if (date.length > 0 && date.indexOf('.') > 0) {\n        date = date.split('.');\n        var timestamp = new Date(date[2] + '-' + date[1] + '-' + date[0]);\n        return timestamp.getTime();\n    }\n}\n\nfunction _getCategoryUrl() {\n    var url = _getAttribute('.author-description a', 'href');\n    var parsedUri = easy.utils.parseUri(url);\n    return parsedUri.protocol + ':\/\/' + parsedUri.host + parsedUri.path;\n}\n\nfunction _getArticleCategory() {\n    var categoryEl = easy.domElements.selector('.author-description p.date a');\n    if (categoryEl && categoryEl.length) {\n        return categoryEl[0].innerHTML.replace('&amp;', '&');\n    }\n    return false;\n}\n\n\/\/ Get ingress text from article's page\nfunction _getArticleIngress() {\n    var ingressEl = easy.domElements.selector('.entry-content h2, .entry-content h3, .entry-content h4');\n    if (ingressEl && ingressEl.length) {\n        return ingressEl[0].textContent;\n    }\n    return false;\n}\n\nfunction _getFirstParagraph() {\n    var paragraphs = easy.domElements.selector('.entry-content p');\n    var firstParagraph = easy.utils.find(paragraphs, function (p) {\n        \/\/ exclude the first paragraph whose content is &nbsp;\n        \/\/ or begins with Teksti:\n        return (p && p.textContent && !\/^\\u00a0$\/.test(p.textContent) && !\/^Teksti:\/.test(p.textContent));\n    });\n    return firstParagraph && firstParagraph.textContent\n        ? firstParagraph.textContent\n        : '';\n}\n\nfunction _getUrl() {\n    var loc = window.location;\n    return loc.protocol + '\/\/' + loc.host + loc.pathname;\n}\n\n\/**\n * Add is5g attribute to product tracking\n * so that we can use it for article recommendation with new recoApi\n *\/\nfunction _is5g() {\n    var tags = _getArticleTags();\n    if (easy.utils.inArray(tags, '5G')) {\n        return 'yes';\n    }\n    return 'no';\n}\n\n\/**\n * Add isESportArticle to product tracking\n * for article recommendation in new recoAPI\n *\/\nfunction _isESports() {\n    var tags = _getArticleTags();\n    if (easy.utils.inArray(tags, 'E-urheilu')) {\n        return 'yes';\n    }\n    return 'no';\n}\n\n\/**\n *\n * Because promotion label is not a good place store additional data,\n * we store them in frosmoProductData\n * We still keep promotion label as is because it might affect other modifications\n *\/\nfunction _getFrosmoProductData() {\n    return {\n        articleCategory: _getArticleCategory(),\n        articleTags: _getArticleTags(),\n        categoryUrl: _getCategoryUrl(),\n        firstParagraph: _getFirstParagraph(),        \n        ingressText: _getArticleIngress(),\n        is5g: _is5g(),\n        isESports: _isESports(),\n        releaseDate: _getReleaseDate(),\n        releaseTimestamp: _getReleaseTimestamp(),\n        scrape_update: Date.now()\n    };\n}\n\nfunction _getProductData() {\n    return {\n        frosmoProductId: _getId(),\n        frosmoProductName: _getArticleName(),\n        frosmoProductImage: _getImage(),\n        frosmoProductCategory: 'Article',\n        frosmoProductUrl: _getUrl(),\n        frosmoProductData: _getFrosmoProductData()\n    };\n}\n\nfunction init() {\n    \/\/ don't track translated articles\n    if (!_isArticlePage() || _isGoogleTranslated()) {\n        return;\n    }\n    \n    var product = _getProductData();\n    easy.dataLayer.handleItem(product);\n    \n    \/\/ Push article to readArticles in context to prevent recommending\n    \/\/ already red articles.  \n    frosmo.site.store.saveReadArticles(product.frosmoProductId);\n}\n\n\/\/ init tracking\neasy.ready().then(function () {\n    init();\n});","triggerId":5612},{"id":1571,"content":"\/\/ Ensure the Frosmo Preview Data API re-directs to FCP and not the proxied endpoint.\n\/\/ NOTE: This must be setup before initializing \"easy.api.*\" with the proxy endpoint\nvar origPreviewDataURL = easy.api.getApiUrl('preview');\nvar origGetApiUrlFn = easy.api.getApiUrl;\neasy.api.getApiUrl = function (apiName) {\n    return apiName === 'preview' ? origPreviewDataURL : origGetApiUrlFn(apiName);\n};\n\neasy.api.init('\/\/' + 'frosmo.elisa.fi' + '\/', easy.config.api.origin);\neasy.config.xdmUrl = 'https:\/\/' + 'frosmo.elisa.fi' + '\/frosmo.xdm.html';","triggerId":null},{"id":1727,"content":"function _elisaFrontpageActions() {\n    var products = '#Tuotteet_ja_palvelut, #5G';\n    var cs = '#Asiakaspalvelu_ja_tuki';\n    var emailLogin = '#S\u00e4hk\u00f6posti';\n\n    function _sendDevices() {\n        easy.log.info('CA elisaFrontpageActions: laitteet, netti, puheliittym\u00e4t sent', 'CA DEBUG');\n        easy.customAction.trigger('elisaFrontpageActions', 'laitteet, netti, puheliittym\u00e4t');\n    }\n\n    function _sendCustomerService() {\n        easy.log.info('CA elisaFrontpageActions: asiakaspalvelu sent', 'CA DEBUG');\n        easy.customAction.trigger('elisaFrontpageActions', 'asiakaspalvelu');\n    }\n\n    function _sendLogin() {\n        easy.log.info('CA elisaFrontpageActions: emailLogin sent', 'CA DEBUG');\n        easy.customAction.trigger('elisaFrontpageActions', 'emailLogin');\n    }\n\n    easy.domEvents.on(products, 'click', _sendDevices);\n    easy.domEvents.on(cs, 'click', _sendCustomerService);\n    easy.domEvents.on(emailLogin, 'click', _sendLogin);\n}\n\nfunction _elisaFrontpageLoginActions() {\n    function _sendLoginCA(event, targetEl) {\n        easy.log.info('CA elisaFrontpageLoginActions: ' + easy.utils.trim(targetEl.innerText) + ' sent', 'CA DEBUG');\n        easy.customAction.trigger('elisaFrontpageLoginActions', easy.utils.trim(targetEl.innerText));\n    }\n\n    var loginLinks = '.react-navi-ea-profile-content .react-navi-ea-accordion a';\n    easy.domEvents.on(loginLinks, 'click', _sendLoginCA);\n}\n\n\/\/ init\nif (\/elisa.fi\/.test(location.hostname)) {\n    _elisaFrontpageActions();\n    _elisaFrontpageLoginActions();\n}","triggerId":5612},{"id":1787,"content":"\/**\n * @module frosmo.modificationContext\n *\/\nfrosmo.modificationContext = (function () {\n    \/\/ public interface\n    return {\n        create: create,\n    };\n\n    \/**\n     * @function\n     * @ignore\n     *\/\n    function noop() {}\n\n    \/**\n     * Build modification params from message.template.defaults\n     * @param {easy.message} message\n     *\/\n    function _buildParams(message) {\n        if (!message || !message.template || !message.template.defaults) {\n            return {};\n        }\n\n        try {\n            return JSON.parse(message.template.defaults);\n        } catch (err) {\n            easy.log.error('message.template.defaults not valid JSON', 'frosmo.spa');\n            return {};\n        }\n    }\n\n    \/**\n     * ModificationContext interface object.\n     * @memberof frosmo.spa\n     * @function\n     * @param {easy.positionData} positionData\n     * @return {frosmo.spa.ModificationContext|null}\n     *\/\n    function create(positionData) {\n        \/\/ Get the original clear function from the positionData\n        \/\/ Override the positionData clear with no-operation function to give clean-up\n        \/\/ responsibility to connector component.\n        var _origClear = positionData.clear;\n        positionData.clear = noop;\n\n        var instance = positionData.getMessageInstance();\n\n        if (!instance) {\n            easy.log.error('messageInstance missing from positionData', 'frosmo.spa');\n            return null;\n        }\n\n        if (!positionData.message) {\n            easy.log.error('messageInstance missing from positionData', 'frosmo.spa');\n            return null;\n        }\n\n        \/**\n         * @memberof frosmo.spa\n         * @typedef frosmo.spa.ModificationContext\n         *\/\n        return {\n            \/**\n             * Modification variation.\n             * @memberof frosmo.spa.ModificationContext\n             * @property {Number} variation\n             *\/\n            variation: positionData.message.revision,\n\n            \/**\n             * Modification params (template defaults in FCP)\n             * @memberof frosmo.spa.ModificationContext\n             * @property {Object} params Template params object.\n             *\/\n            params: _buildParams(positionData.message),\n\n            \/**\n             * Modification textual content.\n             * @memberof frosmo.spa.ModificationContext\n             * @property {String} content\n             *\/\n            content: positionData.message.content || '',\n\n            \/**\n             * Trigger display event.\n             * @memberof frosmo.spa.ModificationContext\n             * @property {function} setDisplayed\n             *\/\n            setDisplayed: instance.setDisplayed.bind(instance),\n\n            \/**\n             * Trigger click event.\n             * @memberof frosmo.spa.ModificationContext\n             * @property {function} setClicked\n             *\/\n            setClicked: instance.setClicked.bind(instance),\n\n            \/**\n             * Trigger true display event.\n             * @memberof frosmo.spa.ModificationContext\n             * @property {function} setTrueDisplayed\n             *\/\n            setTrueDisplayed: instance.setTrueDisplayed.bind(instance),\n\n            \/**\n             * Set standard trackable elements.\n             * @memberof frosmo.spa.ModificationContext\n             * @property {function} setTrackableElements\n             *\/\n            setTrackableElements: instance.setTrackableElements.bind(instance),\n\n            \/**\n             * Start standard tracking.\n             * @memberof frosmo.spa.ModificationContext\n             * @property {function} startTracking\n             *\/\n            startTracking: instance.startTracking.bind(instance),\n\n            \/**\n             * Error logger function.\n             * @memberof frosmo.spa.ModificationContext\n             * @property {function} error\n             *\/\n            error: function (message, errorType) {\n                errorType = errorType || 'frosmo.spa.messageContext';\n                easy.log.error(message, errorType);\n            },\n\n            \/**\n             * Clears the encapsulated message instance.\n             * @memberof frosmo.spa.ModificationContext\n             * @property\n             *\/\n            clear: function () {\n                \/\/ clear\n                _origClear.apply(positionData);\n            }\n        };\n    }\n}());\n\n\/**\n * @module frosmo.spa\n *\/\nfrosmo.spa = (function () {\n    var MODULE = '[frosmo.spa]';\n\n    \/**\n     * @function\n     * @ignore\n     *\/\n    function noop() {}\n\n    \/**\n     * Find position from easy.config.\n     * @param {Array.<Object>} positions\n     * @param {String} selector\n     * @returns {Object}\n     *\/\n    function findPositionBySelector(positions, selector) {\n        return easy.utils.find(positions, function (position) {\n            return position.elementId === selector;\n        });\n    }\n\n    function registerRenderer(rendererName) {\n        var renderer = easy.message.getCustomRenderer(rendererName);\n\n        if (!renderer) {\n            easy.message.addCustomRenderer(rendererName, noop);\n        }\n    }\n\n    \/**\n     * @memberof frosmo.spa\n     * @function\n     * @param {String} selector Placement element id (target element)\n     * @param {Number} position position id\n     * @param {RequestOptions} options Request options: timeout.\n     *\/\n    function _requestMessage(selector, position, options) {\n        var TIMEOUT = 5000;\n        options = options || {};\n\n        \/\/ parse timeout\n        var requestTimeout = options.timeout > 0 ? Number(options.timeout) : TIMEOUT;\n\n        return new easy.Promise(function (resolve, reject, onCancel) {\n            \/\/ keep promise resolve status to prevent rejecting already resolved promise\n            var resolvedPositions = {};\n\n            if (position) {\n                \/* eslint-disable func-style *\/\n                var callback = function (positions) {\n                    var positionData = findPositionBySelector(positions, selector);\n\n                    \/\/ many requests are pending at once, match to selector\n                    if (!positionData) {\n                        return;\n                    }\n\n                    \/\/ TODO: support positionData trigger fire -> this would need changes to easy.positionData.render\n                    easy.message.show(positionData);\n\n                    \/\/ create exposed message context object\n                    var modificationContext = frosmo.modificationContext.create(positionData);\n\n                    if (modificationContext === null) {\n                        reject(new Error('Invalid modificationContext was received.'));\n                    }\n\n                    \/\/ mark as resolved\n                    resolvedPositions[positionData.position] = true;\n                    easy.console.debug(MODULE + ' :: request success for: ' + selector);\n                    resolve(modificationContext);\n                };\n                \/* eslint-enable func-style *\/\n\n                easy.events.on(easy.EVENT_MESSAGE_SUCCESS, callback, this, { ignoreTriggered: true });\n\n                var timeoutId = easy.utils.setTimeout(function () {\n                    easy.events.off(easy.EVENT_MESSAGE_SUCCESS, callback);\n\n                    \/\/ reject if position in the promise was not resolved\n                    if (!resolvedPositions[position.position]) {\n                        reject(new Error('Request timed out'));\n                    }\n                }, requestTimeout);\n\n                \/\/ promise cancellation\n                onCancel(function () {\n                    easy.events.off(easy.EVENT_MESSAGE_SUCCESS, callback);\n                    clearTimeout(timeoutId);\n                });\n\n                \/\/ sent request\n                easy.message.requestMessages({\n                    positions: [position]\n                });\n            } else {\n                reject(new Error('Placement with selector: \"' + selector + '\" not found!'));\n            }\n        });\n    }\n\n    \/**\n     * Request message to FROSMO placement. Evaluate client-side rules, make request to\n     * FROSMO MessageAPI and return result as a Promise.<ModificationContext>.\n     * @memberof frosmo.spa\n     * @function\n     * @param {String} selector Position element name to request.\n     * @param {RequestOptions} options Options (timeout)\n     * @returns {Promise.<ModificationContext>}\n     *\/\n    function requestBySelector(selector, options) {\n        options = options || {};\n        easy.console.debug(MODULE + ' :: start request position by selector: ' + selector);\n\n        if (!selector) {\n            return easy.Promise.reject('error', 'Missing placement id ');\n        }\n\n        var position = findPositionBySelector(easy.config.positions, selector);\n\n        if (!position) {\n            return easy.Promise.reject('error', 'Invalid placement id: ' + selector);\n        }\n\n        \/\/ override default renderer\n        var RENDERER_NAME = 'frosmo.spa';\n        registerRenderer(RENDERER_NAME);\n        position.renderer = RENDERER_NAME;\n\n        \/\/ make message fetch request\n        return _requestMessage(selector, position, options);\n    }\n\n    return {\n        requestBySelector: easy.guard(requestBySelector, {\n            module: MODULE\n        }),\n        log: easy.log\n    };\n}());\n\n\/**\n * Bootstrap frosmo.spa module. Dispatch \"frosmo.spa.ready\" event on window object to\n * notify attached event listeners about frosmo.easy & frosmo.easy.spa are loaded.\n *\/\n(function () {\n    var MODULE = '[frosmo.spa.bootstrap]';\n    var DOM_EVENT_FROSMO_SPA_READY = 'frosmo.spa.ready';\n\n    function _init() {\n        var event = new Event(DOM_EVENT_FROSMO_SPA_READY);\n        window.dispatchEvent(event);\n    }\n\n    var _guarderdInit = easy.guard(_init, {\n        module: MODULE\n    });\n\n    easy.ready(_guarderdInit);\n}());","triggerId":null},{"id":1852,"content":"\/* global easy *\/\nfrosmo.sharedCode = frosmo.sharedCode || {};\n\n\/**\n * Combined codebase for different split hero banner content source cases present on site\n * @name splitBanner\n * @namespace frosmo.sharedCode\n * @function\n * @public\n * @param contentSelector {string} CSS selector string for inserted banner content\n *\/\nfrosmo.sharedCode.splitHero = (function () {\n    function addSplitClasses() {\n        var hero1 = easy.domElements.selector('#elisa-banner-hero-1')[0];\n        easy.utils.removeClassName(hero1, ['ea-fgrid__item--laptop-12', 'ea-fgrid__item--desktop-ratio-3-1']);\n        easy.utils.addClassName(hero1, ['ea-fgrid__item--laptop-8', 'ea-fgrid__item--laptop-ratio-2-1']);\n\n        var hero2 = easy.domElements.selector('#elisa-banner-hero-2')[0];\n        easy.utils.addClassName(hero2, [\n            'ea-fgrid__item--laptop-ratio-1-1',\n            'ea-fgrid__item--laptop-4',\n            'ea-color-container',\n            'ea-color-container--white'\n        ]);\n    }\n\n    function headingText() {\n        var headingTextEl = easy.domElements.selector('#frosmo-grid-banner .ea-h1')[0];\n        if (headingTextEl) {\n            var hText = headingTextEl.innerText;\n            if (hText && hText.length > 14) {\n                headingTextEl.style.fontSize = \"3.8vw\";\n            }\n            if (hText && hText.length > 24) {\n                headingTextEl.style.fontSize = \"3.2vw\";\n            }\n        }\n    }\n    \n    function revealGridBanner() {\n        var el = easy.domElements.selector('#frosmo-grid-banner')[0];\n        if (el) {\n            easy.utils.removeClassName(el, 'fr-hidden');\n        }\n    }\n\n    function init() {\n        addSplitClasses();\n        headingText();\n        revealGridBanner();\n    }\n    \n    return {\n        init: init,\n        addSplitClasses: addSplitClasses,\n        headingText: headingText,\n        revealGridBanner: revealGridBanner\n    }\n})();","triggerId":null}],"strategies":{"most-bought-1-day":{"contextPaths":[]},"most-bought-7-days":{"contextPaths":[]},"most-popular":{"contextPaths":[]},"most-popular-articles":{"contextPaths":[]},"trending":{"contextPaths":[]}}};


    _frosmo.initFunction = function () {
        frosmo.easy.CUSTOM_SCRIPT_UPDATED_AT = '2022-04-19T05:16:15+00:00';
        frosmo.easy.api.init(_config.api.domain, _config.api.origin);

        if (frosmo.easy.versionAtLeast('8.119.0', frosmo.easy.VERSION)) {
            frosmo.easy.VERSION_RULES = 3.6;
            

            "bd0e36cb1705556320075bb2447aab89fd8e07c9";
(function(){function w(d,l){l(z)}var z={};w.amd=!0;(function(d,l){"function"===typeof w&&w.amd?l(z):(d.Mustache={},l(d.Mustache))})(this,function(d){function l(a){return"function"===typeof a}function t(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function p(a,c){return null!=a&&"object"===typeof a&&c in a}function w(a,c){function b(a){"string"===typeof a&&(a=a.split(E,2));if(!B(a)||2!==a.length)throw Error("Invalid tags: "+a);l=new RegExp(t(a[0])+"\\s*");g=new RegExp("\\s*"+t(a[1]));
p=new RegExp("\\s*"+t("}"+a[1]))}if(!a)return[];var e=[],m=[],n=[],h=!1,f=!1,l,g,p;b(c||d.tags);for(var q=new A(a),u,k,r,x;!q.eos();){u=q.pos;if(r=q.scanUntil(l)){x=0;for(var v=r.length;x<v;++x)if(k=r.charAt(x),F.call(G,k)?f=!0:n.push(m.length),m.push(["text",k,u,u+1]),u+=1,"\n"===k){if(h&&!f)for(;n.length;)delete m[n.pop()];else n=[];f=h=!1}}if(!q.scan(l))break;h=!0;k=q.scan(H)||"name";q.scan(I);"="===k?(r=q.scanUntil(D),q.scan(D),q.scanUntil(g)):"{"===k?(r=q.scanUntil(p),q.scan(J),q.scanUntil(g),
k="&"):r=q.scanUntil(g);if(!q.scan(g))throw Error("Unclosed tag at "+q.pos);x=[k,r,u,q.pos];m.push(x);if("#"===k||"^"===k)e.push(x);else if("/"===k){k=e.pop();if(!k)throw Error('Unopened section "'+r+'" at '+u);if(k[1]!==r)throw Error('Unclosed section "'+k[1]+'" at '+u);}else"name"===k||"{"===k||"&"===k?f=!0:"="===k&&b(r)}if(k=e.pop())throw Error('Unclosed section "'+k[1]+'" at '+q.pos);return z(y(m))}function y(a){for(var c=[],b,e,m=0,d=a.length;m<d;++m)if(b=a[m])"text"===b[0]&&e&&"text"===e[0]?
(e[1]+=b[1],e[3]=b[3]):(c.push(b),e=b);return c}function z(a){for(var c=[],b=c,e=[],m,d=0,h=a.length;d<h;++d)switch(m=a[d],m[0]){case "#":case "^":b.push(m);e.push(m);b=m[4]=[];break;case "/":b=e.pop();b[5]=m[2];b=0<e.length?e[e.length-1][4]:c;break;default:b.push(m)}return c}function A(a){this.tail=this.string=a;this.pos=0}function v(a,c){this.view=a;this.cache={".":this.view};this.parent=c}function g(){this.cache={}}var K=Object.prototype.toString,B=Array.isArray||function(a){return"[object Array]"===
K.call(a)},F=RegExp.prototype.test,G=/\S/,L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},I=/\s*/,E=/\s+/,D=/\s*=/,J=/\s*\}/,H=/#|\^|\/|>|\{|&|=|!/;A.prototype.eos=function(){return""===this.tail};A.prototype.scan=function(a){a=this.tail.match(a);if(!a||0!==a.index)return"";a=a[0];this.tail=this.tail.substring(a.length);this.pos+=a.length;return a};A.prototype.scanUntil=function(a){a=this.tail.search(a);var c;switch(a){case -1:c=this.tail;this.tail=
"";break;case 0:c="";break;default:c=this.tail.substring(0,a),this.tail=this.tail.substring(a)}this.pos+=c.length;return c};v.prototype.push=function(a){return new v(a,this)};v.prototype.lookup=function(a){var c=this.cache,b;if(c.hasOwnProperty(a))b=c[a];else{for(var e=this,d,n,h=!1;e;){if(0<a.indexOf("."))for(b=e.view,d=a.split("."),n=0;null!=b&&n<d.length;)n===d.length-1&&(h=p(b,d[n])),b=b[d[n++]];else b=e.view[a],h=p(e.view,a);if(h)break;e=e.parent}c[a]=b}l(b)&&(b=b.call(this.view));return b};
g.prototype.clearCache=function(){this.cache={}};g.prototype.parse=function(a,c){var b=this.cache,e=b[a];null==e&&(e=b[a]=w(a,c));return e};g.prototype.render=function(a,c,b){var e=this.parse(a);c=c instanceof v?c:new v(c);return this.renderTokens(e,c,b,a)};g.prototype.renderTokens=function(a,c,b,e){for(var d="",n,h,f,g=0,l=a.length;g<l;++g)f=void 0,n=a[g],h=n[0],"#"===h?f=this.renderSection(n,c,b,e):"^"===h?f=this.renderInverted(n,c,b,e):">"===h?f=this.renderPartial(n,c,b,e):"&"===h?f=this.unescapedValue(n,
c):"name"===h?f=this.escapedValue(n,c):"text"===h&&(f=this.rawValue(n)),void 0!==f&&(d+=f);return d};g.prototype.renderSection=function(a,c,b,d){function m(a){return g.render(a,c,b)}var g=this,h="",f=c.lookup(a[1]);if(f){if(B(f))for(var p=0,t=f.length;p<t;++p)h+=this.renderTokens(a[4],c.push(f[p]),b,d);else if("object"===typeof f||"string"===typeof f||"number"===typeof f)h+=this.renderTokens(a[4],c.push(f),b,d);else if(l(f)){if("string"!==typeof d)throw Error("Cannot use higher-order sections without the original template");
f=f.call(c.view,d.slice(a[3],a[5]),m);null!=f&&(h+=f)}else h+=this.renderTokens(a[4],c,b,d);return h}};g.prototype.renderInverted=function(a,c,b,d){var g=c.lookup(a[1]);if(!g||B(g)&&0===g.length)return this.renderTokens(a[4],c,b,d)};g.prototype.renderPartial=function(a,c,b){if(b&&(a=l(b)?b(a[1]):b[a[1]],null!=a))return this.renderTokens(this.parse(a),c,b,a)};g.prototype.unescapedValue=function(a,c){var b=c.lookup(a[1]);if(null!=b)return b};g.prototype.escapedValue=function(a,c){var b=c.lookup(a[1]);
if(null!=b)return d.escape(b)};g.prototype.rawValue=function(a){return a[1]};d.name="mustache.js";d.version="2.3.0";d.tags=["{{","}}"];var C=new g;d.clearCache=function(){return C.clearCache()};d.parse=function(a,c){return C.parse(a,c)};d.render=function(a,c,b){if("string"!==typeof a)throw c=TypeError,a=B(a)?"array":typeof a,new c('Invalid template! Template should be a "string" but "'+a+'" was given as the first argument for mustache#render(template, view, partials)');return C.render(a,c,b)};d.to_html=
function(a,c,b,e){a=d.render(a,c,b);if(l(e))e(a);else return a};d.escape=function(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return L[a]})};d.Scanner=A;d.Context=v;d.Writer=g;return d});frosmo.easy.template=function(d){var l={};return{addFormatter:function(d,p){l[d]=p},get:function(l){var p=d.config.templates[l];if(void 0===p)throw Error('Invalid "name" argument, for "'+l+'"');return p},render:function(t,p,w,y){y=d.utils.extend({},y,{type:d.ERROR_TYPE_TEMPLATE_EXCEPTION,module:"[template]"});
return d.guard(function(){if(!d.utils.isString(t))throw Error('Invalid type for "template" argument, got "'+d.utils.getType(t)+'"');if(!d.utils.isObject(p))throw Error('Invalid type for "view" argument, got "'+d.utils.getType(p)+'"');var y=d.utils.extend(d.utils.clone(p),l);return z.render(t,y,w)},y)()}}}(frosmo.easy)})();

"2d412db19fe58d195421cd064f23d983bb71adb6";
frosmo.geo=function(){function h(a,b){var c=parseFloat(b.lat-a.lat)*(Math.PI/180),f=parseFloat(b.lon-a.lon)*(Math.PI/180),d=parseFloat(a.lat)*(Math.PI/180),g=parseFloat(b.lat)*(Math.PI/180),c=Math.sin(c/2)*Math.sin(c/2)+Math.sin(f/2)*Math.sin(f/2)*Math.cos(d)*Math.cos(g);return 12742*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function d(a){a=a.replace(/\s/g,"").split(",");return{lat:parseFloat(a[0]),lon:parseFloat(a[1]),radius:parseFloat(a[2])||void 0}}var e={};return{getCircleDistance:h,getCities:function(a){var b=
[],c=d(a),f=/\d/g;frosmo.easy.utils.each(e,function(a,g){var e=g.replace(f,""),k=d(a);h(c,k)<=k.radius&&!frosmo.easy.utils.inArray(b,e)&&b.push(e)});return b},init:function(a){e=a.maps},parseCoordinates:d}}();

"4e91d7420db55f7e8a27785d96ca066bbafbaab6";
frosmo.easy.tracking=function(c){function h(a,b){if(!c.utils.isString(a)||0===a.length||128<a.length)throw c.internal.createLogError('Invalid event "action" argument',c.ERROR_TYPE_ARG_INVALID,{debug:frosmo.JSON.stringify({dataType:c.utils.getType(a),action:a,payload:b}),module:"[tracking]"});if(void 0!==b){if(!c.utils.isPlainObject(b)||2048<frosmo.JSON.stringify(b).length)throw c.internal.createLogError('Invalid event "payload" argument',c.ERROR_TYPE_ARG_INVALID,{debug:frosmo.JSON.stringify({dataType:c.utils.getType(b),
action:a,payload:b}),module:"[tracking]"});e("modificationId",b);e("variationId",b)}}function e(a,b){if(void 0!==b[a]&&(!c.utils.isInteger(b[a])||0>=b[a]))throw c.internal.createLogError('Invalid event payload property of "'+a+'"',c.ERROR_TYPE_ARG_INVALID,{debug:frosmo.JSON.stringify({dataType:c.utils.getType(b[a]),name:a,payload:b}),module:"[tracking]"});}function k(a,b){if(!c.utils.isString(a)||0===a.length||128<a.length)throw c.internal.createLogError('Invalid data "action" argument',c.ERROR_TYPE_ARG_INVALID,
{debug:frosmo.JSON.stringify({dataType:c.utils.getType(a),action:a,payload:b}),module:"[tracking]"});if(void 0!==b&&(!c.utils.isPlainObject(b)||2048<frosmo.JSON.stringify(b).length))throw c.internal.createLogError('Invalid data "payload" argument',c.ERROR_TYPE_ARG_INVALID,{debug:frosmo.JSON.stringify({dataType:c.utils.getType(b),action:a,payload:b}),module:"[tracking]"});}function f(a,b,d){a={type:a,sessionStart:c.api.getSessionStart(),action:b};d&&(a.payload=frosmo.JSON.stringify(d));return c.api.getCallUrl("tracking",
a)}function g(a){var b=c.api.getCallId();c.internal.sendBeacon(a+"&"+b,!0)}return{event:function(a,b){h(a,b);c.ready(function(){var d=c.utils.isPlainObject(b)?c.utils.clone(b):{},d=f("event",a,{modificationId:d.modificationId||0,variationId:d.variationId||0});g(d)})},data:function(a,b){k(a,b);c.ready(function(){var c=f("data",a,b);g(c)})}}}(frosmo.easy);

"5787cd0fd9a715e23bf74302de5e1ecec0db498f";
frosmo.easy.strategies=function(b){function l(){b.utils.each(g,function(a){var b=m();p(a,b)&&q(a,b)})}function p(a,c){var d=b.utils.every(a.contextPaths,function(a){a=b.utils.getByDotString(a,c,{empty:!1,nonObjects:!1});return b.utils.isArray(a)||b.utils.isString(a)&&0<a.length?!0:!1});d||(b.debug.addEntry("strategies",{type:"missing.contextPaths",strategy:a.strategy,contextPaths:a.contextPaths,options:b.guard.current()}),b.console.debug("[strategies]",'Strategy id string "'+a.strategy+'" does not have all context paths defined',
a));return d}function q(a,c){g=b.utils.filter(g,function(b){return b!==a});var d=b.internal.getProfile();d&&d===b.profile.OPT_OUT&&(c.user=void 0);var e=b.api.getApiUrl("reco")+"/v2",f={method:"strategy",origin:b.config.api.origin,cookieId:b.uid.get(),strategy:a.strategy,context:frosmo.JSON.stringify(c),shuffle:a.options.shuffle,variants:a.options.variants,ver:b.getVersion(),debug:a.options.debug};d&&(f.profile=d);a.apiFetch=b.fetch.get(e,{params:f,timeout:a.options.timeout});a.apiFetch.then(a.resolve).catch(function(c){var d=
String(c),e=b.ERROR_TYPE_AJAX_EXCEPTION;b.utils.isObject(c.errorThrown)&&(d=c.errorThrown.text,e=c.errorThrown.type);b.log.error(d,e,{debug:frosmo.JSON.stringify({strategy:a.strategy,options:a.options})});a.reject(c)}).finally(function(){h=b.utils.filter(h,function(b){return b!==a})});h.push(a);return a.promise}function m(){var a=e,b;b=frosmo.site&&frosmo.site.userInterest?{area:frosmo.site.getUserArea?frosmo.site.getUserArea():"",lastBought:{ids:f(frosmo.site.lastBoughtProducts(),20),categories:f(frosmo.site.lastBoughtCategories(),
3)},lastViewed:{ids:f(frosmo.site.recentProducts(),20),categories:f(frosmo.site.recentCategories(),3)},mostViewed:{ids:f(frosmo.site.topViewedProducts(),20),categories:f(frosmo.site.topViewedCategories(),3)}}:void 0;return{page:a,user:b}}function f(a,c){return b.utils.map(a,function(a){return a.id}).slice(0,c)}function r(a){if(!b.utils.isString(a))throw Error('Invalid type for "obj" argument, got "'+b.utils.getType(a)+'" for "'+frosmo.JSON.stringify(a)+'"');}function k(a){if(!b.utils.isArray(a))throw Error('Invalid type for "arr" argument, got "'+
b.utils.getType(a)+'" for "'+frosmo.JSON.stringify(a)+'"');b.utils.each(a,r)}var n,e,g=[],h=[];return{init:function(a){n=a;e={};b.events.once("frosmo_userInterest_ready",l);b.events.on("strategies.setPageContext",l)},clear:function(){b.events.off("frosmo_userInterest_ready",l);b.events.off("strategies.setPageContext",l);b.events.clearEvent("strategies.setPageContext");b.utils.each(g,function(a){a.promise.cancel(Error('Strategy "'+a.strategy+'" was cancelled, due to the clearing of all pending strategies'))});
g=[];b.utils.each(h,function(a){a.apiFetch.cancel(Error('Strategy "'+a.strategy+'" was cancelled, due to the clearing of all in progress strategies'))});h=[];e={}},fetch:function(a,c){c=b.utils.extend({shuffle:!1,variants:!1,timeout:void 0,debug:b.isDev()},c);var d={strategy:a,options:c,contextPaths:n[a]?n[a].contextPaths:[],promise:void 0,resolve:void 0,reject:void 0};d.promise=new b.Promise(function(a,b){d.resolve=a;d.reject=b});var e=m();if(p(d,e))return q(d,e);g.push(d);return d.promise},getContext:m,
setPageCartContext:function(a){k(a);b.utils.extend(e,{cart:{ids:a}});b.events.trigger("strategies.setPageContext")},setPageCategoryContext:function(a){if(1===arguments.length&&b.utils.isArray(a))k(a),b.utils.extend(e,{category:{categories:a}});else{b.log.error("easy.strategies.setPageCategoryContext(name, categories) should be easy.strategies.setPageCategoryContext(categories)",b.ERROR_TYPE_DEPRECATED+".removed");var c=arguments[0];a=arguments[1];r(c);k(a);b.utils.extend(e,{category:{name:c,categories:a}})}b.events.trigger("strategies.setPageContext")},
setPageOtherContext:function(){b.utils.extend(e,{});b.events.trigger("strategies.setPageContext")},setPageProductContext:function(a){if(!b.utils.isPlainObject(a)||void 0===a.id||!b.utils.isString(a.id)||void 0===a.category||!b.utils.isString(a.category))throw Error('Invalid product, got "'+a+'"');b.utils.extend(e,{product:a});b.events.trigger("strategies.setPageContext")},setPageSearchContext:function(a,c){k(a);k(c);b.utils.extend(e,{search:{ids:a,categories:c}});b.events.trigger("strategies.setPageContext")}}}(frosmo.easy);

            !function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=24)}([function(e,t){window.frosmo.site;var o=window.frosmo.easy,n=window,i=n.frosmo=n.frosmo||{};o=i.easy||{},i.site=i.site||{};i.easy.config=o.config||{}},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;n.ready(n.addExceptionHandling((function(){o.init()}),{code:n.ERROR_TYPE_SITE_INIT||2e3,module:n.MODULE_SITE}))},,,,,,,,,,,,,,,,,,,,,,,function(e,t,o){o(0),o(25),o(26),o(27),o(28),o(29),o(30),o(31),o(32),o(33),o(34),o(35),o(36),o(37),e.exports=o(1)},function(e,t){var o=window.frosmo.site;window.frosmo.easy;o.config=o.config||{},o.config.conversionsToCA=["mobilePhone","otherDevice","mobileSubscription","tablet"],o.config.cart_session_limit=5},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;!function(){o.config=o.config||{};var e=o.config;e.customApiUrl="//saunalahti_api.frosmo.com/",e.conversionsToCA=["mobilePhone","otherDevice","mobileSubscription","tablet"],n.config.singlePageSupport={hashchange:!0,popstate:!0,pushstate:!0,cancelPendingRequests:!1,clearEvents:[]},n.COOKIE_MAX_SIZE=6e3,n.config.contextApi=!0,e.cart_session_limit=5}()},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;o.quickRenderer=function(){function e(e){var t=e.getMessageInstance();window.loadedMsgs=window.loadedMsgs||{},window.loadedMsgs[t.id]||(window.loadedMsgs[t.id]=!0,t.insertHtml(),n.utils.waitFor(500,5e3,(function(){return!(!n.context||!n.context.segments)&&(t.startTracking(),!0)})).catch((function(e){n.log.error(e,o.ERROR_LOG_QR_MESSAGE_SHOWN_ACTION_TIMEOUT)})))}function t(e){var t=e.elementId.replace("$#",""),i=document.getElementById(t).cloneNode(!0),a=e.getMessageInstance();a.insertHtml(),a.startTracking();var r=0;n.events.on("FROSMO_SPLIT_MESSAGE_LOADED",(function(e){e&&r++})),n.utils.waitFor(10,3e3,(function(){return r>=2})).catch((function(e){n.log.error(e,o.ERROR_LOG_QR_SPLIT_HERO_FALLBACK_TIMEOUT),document.getElementById(t).innerHTML=i.innerHTML}))}return{init:function(){n.message.addCustomRenderer("messageShownAction",e),n.message.addCustomRenderer("splitHeroFallback",t)}}}()},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;o.utils={setCookie:function(){if(!1!==o.config.setCookieDomain){var e=window.location.href,t=".saunalahti.fi";/elisa.net/.test(e)?t=".elisa.net":/elisa.fi/.test(e)&&(t=".elisa.fi"),n.cookies.setCookieDomain(t)}},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},shuffleArray:function(e){return e.length<5?[]:e.sort((function(){return.5-Math.random()}))},getDayOfTheWeek:function(){return["Sun","Mon","Tue","Wed","Thur","Fri","Sat"][(new Date).getDay()]},isDevicesPage:function(){return/kauppa\/#/.test(window.location.href)},isAspaGuidePage:function(){return/^\/(asiakaspalvelu).*\/ohje\/.+/.test(window.location.pathname)},isOmaguruPage:function(){return/^\/omaguru\/.*/.test(window.location.pathname)},isAsiakaspalveluPage:function(){return/^\/asiakaspalvelu\/.*/.test(window.location.pathname)},isPaymentPage:function(e){return/^\/kassa\/tilaus\/.*/.test(e)}}},function(e,t){var o=window.frosmo.site;window.frosmo.easy;o.EVENT_SUBSCRIPTION_SUBMITTED="email_subscription_submitted",o.EVENT_LAST_VIEWED_DEVICE_ADDED="last_viewed_device_added",o.EVENT_LAST_VIEWED_DEVICE_SEEN="last_viewed_device_seen",o.EVENT_LAST_VIEWED_ITEM_ADDED="last_viewed_item_added",o.EVENT_LAST_VIEWED_ITEM_SEEN="last_viewed_item_seen",o.EVENT_DATALAYER_ITEM_PUSHED="frosmo_datalayer_item_pushed",o.EVENT_DATALAYER_PUSH_OVERRIDEN="frosmo_datalayer_item_overriden",o.EVENT_DATALAYER_ECOMMERCE_NOT_FOUND="dataLayer ecommerceProducts not found",o.ERROR_LOG_CONVERSION_TRACKING_INIT_TIMEOUT="Conversion tracking init timeout",o.ERROR_LOG_ELISAVIIHDE_TALLENTEET_FETCH="Elisaviihde/tallenteet fetch error",o.ERROR_LOG_ELISAVIIHDE_MAKSUKANAVAT_FETCH="Elisaviihde/maksukanavat fetch error",o.ERROR_LOG_FROSMO_DATALAYER_INIT_TIMEOUT="Frosmo datalayer init timeout",o.ERROR_LOG_QR_MESSAGE_SHOWN_ACTION_TIMEOUT="Timeout on messageShownAction quick renderer",o.ERROR_LOG_QR_SPLIT_HERO_FALLBACK_TIMEOUT="Timeout on splitHeroFallback quick renderer"},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;o.conversionsNew=function(){function e(){var e,t,i,a,r=(n.utils.each(window.frosmoDataLayer,(function(t){t.transactionId&&(e=t.transactionId)})),e),s=function(){var e=[],t=[];return n.utils.each(window.frosmoDataLayer,(function(e){e.transactionProducts&&(t=e.transactionProducts)})),t&&n.utils.each(t,(function(t){e.push({id:t.id,name:t.name,price:t.price,quantity:t.quantity})})),e}();r&&s&&(t=s,(a=n.context.site.lastViewedItems||[])&&t&&n.utils.each(t,(function(e){var t=n.utils.find(a,(function(t){return e.name===t.name&&!/(^Elisa)/g.test(e.name)&&"phone"===t.type}));if(t){var o=t.name.split(" ")[0];i={name:t.name,brand:o,imageUrl:t.imageUrl,timestamp:Date.now()},n.context.site.hasPurchasedDevice=i,n.context.save()}})),function(){if(!window.ecommerceProducts)return void n.console.log(o.EVENT_DATALAYER_ECOMMERCE_NOT_FOUND);n.utils.each(window.ecommerceProducts,(function(e){var t=e.category;t&&o.customAction.productPurchaseCategory(t)}))}(),n.dataLayer.handleItem({transactionId:r,transactionProducts:s}))}return{init:function(t){var i;n.console.log("[site.conversions]","Initialization"),n.console.log(t),i=t?n.utils.parseUri(t).path:window.location.pathname,o.utils.isPaymentPage(i)&&n.domElements.waitFor({selector:"div#thank-you-page"}).then((function(){n.console.log("transaction ready!"),e()})).catch((function(e){n.log.error(e,o.ERROR_LOG_CONVERSION_TRACKING_INIT_TIMEOUT)}))}}}()},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;o.customAction={init:function(){var e,t,i=window.location.hostname;/verkkoasiointi.elisa.fi/.test(i)||/'verkkoasiointi-uat.elisa.fi'/.test(i)||(e=o.store.getHasSeenLastViewedItem(),n.customAction.trigger("hasSeenLastViewedItem",e),n.customAction.trigger("visitDay",o.utils.getDayOfTheWeek()),n.customAction.trigger("visitHour",(new Date).getHours()),n.context.site.hasViewedAsiakaspalveluPage&&n.customAction.trigger("hasViewedAspaPage",!0)),(t=navigator.language||navigator.userLanguage)&&/^(sv|sv-fi)$/i.test(t)&&n.customAction.trigger("browserLanguage","swedish"),n.utils.each(window.dataLayer,(function(e){e.authType&&n.customAction.trigger("omaElisaLogin","ANONYMOUS"!==e.authType)})),n.events.on(n.EVENT_LOCATION,(function(e){var t=/^FI$/.test(e.country2);n.customAction.trigger("Finland",t)})),n.context.site.hasViewedOmaguruPage&&n.customAction.trigger("hasViewedOmaguruPage",!0)},productPurchaseCategory:function(e){n.customAction.trigger("productPurchaseCategory",e)}}},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;o.deviceProductTracking={init:function(){function e(e){var t,o={frosmoProductId:(t=e).frosmoProductId,frosmoProductName:t.frosmoProductName,frosmoProductImage:t.frosmoProductImage,frosmoProductCategory:t.frosmoProductCategory,frosmoProductUrl:t.frosmoProductUrl,frosmoProductPromotionLabel:frosmo.JSON.stringify({source:"frosmoDataLayer"})};n.dataLayer.handleItem(o),n.console.log("NEW PRODUCT TRACKING")}n.events.on(o.EVENT_DATALAYER_ITEM_PUSHED,(function(t){t.frosmoProductId&&e(t)}))}}},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;o.events={init:function(){!function(){function e(e,t){if(function(e){return/sendElisaEventsGa/.test(e.content)}(e)){var o="#"+e.id+"."+e.revision;window.ga("send","event","Frosmo",t,o,0,{nonInteraction:!0})}}n.events.on(n.EVENT_MESSAGE_SHOW,(function(t){e(t,"display")})),n.events.on(n.EVENT_MESSAGE_TRUE_DISPLAY,(function(t){e(t,"true display")})),n.events.on(n.EVENT_MESSAGE_CLICK,(function(t){e(t,"click")}))}(),n.console.log("events initialization")}}},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;o.frosmoDataLayer=function(){function e(e){n.events.trigger(o.EVENT_DATALAYER_ITEM_PUSHED,e)}return{init:function(){n.utils.waitFor(200,0,(function(){return Boolean(window.frosmoDataLayer)})).then((function(){!function(){var t=window.frosmoDataLayer.push;function i(){return e(arguments[0]),n.console.log("window.frosmoDataLayer item pushed: ",arguments[0]),n.guard(t).call(window.frosmoDataLayer,arguments[0])}window.frosmoDataLayer.push!==i&&window.frosmoDataLayer.length&&(n.utils.each(window.frosmoDataLayer,e),window.frosmoDataLayer.push=i,n.events.trigger(o.EVENT_DATALAYER_PUSH_OVERRIDEN))}()})).catch((function(e){n.log.error(e,o.ERROR_LOG_FROSMO_DATALAYER_INIT_TIMEOUT)}))}}}()},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;!function(){function e(){n.message.init({},document.location.href),n.message.requestMessages()}o.utils.setCookie(),o.quickRenderer.init(),frosmo.easy.XDM_INIT_TIMEOUT=2e4,o.init=function(){function t(t){"verkkoasiointi.elisa.fi"===window.location.hostname||"verkkoasiointi-uat.elisa.fi"===window.location.hostname?(n.utils.setTimeout(n.guard(e),200),frosmo.easy.dataLayer.init()):n.events.on(n.EVENT_JQUERY_READY,(function(){n.utils.setTimeout(n.guard(e),200),frosmo.easy.dataLayer.init()})),o.customAction.init(),o.events.init(),o.store.init(),o.conversionsNew.init(t)}n.config.hiddenMessageClickTracking=!0,t(),o.frosmoDataLayer.init(),o.deviceProductTracking.init(),n.events.on(n.EVENT_URL_CHANGED,t)}}()},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;!function(){function e(e){var t=o.store.getReadArticles();return n.utils.filter(e,(function(e){var o=jQuery(e).attr("data-frosmo-article-id");return!n.utils.inArray(t,o)}))}n.message.addCustomRenderer("elisaSplitHeroSecondSplit",(function(e){var t=e.getMessageInstance();t.insertHtml(),t.setDisplayed(),jQuery(".frosmo_product_link").on("click",(function(){t.setClicked()}));var o=jQuery(window).width()<960?1:0,i=jQuery(".ea-fluid-container .link-wrapper.frosmo_product_link").get(o);n.messageTrueDisplay.start(t,e,i)})),n.message.addCustomRenderer("elisaArticleRecommendation",(function(t){var n,i,a=t.getMessageInstance(),r="<div id='fr-article-wrapper'>"+a.content+"</div>",s=jQuery(r).find(".frosmo-article");a.insertHtml();var c,u,d,f,l=e(s);n=l.length?l:s,c=o.utils.getRandomInt(1,n.length),u=n[c-1],i=jQuery(u).attr("data-frosmo-article-id"),d=jQuery(".frosmo-article"),f=frosmo.easy.utils.filter(d,(function(e){return jQuery(e).attr("data-frosmo-article-id")===i})),jQuery(f).show(),a.startTracking()})),n.message.addCustomRenderer("elisaFiveArticleRecommendation",(function(t){var i,a=t.getMessageInstance(),r=a.getElements()[0],s=[],c=jQuery(a.content).find(".frosmo-article-185");n.utils.addClassName(n.domElements.selector(".return-link-wrap")[0],"fr-hidden"),a.insertHtml(),i=e(c),s=function(e,t){var i=o.utils.shuffleArray(t).slice(0,e);return n.utils.each(i,(function(e){s.push(jQuery(e).attr("data-frosmo-article-id"))})),s}(5,i),function(){var e=jQuery(".frosmo-article-185");if(!s.length)return n.utils.removeClassName(n.domElements.selector(".return-link-wrap")[0],"fr-hidden"),void jQuery(r).hide();var t=frosmo.easy.utils.filter(e,(function(e){return n.utils.indexOf(s,jQuery(e).attr("data-frosmo-article-id"))>=0})),o=document.createElement("div");jQuery(o).addClass("fr-flex-3");var i=!0;n.utils.each(t,(function(e,t){if(t>0)n.utils.removeClassName(e,"w2"),n.utils.addClassName(e,"w1");else{jQuery(e).parent().parent().prepend(e);var a=n.domElements.selector(".post-excerpt",e)[0];n.utils.removeClassName(a,"fr-hidden")}n.utils.removeClassName(e,"frosmo-article-hidden"),t>2&&(n.utils.addClassName(e,"fr-hidden-in-tablet"),jQuery(e).clone().appendTo(jQuery(o))),i&&(jQuery(e).parent().parent().append(o),i=!1)}))}(),a.startTracking()})),n.message.addCustomRenderer("aspaStickyFooter",(function(e){var t=e.getMessageInstance();t.insertHtml(),t.setDisplayed(),n.events.once("aspaStickyFooterTrueDisplay",(function(){n.messageTrueDisplay.start(t,e,n.domElements.selector(".frosmo-footer-top")[0])})),n.events.once("aspaStickyFooterClick",(function(){t.setClicked()}))})),n.message.addCustomRenderer("genericRenderer",(function(e){e.getMessageInstance().insertHtml()}))}()},function(e,t){var o=window.frosmo.site,n=window.frosmo.easy;o.store=function(){function e(){return n.context.site.readArticles||[]}function t(e){n.context.site.hasSeenLastViewedItems=e,n.context.save()}return{init:function(){n.events.off(o.EVENT_LAST_VIEWED_ITEM_ADDED),n.events.off(o.EVENT_LAST_VIEWED_ITEM_SEEN),n.events.on(o.EVENT_LAST_VIEWED_ITEM_ADDED,(function(){o.utils.isDevicesPage()&&t(!1)})),n.events.on(o.EVENT_LAST_VIEWED_ITEM_SEEN,(function(){t(!0)})),function(){if(o.utils.isAspaGuidePage()){var e={},t=n.domElements.selector("div.ea-color-container>img.ea-img")[0];t&&/omaguru/.test(t.src)?e.category="omaGuru":(e.category="aspa",n.context.site.hasViewedOmaguruPage&&(n.context.site.hasViewedOmaguruPage=!1,n.context.save())),e.url=window.location.href,e.timeStamp=Date.now(),n.context.site.lastViewedAspaPage=e,n.context.save()}}(),o.utils.isOmaguruPage()&&(n.context.site.hasViewedOmaguruPage=!0,n.context.save()),o.utils.isAsiakaspalveluPage()&&(n.context.site.hasViewedAsiakaspalveluPage=!0,n.context.save())},saveReadArticles:function(t){var o=e(),i=[t];n.utils.each(o,(function(e){t!==e&&i.push(e)})),n.context.site.readArticles=i,n.context.save()},getReadArticles:e,getHasSeenLastViewedItem:function(){return n.context.site.hasSeenLastViewedItems||!1}}}()}]);

            frosmo.easy.guard(function () {
                frosmo.easy.init(_config);
            }, { type: frosmo.easy.ERROR_TYPE_CORE_INIT, module: frosmo.easy.MODULE_CORE })();
            if (!frosmo.easy.workspaces) {
                frosmo.easy.log.send('Workspaces module not found', frosmo.easy.ERROR_TYPE_MODULE_MISSING, {
                    level: frosmo.easy.LOG_LEVEL_CRITICAL
                });
            }
        } else {
            frosmo.easy.log.warn('Invalid minimum Frosmo Core version, expected 8.119.0', frosmo.easy.ERROR_TYPE_VERSION_INVALID);
        }
    }

    "c96ad57aa530d7728b9321ae8ad80dd3550bb463";
_frosmo.workspaces=function(k,l){function m(){var a;try{a=document.cookie.match(new RegExp(e+"=(\\d+)"))}catch(b){}return a?Number(a[1]):0}function g(a){if(isNaN(a-parseFloat(a))||0>=a)throw Error('Invalid "workspaceId" argument for "'+a+'"');n(e,a,14)}function h(){n(e,"",-1)}function p(a){var b=document.createElement("div");b.id=e;b.innerText=a;frosmo.easy.utils.each({background:"#000","border-radius":"250px",border:"5px solid #ffb347",color:"#fff",cursor:"move","font-family":"sans-serif","font-size":"2em",
"user-select":"none",position:"absolute","text-align":"center","vertical-align":"middle",right:"10px",top:"10px",height:"100px",width:"100px","line-height":"95px","z-index":999999},function(a,c){b.style[c]=a});frosmo.easy.utils.waitFor(100,5E3,function(){return document.body&&_frosmo.workspaceId===a}).then(function(){var d="Previewing Frosmo workspace #"+a+". To hide this indicator, double-click or tap it.";_frosmo.workspaceScript&&(b.style.borderStyle="dashed",d+="\nNote: Using the workspace script");
b.title=d;document.body.appendChild(b)}).catch(function(b){frosmo.easy.console.error("[workspaces]",'Unable to load the workspaces indicator for workspace id "'+a+'", loaded id was "'+_frosmo.workspaceId+'"');frosmo.easy.console.error("[workspaces]",b)});t(b)}function t(a){var b=a.style.zIndex,d=0;frosmo.easy.domEvents.on(a,"click.workspaces",function(){var b=Date.now();if(frosmo.easy.utils.isMobile()||500>b-d)a.style.display="none",frosmo.easy.domEvents.off(a,"*.workspaces");d=b});frosmo.easy.domEvents.on(a,
"mousedown.workspaces",function(c){function d(b){a.style.left=b.pageX-f+"px";a.style.top=b.pageY-e+"px"}var q=a.getBoundingClientRect(),f=c.clientX-q.left,e=c.clientY-q.top;a.style.position="absolute";a.style.zIndex=b;frosmo.easy.domEvents.on(document,"mousemove.workspaces",d);frosmo.easy.domEvents.once(a,"mouseup.workspaces",function(){frosmo.easy.domEvents.off(document,"mousemove.workspaces",d)})})}function r(a){if(a=a.match(/#(activate_fws|deactivate_fws)(?:_(\d+))?/))switch(a[1]){case "deactivate_fws":h();
break;case "activate_fws":a=Number(a[2]),0<a&&g(a)}}function u(a){if(window!==a.source){var b=frosmo.JSON.safeParse(a.data,{});switch(b.type){case "remove":h();a.source.postMessage(frosmo.JSON.stringify({type:"remove",value:null}),a.origin);break;case "set":g(b.value),a.source.postMessage(frosmo.JSON.stringify({type:"set",value:b.value}),a.origin)}}}function n(a,b,d){var c="";d&&(c=new Date,c.setTime(c.getTime()+864E5*d),c="; expires="+c.toGMTString());try{document.cookie=escape(a)+"="+escape(b)+
c+"; path=/"}catch(e){}}var e=l+"_ws_id";r(location.href);return{init:function(a,b,d){var c=m();if((new RegExp("#"+e+"$")).test(a))_frosmo.initFunction=function(){for(var a=frosmo.JSON.stringify({type:"ready",value:c}),b=window;b!==window.top;)b.postMessage(a,"*"),b=b.parent;b.postMessage(a,"*");frosmo.easy.domEvents.on(window,"message",u)};else if(0<c){var g=!document.currentScript||!document.currentScript.async;_frosmo.initFunction=function(){var a="//"+b+"/sites/"+d+"_"+c+".js";g&&document.write('<script onerror="'+
l+'.easy.workspaces.deactivate()" src="'+a+'" data-namespace="'+k+'">\x3c/script>');var f=frosmo.easy.domElements.selector('[src="'+a+'"]')[0];if(f&&frosmo.easy.events.isTriggered(frosmo.easy.EVENT_SCRIPT_LOAD))p(c);else{f&&f.parentNode.removeChild(f);var e=this,f=frosmo.easy.domElements.addScriptTag(a,!1,function(){p(c);frosmo.easy.events.isTriggered(frosmo.easy.EVENT_SCRIPT_LOAD)||frosmo.easy.runGuarded(_frosmo.initFunction,{context:e})});f.setAttribute("data-namespace",k);frosmo.easy.domEvents.once(f,
"error",h)}}}},getId:m,activate:g,deactivate:h,_testHandleLocationHash:r}}(_frosmoScriptNamespace,_frosmoNamespace);

    if (_frosmo.workspaces) {
        _frosmo.workspaces.init(location.href, 'd2wzl9lnvjz3bh.cloudfront.net', '6b90eceaad4f672b7760334a74898f7e');
    }
    if (frosmo.easy && frosmo.easy.guard && !_frosmo.initialized) {
        frosmo.easy.workspaces = _frosmo.workspaces;
        frosmo.easy.guard(_frosmo.initFunction)();
        _frosmo.initialized = !frosmo.easy.workspaces.getId();
    }
}());
